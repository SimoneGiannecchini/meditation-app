/*! For license information please see 496.eac48da5.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmeditation_app=self.webpackChunkmeditation_app||[]).push([[496],{51:(t,e,n)=>{n.d(e,{Q:()=>i});const i=(0,n(43).createContext)({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"})},190:(t,e,n)=>{n.d(e,{L:()=>i});const i=(0,n(43).createContext)({})},213:(t,e,n)=>{n.d(e,{A:()=>ye});var i={};function s(t,e){return function(){return t.apply(e,arguments)}}n.r(i),n.d(i,{hasBrowserEnv:()=>ot,hasStandardBrowserEnv:()=>lt,hasStandardBrowserWebWorkerEnv:()=>ut,navigator:()=>at,origin:()=>ct});const{toString:r}=Object.prototype,{getPrototypeOf:o}=Object,a=(l=Object.create(null),t=>{const e=r.call(t);return l[e]||(l[e]=e.slice(8,-1).toLowerCase())});var l;const u=t=>(t=t.toLowerCase(),e=>a(e)===t),c=t=>e=>typeof e===t,{isArray:h}=Array,d=c("undefined");const f=u("ArrayBuffer");const p=c("string"),m=c("function"),g=c("number"),y=t=>null!==t&&"object"===typeof t,v=t=>{if("object"!==a(t))return!1;const e=o(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},w=u("Date"),b=u("File"),T=u("Blob"),E=u("FileList"),S=u("URLSearchParams"),[x,A,C,P]=["ReadableStream","Request","Response","Headers"].map(u);function R(t,e){let n,i,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),h(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const i=s?Object.getOwnPropertyNames(t):Object.keys(t),r=i.length;let o;for(n=0;n<r;n++)o=i[n],e.call(null,t[o],o,t)}}function D(t,e){e=e.toLowerCase();const n=Object.keys(t);let i,s=n.length;for(;s-- >0;)if(i=n[s],e===i.toLowerCase())return i;return null}const _="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,k=t=>!d(t)&&t!==_;const I=(O="undefined"!==typeof Uint8Array&&o(Uint8Array),t=>O&&t instanceof O);var O;const M=u("HTMLFormElement"),N=(t=>{let{hasOwnProperty:e}=t;return(t,n)=>e.call(t,n)})(Object.prototype),L=u("RegExp"),V=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};R(n,((n,s)=>{let r;!1!==(r=e(n,s,t))&&(i[s]=r||n)})),Object.defineProperties(t,i)};const F=u("AsyncFunction"),U=((t,e)=>{return t?setImmediate:e?(n=`axios@${Math.random()}`,i=[],_.addEventListener("message",(t=>{let{source:e,data:s}=t;e===_&&s===n&&i.length&&i.shift()()}),!1),t=>{i.push(t),_.postMessage(n,"*")}):t=>setTimeout(t);var n,i})("function"===typeof setImmediate,m(_.postMessage)),j="undefined"!==typeof queueMicrotask?queueMicrotask.bind(_):"undefined"!==typeof process&&process.nextTick||U,B={isArray:h,isArrayBuffer:f,isBuffer:function(t){return null!==t&&!d(t)&&null!==t.constructor&&!d(t.constructor)&&m(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"===typeof FormData&&t instanceof FormData||m(t.append)&&("formdata"===(e=a(t))||"object"===e&&m(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&f(t.buffer),e},isString:p,isNumber:g,isBoolean:t=>!0===t||!1===t,isObject:y,isPlainObject:v,isReadableStream:x,isRequest:A,isResponse:C,isHeaders:P,isUndefined:d,isDate:w,isFile:b,isBlob:T,isRegExp:L,isFunction:m,isStream:t=>y(t)&&m(t.pipe),isURLSearchParams:S,isTypedArray:I,isFileList:E,forEach:R,merge:function t(){const{caseless:e}=k(this)&&this||{},n={},i=(i,s)=>{const r=e&&D(n,s)||s;v(n[r])&&v(i)?n[r]=t(n[r],i):v(i)?n[r]=t({},i):h(i)?n[r]=i.slice():n[r]=i};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&R(arguments[s],i);return n},extend:function(t,e,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return R(e,((e,i)=>{n&&m(e)?t[i]=s(e,n):t[i]=e}),{allOwnKeys:i}),t},trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,i)=>{let s,r,a;const l={};if(e=e||{},null==t)return e;do{for(s=Object.getOwnPropertyNames(t),r=s.length;r-- >0;)a=s[r],i&&!i(a,t,e)||l[a]||(e[a]=t[a],l[a]=!0);t=!1!==n&&o(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:a,kindOfTest:u,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return-1!==i&&i===n},toArray:t=>{if(!t)return null;if(h(t))return t;let e=t.length;if(!g(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=n.next())&&!i.done;){const n=i.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const i=[];for(;null!==(n=t.exec(e));)i.push(n);return i},isHTMLForm:M,hasOwnProperty:N,hasOwnProp:N,reduceDescriptors:V,freezeMethods:t=>{V(t,((e,n)=>{if(m(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=t[n];m(i)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(t,e)=>{const n={},i=t=>{t.forEach((t=>{n[t]=!0}))};return h(t)?i(t):i(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,n){return e.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(t,e)=>null!=t&&Number.isFinite(t=+t)?t:e,findKey:D,global:_,isContextDefined:k,isSpecCompliantForm:function(t){return!!(t&&m(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),n=(t,i)=>{if(y(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[i]=t;const s=h(t)?[]:{};return R(t,((t,e)=>{const r=n(t,i+1);!d(r)&&(s[e]=r)})),e[i]=void 0,s}}return t};return n(t,0)},isAsyncFn:F,isThenable:t=>t&&(y(t)||m(t))&&m(t.then)&&m(t.catch),setImmediate:U,asap:j};function $(t,e,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}B.inherits($,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.status}}});const q=$.prototype,z={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{z[t]={value:t}})),Object.defineProperties($,z),Object.defineProperty(q,"isAxiosError",{value:!0}),$.from=(t,e,n,i,s,r)=>{const o=Object.create(q);return B.toFlatObject(t,o,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),$.call(o,t.message,e,n,i,s),o.cause=t,o.name=t.name,r&&Object.assign(o,r),o};const K=$;function G(t){return B.isPlainObject(t)||B.isArray(t)}function H(t){return B.endsWith(t,"[]")?t.slice(0,-2):t}function W(t,e,n){return t?t.concat(e).map((function(t,e){return t=H(t),!n&&e?"["+t+"]":t})).join(n?".":""):e}const X=B.toFlatObject(B,{},null,(function(t){return/^is[A-Z]/.test(t)}));const Q=function(t,e,n){if(!B.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const i=(n=B.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!B.isUndefined(e[t])}))).metaTokens,s=n.visitor||u,r=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&B.isSpecCompliantForm(e);if(!B.isFunction(s))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(B.isDate(t))return t.toISOString();if(!a&&B.isBlob(t))throw new K("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(t)||B.isTypedArray(t)?a&&"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}function u(t,n,s){let a=t;if(t&&!s&&"object"===typeof t)if(B.endsWith(n,"{}"))n=i?n:n.slice(0,-2),t=JSON.stringify(t);else if(B.isArray(t)&&function(t){return B.isArray(t)&&!t.some(G)}(t)||(B.isFileList(t)||B.endsWith(n,"[]"))&&(a=B.toArray(t)))return n=H(n),a.forEach((function(t,i){!B.isUndefined(t)&&null!==t&&e.append(!0===o?W([n],i,r):null===o?n:n+"[]",l(t))})),!1;return!!G(t)||(e.append(W(s,n,r),l(t)),!1)}const c=[],h=Object.assign(X,{defaultVisitor:u,convertValue:l,isVisitable:G});if(!B.isObject(t))throw new TypeError("data must be an object");return function t(n,i){if(!B.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+i.join("."));c.push(n),B.forEach(n,(function(n,r){!0===(!(B.isUndefined(n)||null===n)&&s.call(e,n,B.isString(r)?r.trim():r,i,h))&&t(n,i?i.concat(r):[r])})),c.pop()}}(t),e};function Y(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function J(t,e){this._pairs=[],t&&Q(t,this,e)}const Z=J.prototype;Z.append=function(t,e){this._pairs.push([t,e])},Z.toString=function(t){const e=t?function(e){return t.call(this,e,Y)}:Y;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};const tt=J;function et(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function nt(t,e,n){if(!e)return t;const i=n&&n.encode||et;B.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let r;if(r=s?s(e,n):B.isURLSearchParams(e)?e.toString():new tt(e,n).toString(i),r){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t}const it=class{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){B.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},st={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rt={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:tt,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ot="undefined"!==typeof window&&"undefined"!==typeof document,at="object"===typeof navigator&&navigator||void 0,lt=ot&&(!at||["ReactNative","NativeScript","NS"].indexOf(at.product)<0),ut="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,ct=ot&&window.location.href||"http://localhost",ht={...i,...rt};const dt=function(t){function e(t,n,i,s){let r=t[s++];if("__proto__"===r)return!0;const o=Number.isFinite(+r),a=s>=t.length;if(r=!r&&B.isArray(i)?i.length:r,a)return B.hasOwnProp(i,r)?i[r]=[i[r],n]:i[r]=n,!o;i[r]&&B.isObject(i[r])||(i[r]=[]);return e(t,n,i[r],s)&&B.isArray(i[r])&&(i[r]=function(t){const e={},n=Object.keys(t);let i;const s=n.length;let r;for(i=0;i<s;i++)r=n[i],e[r]=t[r];return e}(i[r])),!o}if(B.isFormData(t)&&B.isFunction(t.entries)){const n={};return B.forEachEntry(t,((t,i)=>{e(function(t){return B.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),i,n,0)})),n}return null};const ft={transitional:st,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",i=n.indexOf("application/json")>-1,s=B.isObject(t);s&&B.isHTMLForm(t)&&(t=new FormData(t));if(B.isFormData(t))return i?JSON.stringify(dt(t)):t;if(B.isArrayBuffer(t)||B.isBuffer(t)||B.isStream(t)||B.isFile(t)||B.isBlob(t)||B.isReadableStream(t))return t;if(B.isArrayBufferView(t))return t.buffer;if(B.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let r;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return Q(t,new ht.classes.URLSearchParams,Object.assign({visitor:function(t,e,n,i){return ht.isNode&&B.isBuffer(t)?(this.append(e,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((r=B.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return Q(r?{"files[]":t}:t,e&&new e,this.formSerializer)}}return s||i?(e.setContentType("application/json",!1),function(t,e,n){if(B.isString(t))try{return(e||JSON.parse)(t),B.trim(t)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||ft.transitional,n=e&&e.forcedJSONParsing,i="json"===this.responseType;if(B.isResponse(t)||B.isReadableStream(t))return t;if(t&&B.isString(t)&&(n&&!this.responseType||i)){const n=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(s){if(n){if("SyntaxError"===s.name)throw K.from(s,K.ERR_BAD_RESPONSE,this,null,this.response);throw s}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ht.classes.FormData,Blob:ht.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],(t=>{ft.headers[t]={}}));const pt=ft,mt=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),gt=Symbol("internals");function yt(t){return t&&String(t).trim().toLowerCase()}function vt(t){return!1===t||null==t?t:B.isArray(t)?t.map(vt):String(t)}function wt(t,e,n,i,s){return B.isFunction(i)?i.call(this,e,n):(s&&(e=n),B.isString(e)?B.isString(i)?-1!==e.indexOf(i):B.isRegExp(i)?i.test(e):void 0:void 0)}class bt{constructor(t){t&&this.set(t)}set(t,e,n){const i=this;function s(t,e,n){const s=yt(e);if(!s)throw new Error("header name must be a non-empty string");const r=B.findKey(i,s);(!r||void 0===i[r]||!0===n||void 0===n&&!1!==i[r])&&(i[r||e]=vt(t))}const r=(t,e)=>B.forEach(t,((t,n)=>s(t,n,e)));if(B.isPlainObject(t)||t instanceof this.constructor)r(t,e);else if(B.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim()))r((t=>{const e={};let n,i,s;return t&&t.split("\n").forEach((function(t){s=t.indexOf(":"),n=t.substring(0,s).trim().toLowerCase(),i=t.substring(s+1).trim(),!n||e[n]&&mt[n]||("set-cookie"===n?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)})),e})(t),e);else if(B.isHeaders(t))for(const[o,a]of t.entries())s(a,o,n);else null!=t&&s(e,t,n);return this}get(t,e){if(t=yt(t)){const n=B.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}(t);if(B.isFunction(e))return e.call(this,t,n);if(B.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=yt(t)){const n=B.findKey(this,t);return!(!n||void 0===this[n]||e&&!wt(0,this[n],n,e))}return!1}delete(t,e){const n=this;let i=!1;function s(t){if(t=yt(t)){const s=B.findKey(n,t);!s||e&&!wt(0,n[s],s,e)||(delete n[s],i=!0)}}return B.isArray(t)?t.forEach(s):s(t),i}clear(t){const e=Object.keys(this);let n=e.length,i=!1;for(;n--;){const s=e[n];t&&!wt(0,this[s],s,t,!0)||(delete this[s],i=!0)}return i}normalize(t){const e=this,n={};return B.forEach(this,((i,s)=>{const r=B.findKey(n,s);if(r)return e[r]=vt(i),void delete e[s];const o=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,n)=>e.toUpperCase()+n))}(s):String(s).trim();o!==s&&delete e[s],e[o]=vt(i),n[o]=!0})),this}concat(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.constructor.concat(this,...e)}toJSON(t){const e=Object.create(null);return B.forEach(this,((n,i)=>{null!=n&&!1!==n&&(e[i]=t&&B.isArray(n)?n.join(", "):n)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((t=>{let[e,n]=t;return e+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t){const e=new this(t);for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return i.forEach((t=>e.set(t))),e}static accessor(t){const e=(this[gt]=this[gt]={accessors:{}}).accessors,n=this.prototype;function i(t){const i=yt(t);e[i]||(!function(t,e){const n=B.toCamelCase(" "+e);["get","set","has"].forEach((i=>{Object.defineProperty(t,i+n,{value:function(t,n,s){return this[i].call(this,e,t,n,s)},configurable:!0})}))}(n,t),e[i]=!0)}return B.isArray(t)?t.forEach(i):i(t),this}}bt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),B.reduceDescriptors(bt.prototype,((t,e)=>{let{value:n}=t,i=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(t){this[i]=t}}})),B.freezeMethods(bt);const Tt=bt;function Et(t,e){const n=this||pt,i=e||n,s=Tt.from(i.headers);let r=i.data;return B.forEach(t,(function(t){r=t.call(n,r,s.normalize(),e?e.status:void 0)})),s.normalize(),r}function St(t){return!(!t||!t.__CANCEL__)}function xt(t,e,n){K.call(this,null==t?"canceled":t,K.ERR_CANCELED,e,n),this.name="CanceledError"}B.inherits(xt,K,{__CANCEL__:!0});const At=xt;function Ct(t,e,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(new K("Request failed with status code "+n.status,[K.ERR_BAD_REQUEST,K.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}const Pt=function(t,e){t=t||10;const n=new Array(t),i=new Array(t);let s,r=0,o=0;return e=void 0!==e?e:1e3,function(a){const l=Date.now(),u=i[o];s||(s=l),n[r]=a,i[r]=l;let c=o,h=0;for(;c!==r;)h+=n[c++],c%=t;if(r=(r+1)%t,r===o&&(o=(o+1)%t),l-s<e)return;const d=u&&l-u;return d?Math.round(1e3*h/d):void 0}};const Rt=function(t,e){let n,i,s=0,r=1e3/e;const o=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=r,n=null,i&&(clearTimeout(i),i=null),t.apply(null,e)};return[function(){const t=Date.now(),e=t-s;for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];e>=r?o(l,t):(n=l,i||(i=setTimeout((()=>{i=null,o(n)}),r-e)))},()=>n&&o(n)]},Dt=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;const s=Pt(50,250);return Rt((n=>{const r=n.loaded,o=n.lengthComputable?n.total:void 0,a=r-i,l=s(a);i=r;t({loaded:r,total:o,progress:o?r/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&r<=o?(o-r)/l:void 0,event:n,lengthComputable:null!=o,[e?"download":"upload"]:!0})}),n)},_t=(t,e)=>{const n=null!=t;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},kt=t=>function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return B.asap((()=>t(...n)))},It=ht.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,ht.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(ht.origin),ht.navigator&&/(msie|trident)/i.test(ht.navigator.userAgent)):()=>!0,Ot=ht.hasStandardBrowserEnv?{write(t,e,n,i,s,r){const o=[t+"="+encodeURIComponent(e)];B.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),B.isString(i)&&o.push("path="+i),B.isString(s)&&o.push("domain="+s),!0===r&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Mt(t,e,n){let i=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e);return t&&(i||0==n)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const Nt=t=>t instanceof Tt?{...t}:t;function Lt(t,e){e=e||{};const n={};function i(t,e,n,i){return B.isPlainObject(t)&&B.isPlainObject(e)?B.merge.call({caseless:i},t,e):B.isPlainObject(e)?B.merge({},e):B.isArray(e)?e.slice():e}function s(t,e,n,s){return B.isUndefined(e)?B.isUndefined(t)?void 0:i(void 0,t,0,s):i(t,e,0,s)}function r(t,e){if(!B.isUndefined(e))return i(void 0,e)}function o(t,e){return B.isUndefined(e)?B.isUndefined(t)?void 0:i(void 0,t):i(void 0,e)}function a(n,s,r){return r in e?i(n,s):r in t?i(void 0,n):void 0}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(t,e,n)=>s(Nt(t),Nt(e),0,!0)};return B.forEach(Object.keys(Object.assign({},t,e)),(function(i){const r=l[i]||s,o=r(t[i],e[i],i);B.isUndefined(o)&&r!==a||(n[i]=o)})),n}const Vt=t=>{const e=Lt({},t);let n,{data:i,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:o,headers:a,auth:l}=e;if(e.headers=a=Tt.from(a),e.url=nt(Mt(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),B.isFormData(i))if(ht.hasStandardBrowserEnv||ht.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[t,...e]=n?n.split(";").map((t=>t.trim())).filter(Boolean):[];a.setContentType([t||"multipart/form-data",...e].join("; "))}if(ht.hasStandardBrowserEnv&&(s&&B.isFunction(s)&&(s=s(e)),s||!1!==s&&It(e.url))){const t=r&&o&&Ot.read(o);t&&a.set(r,t)}return e},Ft="undefined"!==typeof XMLHttpRequest&&function(t){return new Promise((function(e,n){const i=Vt(t);let s=i.data;const r=Tt.from(i.headers).normalize();let o,a,l,u,c,{responseType:h,onUploadProgress:d,onDownloadProgress:f}=i;function p(){u&&u(),c&&c(),i.cancelToken&&i.cancelToken.unsubscribe(o),i.signal&&i.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const i=Tt.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Ct((function(t){e(t),p()}),(function(t){n(t),p()}),{data:h&&"text"!==h&&"json"!==h?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:i,config:t,request:m}),m=null}m.open(i.method.toUpperCase(),i.url,!0),m.timeout=i.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new K("Request aborted",K.ECONNABORTED,t,m)),m=null)},m.onerror=function(){n(new K("Network Error",K.ERR_NETWORK,t,m)),m=null},m.ontimeout=function(){let e=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const s=i.transitional||st;i.timeoutErrorMessage&&(e=i.timeoutErrorMessage),n(new K(e,s.clarifyTimeoutError?K.ETIMEDOUT:K.ECONNABORTED,t,m)),m=null},void 0===s&&r.setContentType(null),"setRequestHeader"in m&&B.forEach(r.toJSON(),(function(t,e){m.setRequestHeader(e,t)})),B.isUndefined(i.withCredentials)||(m.withCredentials=!!i.withCredentials),h&&"json"!==h&&(m.responseType=i.responseType),f&&([l,c]=Dt(f,!0),m.addEventListener("progress",l)),d&&m.upload&&([a,u]=Dt(d),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",u)),(i.cancelToken||i.signal)&&(o=e=>{m&&(n(!e||e.type?new At(null,t,m):e),m.abort(),m=null)},i.cancelToken&&i.cancelToken.subscribe(o),i.signal&&(i.signal.aborted?o():i.signal.addEventListener("abort",o)));const y=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(i.url);y&&-1===ht.protocols.indexOf(y)?n(new K("Unsupported protocol "+y+":",K.ERR_BAD_REQUEST,t)):m.send(s||null)}))},Ut=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let n,i=new AbortController;const s=function(t){if(!n){n=!0,o();const e=t instanceof Error?t:this.reason;i.abort(e instanceof K?e:new At(e instanceof Error?e.message:e))}};let r=e&&setTimeout((()=>{r=null,s(new K(`timeout ${e} of ms exceeded`,K.ETIMEDOUT))}),e);const o=()=>{t&&(r&&clearTimeout(r),r=null,t.forEach((t=>{t.unsubscribe?t.unsubscribe(s):t.removeEventListener("abort",s)})),t=null)};t.forEach((t=>t.addEventListener("abort",s)));const{signal:a}=i;return a.unsubscribe=()=>B.asap(o),a}},jt=function*(t,e){let n=t.byteLength;if(!e||n<e)return void(yield t);let i,s=0;for(;s<n;)i=s+e,yield t.slice(s,i),s=i},Bt=async function*(t){if(t[Symbol.asyncIterator])return void(yield*t);const e=t.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},$t=(t,e,n,i)=>{const s=async function*(t,e){for await(const n of Bt(t))yield*jt(n,e)}(t,e);let r,o=0,a=t=>{r||(r=!0,i&&i(t))};return new ReadableStream({async pull(t){try{const{done:e,value:i}=await s.next();if(e)return a(),void t.close();let r=i.byteLength;if(n){let t=o+=r;n(t)}t.enqueue(new Uint8Array(i))}catch(e){throw a(e),e}},cancel:t=>(a(t),s.return())},{highWaterMark:2})},qt="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,zt=qt&&"function"===typeof ReadableStream,Kt=qt&&("function"===typeof TextEncoder?(Gt=new TextEncoder,t=>Gt.encode(t)):async t=>new Uint8Array(await new Response(t).arrayBuffer()));var Gt;const Ht=function(t){try{for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return!!t(...n)}catch(s){return!1}},Wt=zt&&Ht((()=>{let t=!1;const e=new Request(ht.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e})),Xt=zt&&Ht((()=>B.isReadableStream(new Response("").body))),Qt={stream:Xt&&(t=>t.body)};var Yt;qt&&(Yt=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((t=>{!Qt[t]&&(Qt[t]=B.isFunction(Yt[t])?e=>e[t]():(e,n)=>{throw new K(`Response type '${t}' is not supported`,K.ERR_NOT_SUPPORT,n)})})));const Jt=async(t,e)=>{const n=B.toFiniteNumber(t.getContentLength());return null==n?(async t=>{if(null==t)return 0;if(B.isBlob(t))return t.size;if(B.isSpecCompliantForm(t)){const e=new Request(ht.origin,{method:"POST",body:t});return(await e.arrayBuffer()).byteLength}return B.isArrayBufferView(t)||B.isArrayBuffer(t)?t.byteLength:(B.isURLSearchParams(t)&&(t+=""),B.isString(t)?(await Kt(t)).byteLength:void 0)})(e):n},Zt={http:null,xhr:Ft,fetch:qt&&(async t=>{let{url:e,method:n,data:i,signal:s,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:c,withCredentials:h="same-origin",fetchOptions:d}=Vt(t);u=u?(u+"").toLowerCase():"text";let f,p=Ut([s,r&&r.toAbortSignal()],o);const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&Wt&&"get"!==n&&"head"!==n&&0!==(g=await Jt(c,i))){let t,n=new Request(e,{method:"POST",body:i,duplex:"half"});if(B.isFormData(i)&&(t=n.headers.get("content-type"))&&c.setContentType(t),n.body){const[t,e]=_t(g,Dt(kt(l)));i=$t(n.body,65536,t,e)}}B.isString(h)||(h=h?"include":"omit");const s="credentials"in Request.prototype;f=new Request(e,{...d,signal:p,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:i,duplex:"half",credentials:s?h:void 0});let r=await fetch(f);const o=Xt&&("stream"===u||"response"===u);if(Xt&&(a||o&&m)){const t={};["status","statusText","headers"].forEach((e=>{t[e]=r[e]}));const e=B.toFiniteNumber(r.headers.get("content-length")),[n,i]=a&&_t(e,Dt(kt(a),!0))||[];r=new Response($t(r.body,65536,n,(()=>{i&&i(),m&&m()})),t)}u=u||"text";let y=await Qt[B.findKey(Qt,u)||"text"](r,t);return!o&&m&&m(),await new Promise(((e,n)=>{Ct(e,n,{data:y,headers:Tt.from(r.headers),status:r.status,statusText:r.statusText,config:t,request:f})}))}catch(y){if(m&&m(),y&&"TypeError"===y.name&&/fetch/i.test(y.message))throw Object.assign(new K("Network Error",K.ERR_NETWORK,t,f),{cause:y.cause||y});throw K.from(y,y&&y.code,t,f)}})};B.forEach(Zt,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(n){}Object.defineProperty(t,"adapterName",{value:e})}}));const te=t=>`- ${t}`,ee=t=>B.isFunction(t)||null===t||!1===t,ne=t=>{t=B.isArray(t)?t:[t];const{length:e}=t;let n,i;const s={};for(let r=0;r<e;r++){let e;if(n=t[r],i=n,!ee(n)&&(i=Zt[(e=String(n)).toLowerCase()],void 0===i))throw new K(`Unknown adapter '${e}'`);if(i)break;s[e||"#"+r]=i}if(!i){const t=Object.entries(s).map((t=>{let[e,n]=t;return`adapter ${e} `+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=e?t.length>1?"since :\n"+t.map(te).join("\n"):" "+te(t[0]):"as no adapter specified";throw new K("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return i};function ie(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new At(null,t)}function se(t){ie(t),t.headers=Tt.from(t.headers),t.data=Et.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return ne(t.adapter||pt.adapter)(t).then((function(e){return ie(t),e.data=Et.call(t,t.transformResponse,e),e.headers=Tt.from(e.headers),e}),(function(e){return St(e)||(ie(t),e&&e.response&&(e.response.data=Et.call(t,t.transformResponse,e.response),e.response.headers=Tt.from(e.response.headers))),Promise.reject(e)}))}const re="1.8.4",oe={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{oe[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));const ae={};oe.transitional=function(t,e,n){function i(t,e){return"[Axios v1.8.4] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,s,r)=>{if(!1===t)throw new K(i(s," has been removed"+(e?" in "+e:"")),K.ERR_DEPRECATED);return e&&!ae[s]&&(ae[s]=!0,console.warn(i(s," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,s,r)}},oe.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};const le={assertOptions:function(t,e,n){if("object"!==typeof t)throw new K("options must be an object",K.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let s=i.length;for(;s-- >0;){const r=i[s],o=e[r];if(o){const e=t[r],n=void 0===e||o(e,r,t);if(!0!==n)throw new K("option "+r+" must be "+n,K.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new K("Unknown option "+r,K.ERR_BAD_OPTION)}},validators:oe},ue=le.validators;class ce{constructor(t){this.defaults=t,this.interceptors={request:new it,response:new it}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const e=t.stack?t.stack.replace(/^.+\n/,""):"";try{n.stack?e&&!String(n.stack).endsWith(e.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+e):n.stack=e}catch(i){}}throw n}}_request(t,e){"string"===typeof t?(e=e||{}).url=t:e=t||{},e=Lt(this.defaults,e);const{transitional:n,paramsSerializer:i,headers:s}=e;void 0!==n&&le.assertOptions(n,{silentJSONParsing:ue.transitional(ue.boolean),forcedJSONParsing:ue.transitional(ue.boolean),clarifyTimeoutError:ue.transitional(ue.boolean)},!1),null!=i&&(B.isFunction(i)?e.paramsSerializer={serialize:i}:le.assertOptions(i,{encode:ue.function,serialize:ue.function},!0)),void 0!==e.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),le.assertOptions(e,{baseUrl:ue.spelling("baseURL"),withXsrfToken:ue.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let r=s&&B.merge(s.common,s[e.method]);s&&B.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete s[t]})),e.headers=Tt.concat(r,s);const o=[];let a=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,o.unshift(t.fulfilled,t.rejected))}));const l=[];let u;this.interceptors.response.forEach((function(t){l.push(t.fulfilled,t.rejected)}));let c,h=0;if(!a){const t=[se.bind(this),void 0];for(t.unshift.apply(t,o),t.push.apply(t,l),c=t.length,u=Promise.resolve(e);h<c;)u=u.then(t[h++],t[h++]);return u}c=o.length;let d=e;for(h=0;h<c;){const t=o[h++],e=o[h++];try{d=t(d)}catch(f){e.call(this,f);break}}try{u=se.call(this,d)}catch(f){return Promise.reject(f)}for(h=0,c=l.length;h<c;)u=u.then(l[h++],l[h++]);return u}getUri(t){return nt(Mt((t=Lt(this.defaults,t)).baseURL,t.url,t.allowAbsoluteUrls),t.params,t.paramsSerializer)}}B.forEach(["delete","get","head","options"],(function(t){ce.prototype[t]=function(e,n){return this.request(Lt(n||{},{method:t,url:e,data:(n||{}).data}))}})),B.forEach(["post","put","patch"],(function(t){function e(e){return function(n,i,s){return this.request(Lt(s||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}ce.prototype[t]=e(),ce.prototype[t+"Form"]=e(!0)}));const he=ce;class de{constructor(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const n=this;this.promise.then((t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null})),this.promise.then=t=>{let e;const i=new Promise((t=>{n.subscribe(t),e=t})).then(t);return i.cancel=function(){n.unsubscribe(e)},i},t((function(t,i,s){n.reason||(n.reason=new At(t,i,s),e(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=e=>{t.abort(e)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new de((function(e){t=e})),cancel:t}}}const fe=de;const pe={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pe).forEach((t=>{let[e,n]=t;pe[n]=e}));const me=pe;const ge=function t(e){const n=new he(e),i=s(he.prototype.request,n);return B.extend(i,he.prototype,n,{allOwnKeys:!0}),B.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return t(Lt(e,n))},i}(pt);ge.Axios=he,ge.CanceledError=At,ge.CancelToken=fe,ge.isCancel=St,ge.VERSION=re,ge.toFormData=Q,ge.AxiosError=K,ge.Cancel=ge.CanceledError,ge.all=function(t){return Promise.all(t)},ge.spread=function(t){return function(e){return t.apply(null,e)}},ge.isAxiosError=function(t){return B.isObject(t)&&!0===t.isAxiosError},ge.mergeConfig=Lt,ge.AxiosHeaders=Tt,ge.formToJSON=t=>dt(B.isHTMLForm(t)?new FormData(t):t),ge.getAdapter=ne,ge.HttpStatusCode=me,ge.default=ge;const ye=ge},293:(t,e,n)=>{n.d(e,{E:()=>s});var i=n(43);const s=n(735).B?i.useLayoutEffect:i.useEffect},472:(t,e,n)=>{n.d(e,{gS:()=>$o,rJ:()=>fo,aU:()=>yo});var i,s=n(150),r=n(812),o=n(443),a=n(529),l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},u={};(function(){var t;function e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(t,e,n){n||(n=0);var i=Array(16);if("string"===typeof e)for(var s=0;16>s;++s)i[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)i[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var r=t.g[3],o=e+(r^n&(s^r))+i[0]+3614090360&4294967295;o=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=(n=(s=(r=(e=n+(o<<7&4294967295|o>>>25))+((o=r+(s^e&(n^s))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^r&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^s&(r^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^n&(s^r))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=r+(s^e&(n^s))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^r&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^s&(r^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^n&(s^r))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=r+(s^e&(n^s))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^r&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^s&(r^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^n&(s^r))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=r+(s^e&(n^s))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^r&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^s&(r^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^r&(n^s))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=r+(n^s&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=s+(e^n&(r^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(r^e&(s^r))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(s^r&(n^s))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=r+(n^s&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=s+(e^n&(r^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(r^e&(s^r))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(s^r&(n^s))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=r+(n^s&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=s+(e^n&(r^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(r^e&(s^r))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(s^r&(n^s))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=r+(n^s&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=s+(e^n&(r^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(r^e&(s^r))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^s^r)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=r+(e^n^s)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=s+(r^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^r^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^s^r)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=r+(e^n^s)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=s+(r^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^r^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^s^r)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=r+(e^n^s)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=s+(r^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^r^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^s^r)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=r+(e^n^s)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=s+(r^e^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^r^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(s^(n|~r))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=r+(n^(e|~s))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=s+(e^(r|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(r^(s|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(s^(n|~r))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=r+(n^(e|~s))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=s+(e^(r|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(r^(s|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(s^(n|~r))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=r+(n^(e|~s))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=s+(e^(r|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(r^(s|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((r=(e=n+((o=e+(s^(n|~r))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=r+(n^(e|~s))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((s=r+((o=s+(e^(r|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+r&4294967295}function s(t,e){this.h=e;for(var n=[],i=!0,s=t.length-1;0<=s;s--){var r=0|t[s];i&&r==e||(n[s]=r,i=!1)}this.g=n}!function(t,e){function n(){}n.prototype=e.prototype,t.D=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.C=function(t,n,i){for(var s=Array(arguments.length-2),r=2;r<arguments.length;r++)s[r-2]=arguments[r];return e.prototype[n].apply(t,s)}}(e,(function(){this.blockSize=-1})),e.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.u=function(t,e){void 0===e&&(e=t.length);for(var i=e-this.blockSize,s=this.B,r=this.h,o=0;o<e;){if(0==r)for(;o<=i;)n(this,t,o),o+=this.blockSize;if("string"===typeof t){for(;o<e;)if(s[r++]=t.charCodeAt(o++),r==this.blockSize){n(this,s),r=0;break}}else for(;o<e;)if(s[r++]=t[o++],r==this.blockSize){n(this,s),r=0;break}}this.h=r,this.o+=e},e.prototype.v=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.o;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.u(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var r={};function o(t){return-128<=t&&128>t?function(t,e){var n=r;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(t){return new s([0|t],0>t?-1:0)})):new s([0|t],0>t?-1:0)}function a(t){if(isNaN(t)||!isFinite(t))return l;if(0>t)return p(a(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=4294967296;return new s(e,0)}var l=o(0),c=o(1),h=o(16777216);function d(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function f(t){return-1==t.h}function p(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new s(n,~t.h).add(c)}function m(t,e){return t.add(p(e))}function g(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function y(t,e){this.g=t,this.h=e}function v(t,e){if(d(e))throw Error("division by zero");if(d(t))return new y(l,l);if(f(t))return e=v(p(t),e),new y(p(e.g),p(e.h));if(f(e))return e=v(t,p(e)),new y(p(e.g),e.h);if(30<t.g.length){if(f(t)||f(e))throw Error("slowDivide_ only works with positive integers.");for(var n=c,i=e;0>=i.l(t);)n=w(n),i=w(i);var s=b(n,1),r=b(i,1);for(i=b(i,2),n=b(n,2);!d(i);){var o=r.add(i);0>=o.l(t)&&(s=s.add(n),r=o),i=b(i,1),n=b(n,1)}return e=m(t,s.j(e)),new y(s,e)}for(s=l;0<=t.l(e);){for(n=Math.max(1,Math.floor(t.m()/e.m())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),o=(r=a(n)).j(e);f(o)||0<o.l(t);)o=(r=a(n-=i)).j(e);d(r)&&(r=c),s=s.add(r),t=m(t,o)}return new y(s,t)}function w(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.i(i)<<1|t.i(i-1)>>>31;return new s(n,t.h)}function b(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],o=0;o<i;o++)r[o]=0<e?t.i(o+n)>>>e|t.i(o+n+1)<<32-e:t.i(o+n);return new s(r,t.h)}(t=s.prototype).m=function(){if(f(this))return-p(this).m();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.i(n);t+=(0<=i?i:4294967296+i)*e,e*=4294967296}return t},t.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(d(this))return"0";if(f(this))return"-"+p(this).toString(t);for(var e=a(Math.pow(t,6)),n=this,i="";;){var s=v(n,e).g,r=((0<(n=m(n,s.j(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(d(n=s))return r+i;for(;6>r.length;)r="0"+r;i=r+i}},t.i=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},t.l=function(t){return f(t=m(this,t))?-1:d(t)?0:1},t.abs=function(){return f(this)?p(this):this},t.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var o=i+(65535&this.i(r))+(65535&t.i(r)),a=(o>>>16)+(this.i(r)>>>16)+(t.i(r)>>>16);i=a>>>16,o&=65535,a&=65535,n[r]=a<<16|o}return new s(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(t){if(d(this)||d(t))return l;if(f(this))return f(t)?p(this).j(p(t)):p(p(this).j(t));if(f(t))return p(this.j(p(t)));if(0>this.l(h)&&0>t.l(h))return a(this.m()*t.m());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var o=this.i(i)>>>16,u=65535&this.i(i),c=t.i(r)>>>16,m=65535&t.i(r);n[2*i+2*r]+=u*m,g(n,2*i+2*r),n[2*i+2*r+1]+=o*m,g(n,2*i+2*r+1),n[2*i+2*r+1]+=u*c,g(n,2*i+2*r+1),n[2*i+2*r+2]+=o*c,g(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new s(n,0)},t.A=function(t){return v(this,t).h},t.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.i(i)&t.i(i);return new s(n,this.h&t.h)},t.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.i(i)|t.i(i);return new s(n,this.h|t.h)},t.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.i(i)^t.i(i);return new s(n,this.h^t.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,u.Md5=e,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=a,s.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return p(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=a(Math.pow(n,8)),s=l,r=0;r<e.length;r+=8){var o=Math.min(8,e.length-r),u=parseInt(e.substring(r,r+o),n);8>o?(o=a(Math.pow(n,o)),s=s.j(o).add(a(u))):s=(s=s.j(i)).add(a(u))}return s},i=u.Integer=s}).apply("undefined"!==typeof l?l:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var c,h,d,f,p,m,g,y,v="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},w={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};var n=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof v&&v];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(t,i){if(i)t:{var s=n;t=t.split(".");for(var r=0;r<t.length-1;r++){var o=t[r];if(!(o in s))break t;s=s[o]}(i=i(r=s[t=t[t.length-1]]))!=r&&null!=i&&e(s,t,{configurable:!0,writable:!0,value:i})}}("Array.prototype.values",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,i=!1,s={next:function(){if(!i&&n<t.length){var s=n++;return{value:e(s,t[s]),done:!1}}return i=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,(function(t,e){return e}))}}));var i=i||{},s=this||self;function r(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function o(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function a(t,e,n){return t.call.apply(t.bind,arguments)}function l(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function u(t,e,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function E(t,e){function n(){}n.prototype=e.prototype,t.aa=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Qb=function(t,n,i){for(var s=Array(arguments.length-2),r=2;r<arguments.length;r++)s[r-2]=arguments[r];return e.prototype[n].apply(t,s)}}function S(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function x(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(r(e)){const n=t.length||0,i=e.length||0;t.length=n+i;for(let s=0;s<i;s++)t[n+s]=e[s]}else t.push(e)}}function A(t){return/^[\s\xa0]*$/.test(t)}function C(){var t=s.navigator;return t&&(t=t.userAgent)?t:""}function P(t){return P[" "](t),t}P[" "]=function(){};var R=-1!=C().indexOf("Gecko")&&!(-1!=C().toLowerCase().indexOf("webkit")&&-1==C().indexOf("Edge"))&&!(-1!=C().indexOf("Trident")||-1!=C().indexOf("MSIE"))&&-1==C().indexOf("Edge");function D(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function _(t){const e={};for(const n in t)e[n]=t[n];return e}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(t,e){let n,i;for(let s=1;s<arguments.length;s++){for(n in i=arguments[s],i)t[n]=i[n];for(let e=0;e<k.length;e++)n=k[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function O(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function M(t){s.setTimeout((()=>{throw t}),0)}function N(){var t=j;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var L=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new V),(t=>t.reset()));class V{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let F,U=!1,j=new class{constructor(){this.h=this.g=null}add(t,e){const n=L.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},B=()=>{const t=s.Promise.resolve(void 0);F=()=>{t.then($)}};var $=()=>{for(var t;t=N();){try{t.h.call(t.g)}catch(n){M(n)}var e=L;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}U=!1};function q(){this.s=this.s,this.C=this.C}function z(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},z.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};s.addEventListener("test",t,e),s.removeEventListener("test",t,e)}catch(n){}return t}();function G(t,e){if(z.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(R){t:{try{P(e.nodeName);var s=!0;break t}catch(r){}s=!1}s||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:H[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&G.aa.h.call(this)}}E(G,z);var H={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var W="closure_listenable_"+(1e6*Math.random()|0),X=0;function Q(t,e,n,i,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=s,this.key=++X,this.da=this.fa=!1}function Y(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function J(t){this.src=t,this.g={},this.h=0}function Z(t,e){var n=e.type;if(n in t.g){var i,s=t.g[n],r=Array.prototype.indexOf.call(s,e,void 0);(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(Y(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function tt(t,e,n,i){for(var s=0;s<t.length;++s){var r=t[s];if(!r.da&&r.listener==e&&r.capture==!!n&&r.ha==i)return s}return-1}J.prototype.add=function(t,e,n,i,s){var r=t.toString();(t=this.g[r])||(t=this.g[r]=[],this.h++);var o=tt(t,e,i,s);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new Q(e,this.src,r,!!i,s)).fa=n,t.push(e)),e};var et="closure_lm_"+(1e6*Math.random()|0),nt={};function it(t,e,n,i,s){if(i&&i.once)return rt(t,e,n,i,s);if(Array.isArray(e)){for(var r=0;r<e.length;r++)it(t,e[r],n,i,s);return null}return n=dt(n),t&&t[W]?t.K(e,n,o(i)?!!i.capture:!!i,s):st(t,e,n,!1,i,s)}function st(t,e,n,i,s,r){if(!e)throw Error("Invalid event type");var a=o(s)?!!s.capture:!!s,l=ct(t);if(l||(t[et]=l=new J(t)),(n=l.add(e,n,i,a,r)).proxy)return n;if(i=function(){function t(n){return e.call(t.src,t.listener,n)}const e=ut;return t}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)K||(s=a),void 0===s&&(s=!1),t.addEventListener(e.toString(),i,s);else if(t.attachEvent)t.attachEvent(lt(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function rt(t,e,n,i,s){if(Array.isArray(e)){for(var r=0;r<e.length;r++)rt(t,e[r],n,i,s);return null}return n=dt(n),t&&t[W]?t.L(e,n,o(i)?!!i.capture:!!i,s):st(t,e,n,!0,i,s)}function ot(t,e,n,i,s){if(Array.isArray(e))for(var r=0;r<e.length;r++)ot(t,e[r],n,i,s);else i=o(i)?!!i.capture:!!i,n=dt(n),t&&t[W]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=tt(r=t.g[e],n,i,s))&&(Y(r[n]),Array.prototype.splice.call(r,n,1),0==r.length&&(delete t.g[e],t.h--)))):t&&(t=ct(t))&&(e=t.g[e.toString()],t=-1,e&&(t=tt(e,n,i,s)),(n=-1<t?e[t]:null)&&at(n))}function at(t){if("number"!==typeof t&&t&&!t.da){var e=t.src;if(e&&e[W])Z(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(lt(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=ct(e))?(Z(n,t),0==n.h&&(n.src=null,e[et]=null)):Y(t)}}}function lt(t){return t in nt?nt[t]:nt[t]="on"+t}function ut(t,e){if(t.da)t=!0;else{e=new G(e,this);var n=t.listener,i=t.ha||t.src;t.fa&&at(t),t=n.call(i,e)}return t}function ct(t){return(t=t[et])instanceof J?t:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function dt(t){return"function"===typeof t?t:(t[ht]||(t[ht]=function(e){return t.handleEvent(e)}),t[ht])}function ft(){q.call(this),this.i=new J(this),this.M=this,this.F=null}function pt(t,e){var n,i=t.F;if(i)for(n=[];i;i=i.F)n.push(i);if(t=t.M,i=e.type||e,"string"===typeof e)e=new z(e,t);else if(e instanceof z)e.target=e.target||t;else{var s=e;I(e=new z(i,t),s)}if(s=!0,n)for(var r=n.length-1;0<=r;r--){var o=e.g=n[r];s=mt(o,i,!0,e)&&s}if(s=mt(o=e.g=t,i,!0,e)&&s,s=mt(o,i,!1,e)&&s,n)for(r=0;r<n.length;r++)s=mt(o=e.g=n[r],i,!1,e)&&s}function mt(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&Z(t.i,o),s=!1!==a.call(l,i)&&s}}return s&&!i.defaultPrevented}function gt(t,e,n){if("function"===typeof t)n&&(t=u(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=u(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function yt(t){t.g=gt((()=>{t.g=null,t.i&&(t.i=!1,yt(t))}),t.l);const e=t.h;t.h=null,t.m.apply(null,e)}E(ft,q),ft.prototype[W]=!0,ft.prototype.removeEventListener=function(t,e,n,i){ot(this,t,e,n,i)},ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)Y(n[i]);delete e.g[t],e.h--}}this.F=null},ft.prototype.K=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},ft.prototype.L=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};class vt extends q{constructor(t,e){super(),this.m=t,this.l=e,this.h=null,this.i=!1,this.g=null}j(t){this.h=arguments,this.g?this.i=!0:yt(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wt(t){q.call(this),this.h=t,this.g={}}E(wt,q);var bt=[];function Tt(t){D(t.g,(function(t,e){this.g.hasOwnProperty(e)&&at(t)}),t),t.g={}}wt.prototype.N=function(){wt.aa.N.call(this),Tt(this)},wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Et=s.JSON.stringify,St=s.JSON.parse,xt=class{stringify(t){return s.JSON.stringify(t,void 0)}parse(t){return s.JSON.parse(t,void 0)}};function At(){}function Ct(t){return t.h||(t.h=t.i())}function Pt(){}At.prototype.h=null;var Rt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dt(){z.call(this,"d")}function _t(){z.call(this,"c")}E(Dt,z),E(_t,z);var kt={},It=null;function Ot(){return It=It||new ft}function Mt(t){z.call(this,kt.La,t)}function Nt(t){const e=Ot();pt(e,new Mt(e))}function Lt(t,e){z.call(this,kt.STAT_EVENT,t),this.stat=e}function Vt(t){const e=Ot();pt(e,new Lt(e,t))}function Ft(t,e){z.call(this,kt.Ma,t),this.size=e}function Ut(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return s.setTimeout((function(){t()}),e)}function jt(){this.g=!0}function Bt(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<s.length;o++)s[o]=""}}}return Et(n)}catch(a){return e}}(t,n)+(i?" "+i:"")}))}kt.La="serverreachability",E(Mt,z),kt.STAT_EVENT="statevent",E(Lt,z),kt.Ma="timingevent",E(Ft,z),jt.prototype.xa=function(){this.g=!1},jt.prototype.info=function(){};var $t,qt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Kt(){}function Gt(t,e,n,i){this.j=t,this.i=e,this.l=n,this.R=i||1,this.U=new wt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ht}function Ht(){this.i=null,this.g="",this.h=!1}E(Kt,At),Kt.prototype.g=function(){return new XMLHttpRequest},Kt.prototype.i=function(){return{}},$t=new Kt;var Wt={},Xt={};function Qt(t,e,n){t.L=1,t.v=Ee(ye(e)),t.m=n,t.P=!0,Yt(t,null)}function Yt(t,e){t.F=Date.now(),te(t),t.A=ye(t.v);var n=t.A,i=t.R;Array.isArray(i)||(i=[String(i)]),Le(n.i,"t",i),t.C=0,n=t.j.J,t.h=new Ht,t.g=xn(t.j,n?e:null,!t.m),0<t.O&&(t.M=new vt(u(t.Y,t,t.g),t.O)),e=t.U,n=t.g,i=t.ca;var s="readystatechange";Array.isArray(s)||(s&&(bt[0]=s.toString()),s=bt);for(var r=0;r<s.length;r++){var o=it(n,s[r],i||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}e=t.H?_(t.H):{},t.m?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Nt(),function(t,e,n,i,s,r){t.info((function(){if(t.g)if(r)for(var o="",a=r.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+"\n"+n+"\n"+o}))}(t.i,t.u,t.A,t.l,t.R,t.m)}function Jt(t){return!!t.g&&("GET"==t.u&&2!=t.L&&t.j.Ca)}function Zt(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?Xt:(n=Number(e.substring(n,i)),isNaN(n)?Wt:(i+=1)+n>e.length?Xt:(e=e.slice(i,i+n),t.C=i+n,e))}function te(t){t.S=Date.now()+t.I,ee(t,t.I)}function ee(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Ut(u(t.ba,t),e)}function ne(t){t.B&&(s.clearTimeout(t.B),t.B=null)}function ie(t){0==t.j.G||t.J||wn(t.j,t)}function se(t){ne(t);var e=t.M;e&&"function"==typeof e.ma&&e.ma(),t.M=null,Tt(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ma())}function re(t,e){try{var n=t.j;if(0!=n.G&&(n.g==t||ce(n.h,t)))if(!t.K&&ce(n.h,t)&&3==n.G){try{var i=n.Da.g.parse(e)}catch(c){i=null}if(Array.isArray(i)&&3==i.length){var s=i;if(0==s[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;vn(n),ln(n)}mn(n),Vt(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ut(u(n.Za,n),6e3));if(1>=ue(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else Tn(n,11)}else if((t.K||n.g==t)&&vn(n),!A(e))for(s=n.Da.g.parse(e),e=0;e<s.length;e++){let u=s[e];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const e=u[3];null!=e&&(n.la=e,n.j.info("VER="+n.la));const s=u[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(i=1.5*c,n.L=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var r=i.h;r.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(r.j=r.l,r.g=new Set,r.h&&(he(r,r.h),r.h=null))}if(i.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.ya=t,Te(i.I,i.D,t))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-t.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=t;if((i=n).qa=Sn(i,i.J?i.ia:null,i.W),o.K){de(i.h,o);var a=o,l=i.L;l&&(a.I=l),a.B&&(ne(a),te(a)),i.g=o}else pn(i);0<n.i.length&&cn(n)}else"stop"!=u[0]&&"close"!=u[0]||Tn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Tn(n,7):an(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}Nt()}catch(c){}}Gt.prototype.ca=function(t){t=t.target;const e=this.M;e&&3==nn(t)?e.j():this.Y(t)},Gt.prototype.Y=function(t){try{if(t==this.g)t:{const d=nn(this.g);var e=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||sn(this.g)))){this.J||4!=d||7==e||Nt(),ne(this);var n=this.g.Z();this.X=n;e:if(Jt(this)){var i=sn(this.g);t="";var r=i.length,o=4==nn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){se(this),ie(this);var a="";break e}this.h.i=new s.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:!(o&&e==r-1)});i.length=0,this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(t,e,n,i,s,r,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+"\n"+n+"\n"+r+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){e:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(l)){var c=l;break e}}c=null}if(!(n=c)){this.o=!1,this.s=3,Vt(12),se(this),ie(this);break t}Bt(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,re(this,n)}if(this.P){let t;for(n=!0;!this.J&&this.C<a.length;){if(t=Zt(this,a),t==Xt){4==d&&(this.s=4,Vt(14),n=!1),Bt(this.i,this.l,null,"[Incomplete Response]");break}if(t==Wt){this.s=4,Vt(15),Bt(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Bt(this.i,this.l,t,null),re(this,t)}if(Jt(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Vt(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),gn(h),h.M=!0,Vt(11))}}else Bt(this.i,this.l,a,"[Invalid Chunked Response]"),se(this),ie(this)}else Bt(this.i,this.l,a,null),re(this,a);4==d&&se(this),this.o&&!this.J&&(4==d?wn(this.j,this):(this.o=!1,te(this)))}else(function(t){const e={};t=(t.g&&2<=nn(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(A(t[i]))continue;var n=O(t[i]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const r=e[s]||[];e[s]=r,r.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),se(this),ie(this)}}}catch(d){}},Gt.prototype.cancel=function(){this.J=!0,se(this)},Gt.prototype.ba=function(){this.B=null;const t=Date.now();0<=t-this.S?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.i,this.A),2!=this.L&&(Nt(),Vt(17)),se(this),this.s=2,ie(this)):ee(this,this.S-t)};var oe=class{constructor(t,e){this.g=t,this.map=e}};function ae(t){this.l=t||10,s.PerformanceNavigationTiming?t=0<(t=s.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function le(t){return!!t.h||!!t.g&&t.g.size>=t.j}function ue(t){return t.h?1:t.g?t.g.size:0}function ce(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function he(t,e){t.g?t.g.add(e):t.h=e}function de(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function fe(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return S(t.i)}function pe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(r(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.na&&"function"==typeof t.na)return t.na();if(!t.V||"function"!=typeof t.V){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(r(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.V&&"function"==typeof t.V)return t.V();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(r(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),s=i.length,o=0;o<s;o++)e.call(void 0,i[o],n&&n[o],t)}ae.prototype.cancel=function(){if(this.i=fe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var me=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ge(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof ge){this.h=t.h,ve(this,t.j),this.o=t.o,this.g=t.g,we(this,t.s),this.l=t.l;var e=t.i,n=new Ie;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),be(this,n),this.m=t.m}else t&&(e=String(t).match(me))?(this.h=!1,ve(this,e[1]||"",!0),this.o=Se(e[2]||""),this.g=Se(e[3]||"",!0),we(this,e[4]),this.l=Se(e[5]||"",!0),be(this,e[6]||"",!0),this.m=Se(e[7]||"")):(this.h=!1,this.i=new Ie(null,this.h))}function ye(t){return new ge(t)}function ve(t,e,n){t.j=n?Se(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function we(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.s=e}else t.s=null}function be(t,e,n){e instanceof Ie?(t.i=e,function(t,e){e&&!t.j&&(Oe(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Me(this,e),Le(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=xe(e,_e)),t.i=new Ie(e,t.h))}function Te(t,e,n){t.i.set(e,n)}function Ee(t){return Te(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Se(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xe(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Ae),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ae(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ge.prototype.toString=function(){var t=[],e=this.j;e&&t.push(xe(e,Pe,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(xe(e,Pe,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(xe(n,"/"==n.charAt(0)?De:Re,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",xe(n,ke)),t.join("")};var Ce,Pe=/[#\/\?@]/g,Re=/[#\?:]/g,De=/[#\?]/g,_e=/[#\?@]/g,ke=/#/g;function Ie(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Oe(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),s=null;if(0<=i){var r=t[n].substring(0,i);s=t[n].substring(i+1)}else r=t[n];e(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Me(t,e){Oe(t),e=Ve(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Ne(t,e){return Oe(t),e=Ve(t,e),t.g.has(e)}function Le(t,e,n){Me(t,e),0<n.length&&(t.i=null,t.g.set(Ve(t,e),S(n)),t.h+=n.length)}function Ve(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Fe(t,e,n,i,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),i(n)}catch(r){}}function Ue(){this.g=new xt}function je(t,e,n){const i=n||"";try{pe(t,(function(t,n){let s=t;o(t)&&(s=Et(t)),e.push(i+n+"="+encodeURIComponent(s))}))}catch(s){throw e.push(i+"type="+encodeURIComponent("_badmap")),s}}function Be(t){this.l=t.Ub||null,this.j=t.eb||!1}function $e(t,e){ft.call(this),this.D=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function qe(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}function ze(t){t.readyState=4,t.l=null,t.j=null,t.v=null,Ke(t)}function Ke(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Ge(t){let e="";return D(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function He(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Ge(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Te(t,e,n))}function We(t){ft.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=Ie.prototype).add=function(t,e){Oe(this),this.i=null,t=Ve(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},t.forEach=function(t,e){Oe(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},t.na=function(){Oe(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const s=t[i];for(let t=0;t<s.length;t++)n.push(e[i])}return n},t.V=function(t){Oe(this);let e=[];if("string"===typeof t)Ne(this,t)&&(e=e.concat(this.g.get(Ve(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},t.set=function(t,e){return Oe(this),this.i=null,Ne(this,t=Ve(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const r=encodeURIComponent(String(i)),o=this.V(i);for(i=0;i<o.length;i++){var s=r;""!==o[i]&&(s+="="+encodeURIComponent(String(o[i]))),t.push(s)}}return this.i=t.join("&")},E(Be,At),Be.prototype.g=function(){return new $e(this.l,this.j)},Be.prototype.i=(Ce={},function(){return Ce}),E($e,ft),(t=$e.prototype).open=function(t,e){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=e,this.readyState=1,Ke(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||s).fetch(new Request(this.A,e)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ze(this)),this.readyState=0},t.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ke(this)),this.g&&(this.readyState=3,Ke(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qe(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.v.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ze(this):Ke(this),3==this.readyState&&qe(this)}},t.Ra=function(t){this.g&&(this.response=this.responseText=t,ze(this))},t.Qa=function(t){this.g&&(this.response=t,ze(this))},t.ga=function(){this.g&&ze(this)},t.setRequestHeader=function(t,e){this.u.append(t,e)},t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty($e.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}}),E(We,ft);var Xe=/^https?$/i,Qe=["POST","PUT"];function Ye(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.m=5,Je(t),tn(t)}function Je(t){t.A||(t.A=!0,pt(t,"complete"),pt(t,"error"))}function Ze(t){if(t.h&&"undefined"!=typeof i&&(!t.v[1]||4!=nn(t)||2!=t.Z()))if(t.u&&4==nn(t))gt(t.Ea,0,t);else if(pt(t,"readystatechange"),4==nn(t)){t.h=!1;try{const i=t.Z();t:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===i){var o=String(t.D).match(me)[1]||null;!o&&s.self&&s.self.location&&(o=s.self.location.protocol.slice(0,-1)),r=!Xe.test(o?o.toLowerCase():"")}n=r}if(n)pt(t,"complete"),pt(t,"success");else{t.m=6;try{var a=2<nn(t)?t.g.statusText:""}catch(l){a=""}t.l=a+" ["+t.Z()+"]",Je(t)}}finally{tn(t)}}}function tn(t,e){if(t.g){en(t);const i=t.g,s=t.v[0]?()=>{}:null;t.g=null,t.v=null,e||pt(t,"ready");try{i.onreadystatechange=s}catch(n){}}}function en(t){t.I&&(s.clearTimeout(t.I),t.I=null)}function nn(t){return t.g?t.g.readyState:0}function sn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(T){return null}}function rn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function on(t){this.Aa=0,this.i=[],this.j=new jt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,t),this.cb=rn("retryDelaySeedMs",1e4,t),this.Wa=rn("forwardChannelMaxRetries",2,t),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new ae(t&&t.concurrentRequestLimit),this.Da=new Ue,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function an(t){if(un(t),3==t.G){var e=t.U++,n=ye(t.I);if(Te(n,"SID",t.K),Te(n,"RID",e),Te(n,"TYPE","terminate"),dn(t,n),(e=new Gt(t,t.j,e)).L=2,e.v=Ee(ye(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(e.v.toString(),"")}catch(i){}!n&&s.Image&&((new Image).src=e.v,n=!0),n||(e.g=xn(e.j,null),e.g.ea(e.v)),e.F=Date.now(),te(e)}En(t)}function ln(t){t.g&&(gn(t),t.g.cancel(),t.g=null)}function un(t){ln(t),t.u&&(s.clearTimeout(t.u),t.u=null),vn(t),t.h.cancel(),t.s&&("number"===typeof t.s&&s.clearTimeout(t.s),t.s=null)}function cn(t){if(!le(t.h)&&!t.s){t.s=!0;var e=t.Ga;F||B(),U||(F(),U=!0),j.add(e,t),t.B=0}}function hn(t,e){var n;n=e?e.l:t.U++;const i=ye(t.I);Te(i,"SID",t.K),Te(i,"RID",n),Te(i,"AID",t.T),dn(t,i),t.m&&t.o&&He(i,t.m,t.o),n=new Gt(t,t.j,n,t.B+1),null===t.m&&(n.H=t.o),e&&(t.i=e.D.concat(t.i)),e=fn(t,n,1e3),n.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),he(t.h,n),Qt(n,i,e)}function dn(t,e){t.H&&D(t.H,(function(t,n){Te(e,n,t)})),t.l&&pe({},(function(t,n){Te(e,n,t)}))}function fn(t,e,n){n=Math.min(t.i.length,n);var i=t.l?u(t.l.Na,t.l,t):null;t:{var s=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=s[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let o=!0;for(let a=0;a<n;a++){let n=s[a].g;const l=s[a].map;if(n-=e,0>n)e=Math.max(0,s[a].g-100),o=!1;else try{je(l,t,"req"+n+"_")}catch(r){i&&i(l)}}if(o){i=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,i}function pn(t){if(!t.g&&!t.u){t.Y=1;var e=t.Fa;F||B(),U||(F(),U=!0),j.add(e,t),t.v=0}}function mn(t){return!(t.g||t.u||3<=t.v)&&(t.Y++,t.u=Ut(u(t.Fa,t),bn(t,t.v)),t.v++,!0)}function gn(t){null!=t.A&&(s.clearTimeout(t.A),t.A=null)}function yn(t){t.g=new Gt(t,t.j,"rpc",t.Y),null===t.m&&(t.g.H=t.o),t.g.O=0;var e=ye(t.qa);Te(e,"RID","rpc"),Te(e,"SID",t.K),Te(e,"AID",t.T),Te(e,"CI",t.F?"0":"1"),!t.F&&t.ja&&Te(e,"TO",t.ja),Te(e,"TYPE","xmlhttp"),dn(t,e),t.m&&t.o&&He(e,t.m,t.o),t.L&&(t.g.I=t.L);var n=t.g;t=t.ia,n.L=1,n.v=Ee(ye(e)),n.m=null,n.P=!0,Yt(n,t)}function vn(t){null!=t.C&&(s.clearTimeout(t.C),t.C=null)}function wn(t,e){var n=null;if(t.g==e){vn(t),gn(t),t.g=null;var i=2}else{if(!ce(t.h,e))return;n=e.D,de(t.h,e),i=1}if(0!=t.G)if(e.o)if(1==i){n=e.m?e.m.length:0,e=Date.now()-e.F;var s=t.B;pt(i=Ot(),new Ft(i,n)),cn(t)}else pn(t);else if(3==(s=e.s)||0==s&&0<e.X||!(1==i&&function(t,e){return!(ue(t.h)>=t.h.j-(t.s?1:0))&&(t.s?(t.i=e.D.concat(t.i),!0):!(1==t.G||2==t.G||t.B>=(t.Va?0:t.Wa))&&(t.s=Ut(u(t.Ga,t,e),bn(t,t.B)),t.B++,!0))}(t,e)||2==i&&mn(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),s){case 1:Tn(t,5);break;case 4:Tn(t,10);break;case 3:Tn(t,6);break;default:Tn(t,2)}}function bn(t,e){let n=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(n*=2),n*e}function Tn(t,e){if(t.j.info("Error code "+e),2==e){var n=u(t.fb,t),i=t.Xa;const e=!i;i=new ge(i||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ve(i,"https"),Ee(i),e?function(t,e){const n=new jt;if(s.Image){const i=new Image;i.onload=b(Fe,n,"TestLoadImage: loaded",!0,e,i),i.onerror=b(Fe,n,"TestLoadImage: error",!1,e,i),i.onabort=b(Fe,n,"TestLoadImage: abort",!1,e,i),i.ontimeout=b(Fe,n,"TestLoadImage: timeout",!1,e,i),s.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(i.toString(),n):function(t,e){new jt;const n=new AbortController,i=setTimeout((()=>{n.abort(),Fe(0,0,!1,e)}),1e4);fetch(t,{signal:n.signal}).then((t=>{clearTimeout(i),t.ok?Fe(0,0,!0,e):Fe(0,0,!1,e)})).catch((()=>{clearTimeout(i),Fe(0,0,!1,e)}))}(i.toString(),n)}else Vt(2);t.G=0,t.l&&t.l.sa(e),En(t),un(t)}function En(t){if(t.G=0,t.ka=[],t.l){const e=fe(t.h);0==e.length&&0==t.i.length||(x(t.ka,e),x(t.ka,t.i),t.h.i.length=0,S(t.i),t.i.length=0),t.l.ra()}}function Sn(t,e,n){var i=n instanceof ge?ye(n):new ge(n);if(""!=i.g)e&&(i.g=e+"."+i.g),we(i,i.s);else{var r=s.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new ge(null);i&&ve(o,i),e&&(o.g=e),r&&we(o,r),n&&(o.l=n),i=o}return n=t.D,e=t.ya,n&&e&&Te(i,n,e),Te(i,"VER",t.la),dn(t,i),i}function xn(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ca&&!t.pa?new We(new Be({eb:n})):new We(t.pa)).Ha(t.J),e}function An(){}function Cn(){}function Pn(t,e){ft.call(this),this.g=new on(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.va&&(t?t["X-WebChannel-Client-Profile"]=e.va:t={"X-WebChannel-Client-Profile":e.va}),this.g.S=t,(t=e&&e.Sb)&&!A(t)&&(this.g.m=t),this.v=e&&e.supportsCrossDomainXhr||!1,this.u=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!A(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new _n(this)}function Rn(t){Dt.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Dn(){_t.call(this),this.status=1}function _n(t){this.g=t}(t=We.prototype).Ha=function(t){this.J=t},t.ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$t.g(),this.v=this.o?Ct(this.o):Ct($t),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(e,String(t),!0),this.B=!1}catch(o){return void Ye(this,o)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=s.FormData&&t instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Qe,e,void 0))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(t),this.u=!1}catch(o){Ye(this,o)}},t.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,pt(this,"complete"),pt(this,"abort"),tn(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tn(this,!0)),We.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ze(this):this.bb())},t.bb=function(){Ze(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<nn(this)?this.g.status:-1}catch(Ce){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(Ce){return""}},t.Oa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),St(e)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(t=on.prototype).la=8,t.G=1,t.connect=function(t,e,n,i){Vt(0),this.W=t,this.H=e||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.I=Sn(this,null,this.W),cn(this)},t.Ga=function(t){if(this.s)if(this.s=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const s=new Gt(this,this.j,t);let r=this.o;if(this.S&&(r?(r=_(r),I(r,this.S)):r=this.S),null!==this.m||this.O||(s.H=r,r=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=fn(this,s,e),Te(n=ye(this.I),"RID",t),Te(n,"CVER",22),this.D&&Te(n,"X-HTTP-Session-Id",this.D),dn(this,n),r&&(this.O?e="headers="+encodeURIComponent(String(Ge(r)))+"&"+e:this.m&&He(n,this.m,r)),he(this.h,s),this.Ua&&Te(n,"TYPE","init"),this.P?(Te(n,"$req",e),Te(n,"SID","null"),s.T=!0,Qt(s,n,null)):Qt(s,n,e),this.G=2}}else 3==this.G&&(t?hn(this,t):0==this.i.length||le(this.h)||hn(this))},t.Fa=function(){if(this.u=null,yn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=Ut(u(this.ab,this),t)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vt(10),ln(this),yn(this))},t.Za=function(){null!=this.C&&(this.C=null,ln(this),mn(this),Vt(19))},t.fb=function(t){t?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=An.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},Cn.prototype.g=function(t,e){return new Pn(t,e)},E(Pn,ft),Pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pn.prototype.close=function(){an(this.g)},Pn.prototype.o=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.u&&((n={}).__data__=Et(t),t=n);e.i.push(new oe(e.Ya++,t)),3==e.G&&cn(e)},Pn.prototype.N=function(){this.g.l=null,delete this.j,an(this.g),delete this.g,Pn.aa.N.call(this)},E(Rn,Dt),E(Dn,_t),E(_n,An),_n.prototype.ua=function(){pt(this.g,"a")},_n.prototype.ta=function(t){pt(this.g,new Rn(t))},_n.prototype.sa=function(t){pt(this.g,new Dn)},_n.prototype.ra=function(){pt(this.g,"b")},Cn.prototype.createWebChannel=Cn.prototype.g,Pn.prototype.send=Pn.prototype.o,Pn.prototype.open=Pn.prototype.m,Pn.prototype.close=Pn.prototype.close,y=w.createWebChannelTransport=function(){return new Cn},g=w.getStatEventTarget=function(){return Ot()},m=w.Event=kt,p=w.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qt.NO_ERROR=0,qt.TIMEOUT=8,qt.HTTP_ERROR=6,f=w.ErrorCode=qt,zt.COMPLETE="complete",d=w.EventType=zt,Pt.EventType=Rt,Rt.OPEN="a",Rt.CLOSE="b",Rt.ERROR="c",Rt.MESSAGE="d",ft.prototype.listen=ft.prototype.K,h=w.WebChannel=Pt,w.FetchXmlHttpFactory=Be,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,c=w.XhrIo=We}).apply("undefined"!==typeof v?v:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const b="@firebase/firestore",T="4.7.10";class E{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}E.UNAUTHENTICATED=new E(null),E.GOOGLE_CREDENTIALS=new E("google-credentials-uid"),E.FIRST_PARTY=new E("first-party-uid"),E.MOCK_USER=new E("mock-user");let S="11.5.0";const x=new o.Vy("@firebase/firestore");function A(){return x.logLevel}function C(t){if(x.logLevel<=o.$b.DEBUG){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const s=n.map(D);x.debug(`Firestore (${S}): ${t}`,...s)}}function P(t){if(x.logLevel<=o.$b.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const s=n.map(D);x.error(`Firestore (${S}): ${t}`,...s)}}function R(t){if(x.logLevel<=o.$b.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const s=n.map(D);x.warn(`Firestore (${S}): ${t}`,...s)}}function D(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function _(){const t=`FIRESTORE (${S}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw P(t),new Error(t)}function k(t,e){t||_()}function I(t,e){return t}const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends a.g{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class N{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class L{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class V{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(E.UNAUTHENTICATED)))}shutdown(){}}class F{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class U{constructor(t){this.t=t,this.currentUser=E.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){k(void 0===this.o);let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let s=new N;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new N,t.enqueueRetryable((()=>i(this.currentUser)))};const r=()=>{const e=s;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{C("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.o&&(this.auth.addAuthTokenListener(this.o),r())};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(C("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new N)}}),0),r()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(C("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(k("string"==typeof e.accessToken),new L(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return k(null===t||"string"==typeof t),new E(t)}}class j{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=E.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class B{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new j(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(E.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ${constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q{constructor(t,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,(0,s.xZ)(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){k(void 0===this.o);const n=t=>{null!=t.error&&C("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,C("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{C("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):C("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new $(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(k("string"==typeof t.token),this.R=t.token,new $(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function z(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}function K(){return new TextEncoder}class G{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=z(40);for(let i=0;i<n.length;++i)e.length<20&&n[i]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return e}}function H(t,e){return t<e?-1:t>e?1:0}function W(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),s=e.codePointAt(n);if(i!==s){if(i<128&&s<128)return H(i,s);{const r=K(),o=Q(r.encode(X(t,n)),r.encode(X(e,n)));return 0!==o?o:H(i,s)}}n+=i>65535?2:1}return H(t.length,e.length)}function X(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Q(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return H(t[n],e[n]);return H(t.length,e.length)}function Y(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}const J=-62135596800,Z=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(t){return tt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor((t-1e3*e)*Z);return new tt(e,n)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new M(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new M(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<J)throw new M(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new M(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Z}_compareTo(t){return this.seconds===t.seconds?H(this.nanoseconds,t.nanoseconds):H(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-J;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class et{static fromTimestamp(t){return new et(t)}static min(){return new et(new tt(0,0))}static max(){return new et(new tt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const nt="__name__";class it{constructor(t,e,n){void 0===e?e=0:e>t.length&&_(),void 0===n?n=t.length-e:n>t.length-e&&_(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===it.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof it?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=it.compareSegments(t.get(i),e.get(i));if(0!==n)return n}return H(t.length,e.length)}static compareSegments(t,e){const n=it.isNumericId(t),i=it.isNumericId(e);return n&&!i?-1:!n&&i?1:n&&i?it.extractNumericId(t).compare(it.extractNumericId(e)):W(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return i.fromString(t.substring(4,t.length-2))}}class st extends it{construct(t,e,n){return new st(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const t=[];for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const s of n){if(s.indexOf("//")>=0)throw new M(O.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((t=>t.length>0)))}return new st(t)}static emptyPath(){return new st([])}}const rt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends it{construct(t,e,n){return new ot(t,e,n)}static isValidIdentifier(t){return rt.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===nt}static keyField(){return new ot([nt])}static fromServerFormat(t){const e=[];let n="",i=0;const s=()=>{if(0===n.length)throw new M(O.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let r=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new M(O.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new M(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(r=!r,i++):"."!==e||r?(n+=e,i++):(s(),i++)}if(s(),r)throw new M(O.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ot(e)}static emptyPath(){return new ot([])}}class at{constructor(t){this.path=t}static fromPath(t){return new at(st.fromString(t))}static fromName(t){return new at(st.fromString(t).popFirst(5))}static empty(){return new at(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===st.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return st.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new at(new st(t.slice()))}}const lt=-1;class ut{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}}ut.UNKNOWN_ID=-1;function ct(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=et.fromTimestamp(1e9===i?new tt(n+1,0):new tt(n,i));return new dt(s,at.empty(),e)}function ht(t){return new dt(t.readTime,t.key,lt)}class dt{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new dt(et.min(),at.empty(),lt)}static max(){return new dt(et.max(),at.empty(),lt)}}function ft(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=at.comparator(t.documentKey,e.documentKey),0!==n?n:H(t.largestBatchId,e.largestBatchId))}const pt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function gt(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==pt)throw t;C("LocalStore","Unexpectedly lost primary lease")}class yt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&_(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new yt(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof yt?e:yt.resolve(e)}catch(t){return yt.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):yt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):yt.reject(e)}static resolve(t){return new yt(((e,n)=>{e(t)}))}static reject(t){return new yt(((e,n)=>{n(t)}))}static waitFor(t){return new yt(((e,n)=>{let i=0,s=0,r=!1;t.forEach((t=>{++i,t.next((()=>{++s,r&&s===i&&e()}),(t=>n(t)))})),r=!0,s===i&&e()}))}static or(t){let e=yt.resolve(!1);for(const n of t)e=e.next((t=>t?yt.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new yt(((n,i)=>{const s=t.length,r=new Array(s);let o=0;for(let a=0;a<s;a++){const l=a;e(t[l]).next((t=>{r[l]=t,++o,o===s&&n(r)}),(t=>i(t)))}}))}static doWhile(t,e){return new yt(((n,i)=>{const s=()=>{!0===t()?e().next((()=>{s()}),i):n()};s()}))}}function vt(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wt(t){return"IndexedDbTransactionError"===t.name}class bt{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.oe(t),this._e=t=>e.writeSequenceNumber(t))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}bt.ae=-1;const Tt=-1;function Et(t){return null==t}function St(t){return 0===t&&1/t==-1/0}function xt(t){return"number"==typeof t&&Number.isInteger(t)&&!St(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const At="\x01";function Ct(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Rt(e)),e=Pt(t.get(n),e);return Rt(e)}function Pt(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const e=t.charAt(s);switch(e){case"\0":n+="\x01\x10";break;case At:n+="\x01\x11";break;default:n+=e}}return n}function Rt(t){return t+At+"\x01"}const Dt="remoteDocuments",_t="owner",kt="mutationQueues",It="mutations";const Ot="documentMutations",Mt="remoteDocumentsV14",Nt="remoteDocumentGlobal",Lt="targets",Vt="targetDocuments",Ft="targetGlobal",Ut="collectionParents",jt="clientMetadata",Bt="bundles",$t="namedQueries",qt="indexConfiguration",zt="indexState",Kt="indexEntries",Gt="documentOverlays",Ht="globals",Wt=[kt,It,Ot,Dt,Lt,_t,Ft,Vt,jt,Nt,Ut,Bt,$t],Xt=[kt,It,Ot,Mt,Lt,_t,Ft,Vt,jt,Nt,Ut,Bt,$t,Gt],Qt=Xt,Yt=[...Qt,qt,zt,Kt];function Jt(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zt(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function te(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ee{constructor(t,e){this.comparator=t,this.root=e||ie.EMPTY}insert(t,e){return new ee(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ie.BLACK,null,null))}remove(t){return new ee(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ie.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ne(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ne(this.root,t,this.comparator,!1)}getReverseIterator(){return new ne(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ne(this.root,t,this.comparator,!0)}}class ne{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,e&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ie{constructor(t,e,n,i,s){this.key=t,this.value=e,this.color=null!=n?n:ie.RED,this.left=null!=i?i:ie.EMPTY,this.right=null!=s?s:ie.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,s){return new ie(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const s=n(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===s?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ie.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return ie.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ie.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ie.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _();if(this.right.isRed())throw _();const t=this.left.check();if(t!==this.right.check())throw _();return t+(this.isRed()?0:1)}}ie.EMPTY=null,ie.RED=!0,ie.BLACK=!1,ie.EMPTY=new class{constructor(){this.size=0}get key(){throw _()}get value(){throw _()}get color(){throw _()}get left(){throw _()}get right(){throw _()}copy(t,e,n,i,s){return this}insert(t,e,n){return new ie(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class se{constructor(t){this.comparator=t,this.data=new ee(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new re(this.data.getIterator())}getIteratorFrom(t){return new re(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof se))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new se(this.comparator);return e.data=t,e}}class re{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class oe{constructor(t){this.fields=t,t.sort(ot.comparator)}static empty(){return new oe([])}unionWith(t){let e=new se(ot.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new oe(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Y(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class ae extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class le{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new ae("Invalid base64 string: "+t):t}}(t);return new le(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new le(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return H(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}le.EMPTY_BYTE_STRING=new le("");const ue=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ce(t){if(k(!!t),"string"==typeof t){let e=0;const n=ue.exec(t);if(k(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:he(t.seconds),nanos:he(t.nanos)}}function he(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function de(t){return"string"==typeof t?le.fromBase64String(t):le.fromUint8Array(t)}const fe="server_timestamp",pe="__type__",me="__previous_value__",ge="__local_write_time__";function ye(t){var e,n;return(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{})[pe])||void 0===n?void 0:n.stringValue)===fe}function ve(t){const e=t.mapValue.fields[me];return ye(e)?ve(e):e}function we(t){const e=ce(t.mapValue.fields[ge].timestampValue);return new tt(e.seconds,e.nanos)}class be{constructor(t,e,n,i,s,r,o,a,l){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=r,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}const Te="(default)";class Ee{constructor(t,e){this.projectId=t,this.database=e||Te}static empty(){return new Ee("","")}get isDefaultDatabase(){return this.database===Te}isEqual(t){return t instanceof Ee&&t.projectId===this.projectId&&t.database===this.database}}const Se="__type__",xe="__max__",Ae={mapValue:{fields:{__type__:{stringValue:xe}}}},Ce="__vector__",Pe="value";function Re(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ye(t)?4:$e(t)?9007199254740991:je(t)?10:11:_()}function De(t,e){if(t===e)return!0;const n=Re(t);if(n!==Re(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return we(t).isEqual(we(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=ce(t.timestampValue),i=ce(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return de(t.bytesValue).isEqual(de(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return he(t.geoPointValue.latitude)===he(e.geoPointValue.latitude)&&he(t.geoPointValue.longitude)===he(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return he(t.integerValue)===he(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=he(t.doubleValue),i=he(e.doubleValue);return n===i?St(n)===St(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return Y(t.arrayValue.values||[],e.arrayValue.values||[],De);case 10:case 11:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Jt(n)!==Jt(i))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===i[s]||!De(n[s],i[s])))return!1;return!0}(t,e);default:return _()}}function _e(t,e){return void 0!==(t.values||[]).find((t=>De(t,e)))}function ke(t,e){if(t===e)return 0;const n=Re(t),i=Re(e);if(n!==i)return H(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return H(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=he(t.integerValue||t.doubleValue),i=he(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return Ie(t.timestampValue,e.timestampValue);case 4:return Ie(we(t),we(e));case 5:return W(t.stringValue,e.stringValue);case 6:return function(t,e){const n=de(t),i=de(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let s=0;s<n.length&&s<i.length;s++){const t=H(n[s],i[s]);if(0!==t)return t}return H(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=H(he(t.latitude),he(e.latitude));return 0!==n?n:H(he(t.longitude),he(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Oe(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n,i,s,r;const o=t.fields||{},a=e.fields||{},l=null===(n=o[Pe])||void 0===n?void 0:n.arrayValue,u=null===(i=a[Pe])||void 0===i?void 0:i.arrayValue,c=H((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(r=null==u?void 0:u.values)||void 0===r?void 0:r.length)||0);return 0!==c?c:Oe(l,u)}(t.mapValue,e.mapValue);case 11:return function(t,e){if(t===Ae.mapValue&&e===Ae.mapValue)return 0;if(t===Ae.mapValue)return 1;if(e===Ae.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),s=e.fields||{},r=Object.keys(s);i.sort(),r.sort();for(let o=0;o<i.length&&o<r.length;++o){const t=W(i[o],r[o]);if(0!==t)return t;const e=ke(n[i[o]],s[r[o]]);if(0!==e)return e}return H(i.length,r.length)}(t.mapValue,e.mapValue);default:throw _()}}function Ie(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return H(t,e);const n=ce(t),i=ce(e),s=H(n.seconds,i.seconds);return 0!==s?s:H(n.nanos,i.nanos)}function Oe(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const t=ke(n[s],i[s]);if(t)return t}return H(n.length,i.length)}function Me(t){return Ne(t)}function Ne(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=ce(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return de(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return at.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=Ne(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const s of e)i?i=!1:n+=",",n+=`${s}:${Ne(t.fields[s])}`;return n+"}"}(t.mapValue):_()}function Le(t){switch(Re(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ve(t);return e?16+Le(e):16;case 5:return 2*t.stringValue.length;case 6:return de(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(t){return(t.values||[]).reduce(((t,e)=>t+Le(e)),0)}(t.arrayValue);case 10:case 11:return function(t){let e=0;return Zt(t.fields,((t,n)=>{e+=t.length+Le(n)})),e}(t.mapValue);default:throw _()}}function Ve(t){return!!t&&"integerValue"in t}function Fe(t){return!!t&&"arrayValue"in t}function Ue(t){return!!t&&"mapValue"in t}function je(t){var e,n;return(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{})[Se])||void 0===n?void 0:n.stringValue)===Ce}function Be(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zt(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Be(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Be(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $e(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===xe}class qe{constructor(t){this.value=t}static empty(){return new qe({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Ue(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Be(e)}setAll(t){let e=ot.emptyPath(),n={},i=[];t.forEach(((t,s)=>{if(!e.isImmediateParentOf(s)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=s.popLast()}t?n[s.lastSegment()]=Be(t):i.push(s.lastSegment())}));const s=this.getFieldsMap(e);this.applyChanges(s,n,i)}delete(t){const e=this.field(t.popLast());Ue(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return De(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];Ue(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Zt(e,((e,n)=>t[e]=n));for(const i of n)delete t[i]}clone(){return new qe(Be(this.value))}}function ze(t){const e=[];return Zt(t.fields,((t,n)=>{const i=new ot([t]);if(Ue(n)){const t=ze(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new oe(e)}class Ke{constructor(t,e,n,i,s,r,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=s,this.data=r,this.documentState=o}static newInvalidDocument(t){return new Ke(t,0,et.min(),et.min(),et.min(),qe.empty(),0)}static newFoundDocument(t,e,n,i){return new Ke(t,1,e,et.min(),n,i,0)}static newNoDocument(t,e){return new Ke(t,2,e,et.min(),et.min(),qe.empty(),0)}static newUnknownDocument(t,e){return new Ke(t,3,e,et.min(),et.min(),qe.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(et.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=qe.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=qe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Ke&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ke(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ge{constructor(t,e){this.position=t,this.inclusive=e}}function He(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],o=t.position[s];if(i=r.field.isKeyField()?at.comparator(at.fromName(o.referenceValue),n.key):ke(o,n.data.field(r.field)),"desc"===r.dir&&(i*=-1),0!==i)break}return i}function We(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!De(t.position[n],e.position[n]))return!1;return!0}class Xe{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=t,this.dir=e}}function Qe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Ye{}class Je extends Ye{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new an(t,e,n):"array-contains"===e?new hn(t,n):"in"===e?new dn(t,n):"not-in"===e?new fn(t,n):"array-contains-any"===e?new pn(t,n):new Je(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new ln(t,n):new un(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(ke(e,this.value)):null!==e&&Re(this.value)===Re(e)&&this.matchesComparison(ke(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return _()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ze extends Ye{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new Ze(t,e)}matches(t){return tn(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function tn(t){return"and"===t.op}function en(t){return nn(t)&&tn(t)}function nn(t){for(const e of t.filters)if(e instanceof Ze)return!1;return!0}function sn(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+Me(t.value);if(en(t))return t.filters.map((t=>sn(t))).join(",");{const e=t.filters.map((t=>sn(t))).join(",");return`${t.op}(${e})`}}function rn(t,e){return t instanceof Je?function(t,e){return e instanceof Je&&t.op===e.op&&t.field.isEqual(e.field)&&De(t.value,e.value)}(t,e):t instanceof Ze?function(t,e){return e instanceof Ze&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&rn(n,e.filters[i])),!0)}(t,e):void _()}function on(t){return t instanceof Je?function(t){return`${t.field.canonicalString()} ${t.op} ${Me(t.value)}`}(t):t instanceof Ze?function(t){return t.op.toString()+" {"+t.getFilters().map(on).join(" ,")+"}"}(t):"Filter"}class an extends Je{constructor(t,e,n){super(t,e,n),this.key=at.fromName(n.referenceValue)}matches(t){const e=at.comparator(t.key,this.key);return this.matchesComparison(e)}}class ln extends Je{constructor(t,e){super(t,"in",e),this.keys=cn("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class un extends Je{constructor(t,e){super(t,"not-in",e),this.keys=cn("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function cn(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>at.fromName(t.referenceValue)))}class hn extends Je{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Fe(e)&&_e(e.arrayValue,this.value)}}class dn extends Je{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&_e(this.value.arrayValue,e)}}class fn extends Je{constructor(t,e){super(t,"not-in",e)}matches(t){if(_e(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!_e(this.value.arrayValue,e)}}class pn extends Je{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Fe(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>_e(this.value.arrayValue,t)))}}class mn{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=r,this.endAt=o,this.le=null}}function gn(t){return new mn(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function yn(t){const e=I(t);if(null===e.le){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>sn(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Et(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>Me(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>Me(t))).join(",")),e.le=t}return e.le}function vn(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Qe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rn(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!We(t.startAt,e.startAt)&&We(t.endAt,e.endAt)}class wn{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=r,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function bn(t,e,n,i,s,r,o,a){return new wn(t,e,n,i,s,r,o,a)}function Tn(t){return new wn(t)}function En(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Sn(t){return null!==t.collectionGroup}function xn(t){const e=I(t);if(null===e.he){e.he=[];const t=new Set;for(const s of e.explicitOrderBy)e.he.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new se(ot.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);i.forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.he.push(new Xe(i,n))})),t.has(ot.keyField().canonicalString())||e.he.push(new Xe(ot.keyField(),n))}return e.he}function An(t){const e=I(t);return e.Pe||(e.Pe=Cn(e,xn(t))),e.Pe}function Cn(t,e){if("F"===t.limitType)return gn(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new Xe(t.field,e)}));const n=t.endAt?new Ge(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ge(t.startAt.position,t.startAt.inclusive):null;return gn(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Pn(t,e,n){return new wn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rn(t,e){return vn(An(t),An(e))&&t.limitType===e.limitType}function Dn(t){return`${yn(An(t))}|lt:${t.limitType}`}function _n(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>on(t))).join(", ")}]`),Et(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>Me(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>Me(t))).join(",")),`Target(${e})`}(An(t))}; limitType=${t.limitType})`}function kn(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):at.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of xn(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=He(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,xn(t),e))&&!(t.endAt&&!function(t,e,n){const i=He(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,xn(t),e))}(t,e)}function In(t){return(e,n)=>{let i=!1;for(const s of xn(t)){const t=On(s,e,n);if(0!==t)return t;i=i||s.field.isKeyField()}return 0}}function On(t,e,n){const i=t.field.isKeyField()?at.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),s=n.data.field(t);return null!==i&&null!==s?ke(i,s):_()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return _()}}class Mn{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,s]of n)if(this.equalsFn(i,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Zt(this.inner,((e,n)=>{for(const[i,s]of n)t(i,s)}))}isEmpty(){return te(this.inner)}size(){return this.innerSize}}const Nn=new ee(at.comparator);function Ln(){return Nn}const Vn=new ee(at.comparator);function Fn(){let t=Vn;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const s of n)t=t.insert(s.key,s);return t}function Un(t){let e=Vn;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function jn(){return $n()}function Bn(){return $n()}function $n(){return new Mn((t=>t.toString()),((t,e)=>t.isEqual(e)))}const qn=new ee(at.comparator),zn=new se(at.comparator);function Kn(){let t=zn;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const s of n)t=t.add(s);return t}const Gn=new se(H);function Hn(){return Gn}function Wn(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:St(e)?"-0":e}}function Xn(t){return{integerValue:""+t}}function Qn(t,e){return xt(e)?Xn(e):Wn(t,e)}class Yn{constructor(){this._=void 0}}function Jn(t,e,n){return t instanceof ei?function(t,e){const n={fields:{[pe]:{stringValue:fe},[ge]:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&ye(e)&&(e=ve(e)),e&&(n.fields[me]=e),{mapValue:n}}(n,e):t instanceof ni?ii(t,e):t instanceof si?ri(t,e):function(t,e){const n=ti(t,e),i=ai(n)+ai(t.Ie);return Ve(n)&&Ve(t.Ie)?Xn(i):Wn(t.serializer,i)}(t,e)}function Zn(t,e,n){return t instanceof ni?ii(t,e):t instanceof si?ri(t,e):n}function ti(t,e){return t instanceof oi?function(t){return Ve(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class ei extends Yn{}class ni extends Yn{constructor(t){super(),this.elements=t}}function ii(t,e){const n=li(e);for(const i of t.elements)n.some((t=>De(t,i)))||n.push(i);return{arrayValue:{values:n}}}class si extends Yn{constructor(t){super(),this.elements=t}}function ri(t,e){let n=li(e);for(const i of t.elements)n=n.filter((t=>!De(t,i)));return{arrayValue:{values:n}}}class oi extends Yn{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function ai(t){return he(t.integerValue||t.doubleValue)}function li(t){return Fe(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class ui{constructor(t,e){this.version=t,this.transformResults=e}}class ci{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ci}static exists(t){return new ci(void 0,t)}static updateTime(t){return new ci(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function hi(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class di{}function fi(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Si(t.key,ci.none()):new vi(t.key,t.data,ci.none());{const n=t.data,i=qe.empty();let s=new se(ot.comparator);for(let t of e.fields)if(!s.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),s=s.add(t)}return new wi(t.key,i,new oe(s.toArray()),ci.none())}}function pi(t,e,n){t instanceof vi?function(t,e,n){const i=t.value.clone(),s=Ti(t.fieldTransforms,e,n.transformResults);i.setAll(s),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof wi?function(t,e,n){if(!hi(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=Ti(t.fieldTransforms,e,n.transformResults),s=e.data;s.setAll(bi(t)),s.setAll(i),e.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function mi(t,e,n,i){return t instanceof vi?function(t,e,n,i){if(!hi(t.precondition,e))return n;const s=t.value.clone(),r=Ei(t.fieldTransforms,i,e);return s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null}(t,e,n,i):t instanceof wi?function(t,e,n,i){if(!hi(t.precondition,e))return n;const s=Ei(t.fieldTransforms,i,e),r=e.data;return r.setAll(bi(t)),r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return hi(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function gi(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),s=ti(i.transform,t||null);null!=s&&(null===n&&(n=qe.empty()),n.set(i.field,s))}return n||null}function yi(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Y(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ni&&e instanceof ni||t instanceof si&&e instanceof si?Y(t.elements,e.elements,De):t instanceof oi&&e instanceof oi?De(t.Ie,e.Ie):t instanceof ei&&e instanceof ei}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vi extends di{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wi extends di{constructor(t,e,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function bi(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function Ti(t,e,n){const i=new Map;k(t.length===n.length);for(let s=0;s<n.length;s++){const r=t[s],o=r.transform,a=e.data.field(r.field);i.set(r.field,Zn(o,a,n[s]))}return i}function Ei(t,e,n){const i=new Map;for(const s of t){const t=s.transform,r=n.data.field(s.field);i.set(s.field,Jn(t,r,e))}return i}class Si extends di{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xi extends di{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ai{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&pi(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=mi(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=mi(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Bn();return this.mutations.forEach((i=>{const s=t.get(i.key),r=s.overlayedDocument;let o=this.applyToLocalView(r,s.mutatedFields);o=e.has(i.key)?null:o;const a=fi(r,o);null!==a&&n.set(i.key,a),r.isValidDocument()||r.convertToNoDocument(et.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Kn())}isEqual(t){return this.batchId===t.batchId&&Y(this.mutations,t.mutations,((t,e)=>yi(t,e)))&&Y(this.baseMutations,t.baseMutations,((t,e)=>yi(t,e)))}}class Ci{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){k(t.mutations.length===n.length);let i=qn;const s=t.mutations;for(let r=0;r<s.length;r++)i=i.insert(s[r].key,n[r].version);return new Ci(t,e,n,i)}}class Pi{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}var Ri,Di;function _i(t){switch(t){case O.OK:return _();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return _()}}function ki(t){if(void 0===t)return P("GRPC error has no .code"),O.UNKNOWN;switch(t){case Ri.OK:return O.OK;case Ri.CANCELLED:return O.CANCELLED;case Ri.UNKNOWN:return O.UNKNOWN;case Ri.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Ri.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Ri.INTERNAL:return O.INTERNAL;case Ri.UNAVAILABLE:return O.UNAVAILABLE;case Ri.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Ri.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Ri.NOT_FOUND:return O.NOT_FOUND;case Ri.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Ri.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Ri.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Ri.ABORTED:return O.ABORTED;case Ri.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Ri.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Ri.DATA_LOSS:return O.DATA_LOSS;default:return _()}}(Di=Ri||(Ri={}))[Di.OK=0]="OK",Di[Di.CANCELLED=1]="CANCELLED",Di[Di.UNKNOWN=2]="UNKNOWN",Di[Di.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Di[Di.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Di[Di.NOT_FOUND=5]="NOT_FOUND",Di[Di.ALREADY_EXISTS=6]="ALREADY_EXISTS",Di[Di.PERMISSION_DENIED=7]="PERMISSION_DENIED",Di[Di.UNAUTHENTICATED=16]="UNAUTHENTICATED",Di[Di.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Di[Di.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Di[Di.ABORTED=10]="ABORTED",Di[Di.OUT_OF_RANGE=11]="OUT_OF_RANGE",Di[Di.UNIMPLEMENTED=12]="UNIMPLEMENTED",Di[Di.INTERNAL=13]="INTERNAL",Di[Di.UNAVAILABLE=14]="UNAVAILABLE",Di[Di.DATA_LOSS=15]="DATA_LOSS";new i([4294967295,4294967295],0);Error;class Ii{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Oi(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mi(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ni(t,e){return Oi(t,e.toTimestamp())}function Li(t){return k(!!t),et.fromTimestamp(function(t){const e=ce(t);return new tt(e.seconds,e.nanos)}(t))}function Vi(t,e){return Fi(t,e).canonicalString()}function Fi(t,e){const n=function(t){return new st(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function Ui(t){const e=st.fromString(t);return k(Qi(e)),e}function ji(t,e){return Vi(t.databaseId,e.path)}function Bi(t){const e=Ui(t);return 4===e.length?st.emptyPath():qi(e)}function $i(t){return new st(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qi(t){return k(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function zi(t,e,n){return{name:ji(t,e),fields:n.value.mapValue.fields}}function Ki(t,e){let n;if(e instanceof vi)n={update:zi(t,e.key,e.value)};else if(e instanceof Si)n={delete:ji(t,e.key)};else if(e instanceof wi)n={update:zi(t,e.key,e.data),updateMask:Xi(e.fieldMask)};else{if(!(e instanceof xi))return _();n={verify:ji(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof ei)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ni)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof si)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof oi)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw _()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ni(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:_()}(t,e.precondition)),n}function Gi(t){let e=Bi(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){k(1===i);const t=n.from[0];t.allDescendants?s=t.collectionId:e=e.child(t.collectionId)}let r=[];n.where&&(r=function(t){const e=Hi(t);return e instanceof Ze&&en(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new Xe(Wi(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Et(e)?null:e}(n.limit));let l=null;n.startAt&&(l=function(t){const e=!!t.before,n=t.values||[];return new Ge(n,e)}(n.startAt));let u=null;return n.endAt&&(u=function(t){const e=!t.before,n=t.values||[];return new Ge(n,e)}(n.endAt)),bn(e,s,o,r,a,"F",l,u)}function Hi(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Wi(t.unaryFilter.field);return Je.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Wi(t.unaryFilter.field);return Je.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Wi(t.unaryFilter.field);return Je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Wi(t.unaryFilter.field);return Je.create(s,"!=",{nullValue:"NULL_VALUE"});default:return _()}}(t):void 0!==t.fieldFilter?function(t){return Je.create(Wi(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Ze.create(t.compositeFilter.filters.map((t=>Hi(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return _()}}(t.compositeFilter.op))}(t):_()}function Wi(t){return ot.fromServerFormat(t.fieldPath)}function Xi(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Qi(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Yi{constructor(t){this.Tt=t}}function Ji(t){const e=Gi({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Pn(e,e.limit,"L"):e}class Zi{constructor(){}At(t,e){this.Rt(t,e),e.Vt()}Rt(t,e){if("nullValue"in t)this.ft(e,5);else if("booleanValue"in t)this.ft(e,10),e.gt(t.booleanValue?1:0);else if("integerValue"in t)this.ft(e,15),e.gt(he(t.integerValue));else if("doubleValue"in t){const n=he(t.doubleValue);isNaN(n)?this.ft(e,13):(this.ft(e,15),St(n)?e.gt(0):e.gt(n))}else if("timestampValue"in t){let n=t.timestampValue;this.ft(e,20),"string"==typeof n&&(n=ce(n)),e.yt(`${n.seconds||""}`),e.gt(n.nanos||0)}else if("stringValue"in t)this.wt(t.stringValue,e),this.St(e);else if("bytesValue"in t)this.ft(e,30),e.bt(de(t.bytesValue)),this.St(e);else if("referenceValue"in t)this.Dt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.ft(e,45),e.gt(n.latitude||0),e.gt(n.longitude||0)}else"mapValue"in t?$e(t)?this.ft(e,Number.MAX_SAFE_INTEGER):je(t)?this.vt(t.mapValue,e):(this.Ct(t.mapValue,e),this.St(e)):"arrayValue"in t?(this.Ft(t.arrayValue,e),this.St(e)):_()}wt(t,e){this.ft(e,25),this.Mt(t,e)}Mt(t,e){e.yt(t)}Ct(t,e){const n=t.fields||{};this.ft(e,55);for(const i of Object.keys(n))this.wt(i,e),this.Rt(n[i],e)}vt(t,e){var n,i;const s=t.fields||{};this.ft(e,53);const r=Pe,o=(null===(i=null===(n=s[r].arrayValue)||void 0===n?void 0:n.values)||void 0===i?void 0:i.length)||0;this.ft(e,15),e.gt(he(o)),this.wt(r,e),this.Rt(s[r],e)}Ft(t,e){const n=t.values||[];this.ft(e,50);for(const i of n)this.Rt(i,e)}Dt(t,e){this.ft(e,37),at.fromName(t).path.forEach((t=>{this.ft(e,60),this.Mt(t,e)}))}ft(t,e){t.gt(e)}St(t){t.gt(2)}}Zi.xt=new Zi;class ts{constructor(){this.Tn=new es}addToCollectionParentIndex(t,e){return this.Tn.add(e),yt.resolve()}getCollectionParents(t,e){return yt.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return yt.resolve()}deleteFieldIndex(t,e){return yt.resolve()}deleteAllFieldIndexes(t){return yt.resolve()}createTargetIndexes(t,e){return yt.resolve()}getDocumentsMatchingTarget(t,e){return yt.resolve(null)}getIndexType(t,e){return yt.resolve(0)}getFieldIndexes(t,e){return yt.resolve([])}getNextCollectionGroupToUpdate(t){return yt.resolve(null)}getMinOffset(t,e){return yt.resolve(dt.min())}getMinOffsetFromCollectionGroup(t,e){return yt.resolve(dt.min())}updateCollectionGroup(t,e,n){return yt.resolve()}updateIndexEntries(t,e){return yt.resolve()}}class es{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new se(st.comparator),s=!i.has(n);return this.index[e]=i.add(n),s}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new se(st.comparator)).toArray()}}new Uint8Array(0);const ns={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},is=41943040;class ss{static withCacheSize(t){return new ss(t,ss.DEFAULT_COLLECTION_PERCENTILE,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}}ss.DEFAULT_COLLECTION_PERCENTILE=10,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ss.DEFAULT=new ss(is,ss.DEFAULT_COLLECTION_PERCENTILE,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ss.DISABLED=new ss(-1,0,0);class rs{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new rs(0)}static Kn(){return new rs(-1)}}const os="LruGarbageCollector",as=1048576;function ls(t,e){let[n,i]=t,[s,r]=e;const o=H(n,s);return 0===o?H(i,r):o}class us{constructor(t){this.Hn=t,this.buffer=new se(ls),this.Jn=0}Yn(){return++this.Jn}Zn(t){const e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();ls(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class cs{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(t){C(os,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){wt(t)?C(os,"Ignoring IndexedDB error during garbage collection: ",t):await gt(t)}await this.er(3e5)}))}}class hs{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next((t=>Math.floor(e/100*t)))}nthSequenceNumber(t,e){if(0===e)return yt.resolve(bt.ae);const n=new us(e);return this.tr.forEachTarget(t,(t=>n.Zn(t.sequenceNumber))).next((()=>this.tr.rr(t,(t=>n.Zn(t))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.tr.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(C("LruGarbageCollector","Garbage collection skipped; disabled"),yt.resolve(ns)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(C("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ns):this.ir(t,e)))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let n,i,s,r,a,l,u;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((e=>(e>this.params.maximumSequenceNumbersToCollect?(C("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),i=this.params.maximumSequenceNumbersToCollect):i=e,r=Date.now(),this.nthSequenceNumber(t,i)))).next((i=>(n=i,a=Date.now(),this.removeTargets(t,n,e)))).next((e=>(s=e,l=Date.now(),this.removeOrphanedDocuments(t,n)))).next((t=>(u=Date.now(),A()<=o.$b.DEBUG&&C("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${r-c}ms\n\tDetermined least recently used ${i} in `+(a-r)+"ms\n"+`\tRemoved ${s} targets in `+(l-a)+"ms\n"+`\tRemoved ${t} documents in `+(u-l)+"ms\n"+`Total Duration: ${u-c}ms`),yt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:t}))))}}function ds(t,e){return new hs(t,e)}class fs{constructor(){this.changes=new Mn((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ke.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?yt.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class ps{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class ms{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&mi(n.mutation,t,oe.empty(),tt.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,Kn()).next((()=>e))))}getLocalViewOfDocuments(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kn();const i=jn();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=Fn();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=jn();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Kn())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let s=Ln();const r=$n(),o=$n();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof wi)?s=s.insert(e.key,e):void 0!==o?(r.set(e.key,o.mutation.getFieldMask()),mi(o.mutation,e,o.mutation.getFieldMask(),tt.now())):r.set(e.key,oe.empty())})),this.recalculateAndSaveOverlays(t,s).next((t=>(t.forEach(((t,e)=>r.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new ps(e,null!==(n=r.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=$n();let i=new ee(((t,e)=>t-e)),s=Kn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const s of t)s.keys().forEach((t=>{const r=e.get(t);if(null===r)return;let o=n.get(t)||oe.empty();o=s.applyToLocalView(r,o),n.set(t,o);const a=(i.get(s.batchId)||Kn()).add(t);i=i.insert(s.batchId,a)}))})).next((()=>{const r=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,l=i.value,u=Bn();l.forEach((t=>{if(!s.has(t)){const i=fi(e.get(t),n.get(t));null!==i&&u.set(t,i),s=s.add(t)}})),r.push(this.documentOverlayCache.saveOverlays(t,a,u))}return yt.waitFor(r)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return at.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Sn(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((s=>{const r=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-s.size):yt.resolve(jn());let o=lt,a=s;return r.next((e=>yt.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),s.get(e)?yt.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,s))).next((()=>this.computeViews(t,a,e,Kn()))).next((t=>({batchId:o,changes:Un(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new at(e)).next((t=>{let e=Fn();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const s=e.collectionGroup;let r=Fn();return this.indexManager.getCollectionParents(t,s).next((o=>yt.forEach(o,(o=>{const a=function(t,e){return new wn(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(s));return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next((t=>{t.forEach(((t,e)=>{r=r.insert(t,e)}))}))})).next((()=>r))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((r=>(s=r,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,s,i)))).next((t=>{s.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,Ke.newInvalidDocument(i)))}));let n=Fn();return t.forEach(((t,i)=>{const r=s.get(t);void 0!==r&&mi(r.mutation,i,oe.empty(),tt.now()),kn(e,i)&&(n=n.insert(t,i))})),n}))}}class gs{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return yt.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:Li(t.createTime)}}(e)),yt.resolve()}getNamedQuery(t,e){return yt.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,function(t){return{name:t.name,query:Ji(t.bundledQuery),readTime:Li(t.readTime)}}(e)),yt.resolve()}}class ys{constructor(){this.overlays=new ee(at.comparator),this.Rr=new Map}getOverlay(t,e){return yt.resolve(this.overlays.get(e))}getOverlays(t,e){const n=jn();return yt.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.Et(t,e,i)})),yt.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.Rr.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.Rr.delete(n)),yt.resolve()}getOverlaysForCollection(t,e,n){const i=jn(),s=e.length+1,r=new at(e.child("")),o=this.overlays.getIteratorFrom(r);for(;o.hasNext();){const t=o.getNext().value,r=t.getKey();if(!e.isPrefixOf(r.path))break;r.path.length===s&&t.largestBatchId>n&&i.set(t.getKey(),t)}return yt.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let s=new ee(((t,e)=>t-e));const r=this.overlays.getIterator();for(;r.hasNext();){const t=r.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=s.get(t.largestBatchId);null===e&&(e=jn(),s=s.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=jn(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=i)););return yt.resolve(o)}Et(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.Rr.get(i.largestBatchId).delete(n.key);this.Rr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Pi(e,n));let s=this.Rr.get(e);void 0===s&&(s=Kn(),this.Rr.set(e,s)),this.Rr.set(e,s.add(n.key))}}class vs{constructor(){this.sessionToken=le.EMPTY_BYTE_STRING}getSessionToken(t){return yt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,yt.resolve()}}class ws{constructor(){this.Vr=new se(bs.mr),this.gr=new se(bs.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){const n=new bs(t,e);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.wr(new bs(t,e))}Sr(t,e){t.forEach((t=>this.removeReference(t,e)))}br(t){const e=new at(new st([])),n=new bs(e,t),i=new bs(e,t+1),s=[];return this.gr.forEachInRange([n,i],(t=>{this.wr(t),s.push(t.key)})),s}Dr(){this.Vr.forEach((t=>this.wr(t)))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const e=new at(new st([])),n=new bs(e,t),i=new bs(e,t+1);let s=Kn();return this.gr.forEachInRange([n,i],(t=>{s=s.add(t.key)})),s}containsKey(t){const e=new bs(t,0),n=this.Vr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class bs{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return at.comparator(t.key,e.key)||H(t.Cr,e.Cr)}static pr(t,e){return H(t.Cr,e.Cr)||at.comparator(t.key,e.key)}}class Ts{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new se(bs.mr)}checkEmpty(t){return yt.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const r=new Ai(s,e,n,i);this.mutationQueue.push(r);for(const o of i)this.Mr=this.Mr.add(new bs(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return yt.resolve(r)}lookupMutationBatch(t,e){return yt.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.Nr(n),s=i<0?0:i;return yt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return yt.resolve(0===this.mutationQueue.length?Tt:this.Fr-1)}getAllMutationBatches(t){return yt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new bs(e,0),i=new bs(e,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([n,i],(t=>{const e=this.Or(t.Cr);s.push(e)})),yt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new se(H);return e.forEach((t=>{const e=new bs(t,0),i=new bs(t,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([e,i],(t=>{n=n.add(t.Cr)}))})),yt.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let s=n;at.isDocumentKey(s)||(s=s.child(""));const r=new bs(new at(s),0);let o=new se(H);return this.Mr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.Cr)),!0)}),r),yt.resolve(this.Br(o))}Br(t){const e=[];return t.forEach((t=>{const n=this.Or(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){k(0===this.Lr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return yt.forEach(e.mutations,(i=>{const s=new bs(i.key,e.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Mr=n}))}qn(t){}containsKey(t,e){const n=new bs(e,0),i=this.Mr.firstAfterOrEqual(n);return yt.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,yt.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Or(t){const e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Es{constructor(t){this.kr=t,this.docs=new ee(at.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),s=i?i.size:0,r=this.kr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:r}),this.size+=r-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return yt.resolve(n?n.document.mutableCopy():Ke.newInvalidDocument(e))}getEntries(t,e){let n=Ln();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Ke.newInvalidDocument(t))})),yt.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let s=Ln();const r=e.path,o=new at(r.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!r.isPrefixOf(t.path))break;t.path.length>r.length+1||ft(ht(o),n)<=0||(i.has(o.key)||kn(e,o))&&(s=s.insert(o.key,o.mutableCopy()))}return yt.resolve(s)}getAllFromCollectionGroup(t,e,n,i){_()}qr(t,e){return yt.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new Ss(this)}getSize(t){return yt.resolve(this.size)}}class Ss extends fs{constructor(t){super(),this.Ir=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.Ir.addEntry(t,i)):this.Ir.removeEntry(n)})),yt.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}}class xs{constructor(t){this.persistence=t,this.Qr=new Mn((t=>yn(t)),vn),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.$r=0,this.Ur=new ws,this.targetCount=0,this.Kr=rs.Un()}forEachTarget(t,e){return this.Qr.forEach(((t,n)=>e(n))),yt.resolve()}getLastRemoteSnapshotVersion(t){return yt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return yt.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),yt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.$r&&(this.$r=e),yt.resolve()}zn(t){this.Qr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Kr=new rs(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,yt.resolve()}updateTargetData(t,e){return this.zn(e),yt.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Ur.br(e.targetId),this.targetCount-=1,yt.resolve()}removeTargets(t,e,n){let i=0;const s=[];return this.Qr.forEach(((r,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Qr.delete(r),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),yt.waitFor(s).next((()=>i))}getTargetCount(t){return yt.resolve(this.targetCount)}getTargetData(t,e){const n=this.Qr.get(e)||null;return yt.resolve(n)}addMatchingKeys(t,e,n){return this.Ur.yr(e,n),yt.resolve()}removeMatchingKeys(t,e,n){this.Ur.Sr(e,n);const i=this.persistence.referenceDelegate,s=[];return i&&e.forEach((e=>{s.push(i.markPotentiallyOrphaned(t,e))})),yt.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Ur.br(e),yt.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Ur.vr(e);return yt.resolve(n)}containsKey(t,e){return yt.resolve(this.Ur.containsKey(e))}}class As{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new bt(0),this.zr=!1,this.zr=!0,this.jr=new vs,this.referenceDelegate=t(this),this.Hr=new xs(this),this.indexManager=new ts,this.remoteDocumentCache=function(t){return new Es(t)}((t=>this.referenceDelegate.Jr(t))),this.serializer=new Yi(e),this.Yr=new gs(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new ys,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Wr[t.toKey()];return n||(n=new Ts(e,this.referenceDelegate),this.Wr[t.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,n){C("MemoryPersistence","Starting transaction:",t);const i=new Cs(this.Gr.next());return this.referenceDelegate.Zr(),n(i).next((t=>this.referenceDelegate.Xr(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}ei(t,e){return yt.or(Object.values(this.Wr).map((n=>()=>n.containsKey(t,e))))}}class Cs extends mt{constructor(t){super(),this.currentSequenceNumber=t}}class Ps{constructor(t){this.persistence=t,this.ti=new ws,this.ni=null}static ri(t){return new Ps(t)}get ii(){if(this.ni)return this.ni;throw _()}addReference(t,e,n){return this.ti.addReference(n,e),this.ii.delete(n.toString()),yt.resolve()}removeReference(t,e,n){return this.ti.removeReference(n,e),this.ii.add(n.toString()),yt.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),yt.resolve()}removeTarget(t,e){this.ti.br(e.targetId).forEach((t=>this.ii.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.ii.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Zr(){this.ni=new Set}Xr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return yt.forEach(this.ii,(n=>{const i=at.fromPath(n);return this.si(t,i).next((t=>{t||e.removeEntry(i,et.min())}))})).next((()=>(this.ni=null,e.apply(t))))}updateLimboDocument(t,e){return this.si(t,e).next((t=>{t?this.ii.delete(e.toString()):this.ii.add(e.toString())}))}Jr(t){return 0}si(t,e){return yt.or([()=>yt.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}}class Rs{constructor(t,e){this.persistence=t,this.oi=new Mn((t=>Ct(t.path)),((t,e)=>t.isEqual(e))),this.garbageCollector=ds(this,e)}static ri(t,e){return new Rs(t,e)}Zr(){}Xr(t){return yt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){const e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}sr(t){let e=0;return this.rr(t,(t=>{e++})).next((()=>e))}rr(t,e){return yt.forEach(this.oi,((n,i)=>this.ar(t,n,i).next((t=>t?yt.resolve():e(i)))))}removeTargets(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)}removeOrphanedDocuments(t,e){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.qr(t,(i=>this.ar(t,i,e).next((t=>{t||(n++,s.removeEntry(i,et.min()))})))).next((()=>s.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),yt.resolve()}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,e,n){return this.oi.set(n,t.currentSequenceNumber),yt.resolve()}removeReference(t,e,n){return this.oi.set(n,t.currentSequenceNumber),yt.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),yt.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Le(t.data.value)),e}ar(t,e,n){return yt.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const t=this.oi.get(e);return yt.resolve(void 0!==t&&t>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class Ds{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Hi=n,this.Ji=i}static Yi(t,e){let n=Kn(),i=Kn();for(const s of e.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ds(t,e.fromCache,n,i)}}class _s{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class ks{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=(0,a.nr)()?8:vt((0,a.ZQ)())>0?6:4}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,n,i){const s={result:null};return this.rs(t,e).next((t=>{s.result=t})).next((()=>{if(!s.result)return this.ss(t,e,i,n).next((t=>{s.result=t}))})).next((()=>{if(s.result)return;const n=new _s;return this._s(t,e,n).next((i=>{if(s.result=i,this.Xi)return this.us(t,e,n,i.size)}))})).next((()=>s.result))}us(t,e,n,i){return n.documentReadCount<this.es?(A()<=o.$b.DEBUG&&C("QueryEngine","SDK will not create cache indexes for query:",_n(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),yt.resolve()):(A()<=o.$b.DEBUG&&C("QueryEngine","Query:",_n(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ts*i?(A()<=o.$b.DEBUG&&C("QueryEngine","The SDK decides to create cache indexes for query:",_n(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,An(e))):yt.resolve())}rs(t,e){if(En(e))return yt.resolve(null);let n=An(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=Pn(e,null,"F"),n=An(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const s=Kn(...i);return this.ns.getDocuments(t,s).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const r=this.cs(e,i);return this.ls(e,r,s,n.readTime)?this.rs(t,Pn(e,null,"F")):this.hs(t,r,e,n)}))))})))))}ss(t,e,n,i){return En(e)||i.isEqual(et.min())?yt.resolve(null):this.ns.getDocuments(t,n).next((s=>{const r=this.cs(e,s);return this.ls(e,r,n,i)?yt.resolve(null):(A()<=o.$b.DEBUG&&C("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_n(e)),this.hs(t,r,e,ct(i,lt)).next((t=>t)))}))}cs(t,e){let n=new se(In(t));return e.forEach(((e,i)=>{kn(t,i)&&(n=n.add(i))})),n}ls(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}_s(t,e,n){return A()<=o.$b.DEBUG&&C("QueryEngine","Using full collection scan to execute query:",_n(e)),this.ns.getDocumentsMatchingQuery(t,e,dt.min(),n)}hs(t,e,n,i){return this.ns.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}const Is="LocalStore";class Os{constructor(t,e,n,i){this.persistence=t,this.Ps=e,this.serializer=i,this.Ts=new ee(H),this.Is=new Mn((t=>yn(t)),vn),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(n)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ms(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ts)))}}function Ms(t,e,n,i){return new Os(t,e,n,i)}async function Ns(t,e){const n=I(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((s=>(i=s,n.As(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const s=[],r=[];let o=Kn();for(const t of i){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({Rs:t,removedBatchIds:s,addedBatchIds:r})))}))}))}function Ls(t){const e=I(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Hr.getLastRemoteSnapshotVersion(t)))}function Vs(t,e){const n=I(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=Tt),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}class Fs{constructor(){this.activeTargetIds=Hn()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Us{constructor(){this.ho=new Fs,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,n){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Fs,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class js{To(t){}shutdown(){}}const Bs="ConnectivityMonitor";class $s{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){C(Bs,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){C(Bs,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let qs=null;function zs(){return null===qs?qs=268435456+Math.round(2147483648*Math.random()):qs++,"0x"+qs.toString(16)}const Ks="RestConnection",Gs={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Hs{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${n}/databases/${i}`,this.wo=this.databaseId.database===Te?`project_id=${n}`:`project_id=${n}&database_id=${i}`}So(t,e,n,i,s){const r=zs(),o=this.bo(t,e.toUriEncodedString());C(Ks,`Sending RPC '${t}' ${r}:`,o,n);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,i,s),this.vo(t,o,a,n).then((e=>(C(Ks,`Received RPC '${t}' ${r}: `,e),e)),(e=>{throw R(Ks,`RPC '${t}' ${r} failed with error: `,e,"url: ",o,"request:",n),e}))}Co(t,e,n,i,s,r){return this.So(t,e,n,i,s)}Do(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+S,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}bo(t,e){const n=Gs[t];return`${this.po}/v1/${e}:${n}`}terminate(){}}class Ws{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}const Xs="WebChannelConnection";class Qs extends Hs{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,n,i){const s=zs();return new Promise(((r,o)=>{const a=new c;a.setWithCredentials(!0),a.listenOnce(d.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case f.NO_ERROR:const e=a.getResponseJson();C(Xs,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(e)),r(e);break;case f.TIMEOUT:C(Xs,`RPC '${t}' ${s} timed out`),o(new M(O.DEADLINE_EXCEEDED,"Request time out"));break;case f.HTTP_ERROR:const n=a.getStatus();if(C(Xs,`RPC '${t}' ${s} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(e)>=0?e:O.UNKNOWN}(e.status);o(new M(t,e.message))}else o(new M(O.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new M(O.UNAVAILABLE,"Connection failed."));break;default:_()}}finally{C(Xs,`RPC '${t}' ${s} completed.`)}}));const l=JSON.stringify(i);C(Xs,`RPC '${t}' ${s} sending request:`,i),a.send(e,"POST",l,n,15)}))}Wo(t,e,n){const i=zs(),s=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=y(),o=g(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const u=s.join("");C(Xs,`Creating RPC '${t}' stream ${i}: ${u}`,a);const c=r.createWebChannel(u,a);let d=!1,f=!1;const v=new Ws({Fo:e=>{f?C(Xs,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(d||(C(Xs,`Opening RPC '${t}' stream ${i} transport.`),c.open(),d=!0),C(Xs,`RPC '${t}' stream ${i} sending:`,e),c.send(e))},Mo:()=>c.close()}),w=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return w(c,h.EventType.OPEN,(()=>{f||(C(Xs,`RPC '${t}' stream ${i} transport opened.`),v.Qo())})),w(c,h.EventType.CLOSE,(()=>{f||(f=!0,C(Xs,`RPC '${t}' stream ${i} transport closed`),v.Uo())})),w(c,h.EventType.ERROR,(e=>{f||(f=!0,R(Xs,`RPC '${t}' stream ${i} transport errored:`,e),v.Uo(new M(O.UNAVAILABLE,"The operation could not be completed")))})),w(c,h.EventType.MESSAGE,(e=>{var n;if(!f){const s=e.data[0];k(!!s);const r=s,o=(null==r?void 0:r.error)||(null===(n=r[0])||void 0===n?void 0:n.error);if(o){C(Xs,`RPC '${t}' stream ${i} received error:`,o);const e=o.status;let n=function(t){const e=Ri[t];if(void 0!==e)return ki(e)}(e),s=o.message;void 0===n&&(n=O.INTERNAL,s="Unknown error status: "+e+" with message "+o.message),f=!0,v.Uo(new M(n,s)),c.close()}else C(Xs,`RPC '${t}' stream ${i} received:`,s),v.Ko(s)}})),w(o,m.STAT_EVENT,(e=>{e.stat===p.PROXY?C(Xs,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===p.NOPROXY&&C(Xs,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{v.$o()}),0),v}}function Ys(){return"undefined"!=typeof document?document:null}function Js(t){return new Ii(t,!0)}class Zs{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ti=t,this.timerId=e,this.Go=n,this.zo=i,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const e=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),i=Math.max(0,e-n);i>0&&C("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,(()=>(this.Yo=Date.now(),t()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}const tr="PersistentStream";class er{constructor(t,e,n,i,s,r,o,a){this.Ti=t,this.n_=n,this.r_=i,this.connection=s,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Zs(t,e)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==t?this.a_.reset():e&&e.code===O.RESOURCE_EXHAUSTED?(P(e.toString()),P("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===O.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((t=>{let[n,i]=t;this.i_===e&&this.V_(n,i)}),(e=>{t((()=>{const t=new M(O.UNKNOWN,"Fetching auth token failed: "+e.message);return this.m_(t)}))}))}V_(t,e){const n=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((t=>{n((()=>this.m_(t)))})),this.stream.onMessage((t=>{n((()=>1==++this.__?this.g_(t):this.onNext(t)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(t){return C(tr,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget((()=>this.i_===t?e():(C(tr,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nr extends er{constructor(t,e,n,i,s,r){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,r),this.serializer=s}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return k(!!t.streamToken),this.lastStreamToken=t.streamToken,k(!t.writeResults||0===t.writeResults.length),this.listener.D_()}onNext(t){k(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const e=function(t,e){return t&&t.length>0?(k(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Li(t.updateTime):Li(e);return n.isEqual(et.min())&&(n=Li(e)),new ui(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=Li(t.commitTime);return this.listener.v_(n,e)}C_(){const t={};t.database=$i(this.serializer),this.I_(t)}b_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>Ki(this.serializer,t)))};this.I_(e)}}class ir{}class sr extends ir{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new M(O.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,n,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[r,o]=s;return this.connection.So(t,Fi(e,n),i,r,o)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new M(O.UNKNOWN,t.toString())}))}Co(t,e,n,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[o,a]=r;return this.connection.Co(t,Fi(e,n),i,o,a,s)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new M(O.UNKNOWN,t.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class rr{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(t){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,"Online"===t&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(P(e),this.N_=!1):C("OnlineStateTracker",e)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}const or="RemoteStore";class ar{constructor(t,e,n,i,s){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To((t=>{n.enqueueAndForget((async()=>{cr(this)&&(C(or,"Restarting streams for network reachability change."),await async function(t){const e=I(t);e.W_.add(4),await ur(e),e.j_.set("Unknown"),e.W_.delete(4),await lr(e)}(this))}))})),this.j_=new rr(n,i)}}async function lr(t){if(cr(t))for(const e of t.G_)await e(!0)}async function ur(t){for(const e of t.G_)await e(!1)}function cr(t){return 0===I(t).W_.size}async function hr(t,e,n){if(!wt(e))throw e;t.W_.add(1),await ur(t),t.j_.set("Offline"),n||(n=()=>Ls(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{C(or,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await lr(t)}))}function dr(t,e){return e().catch((n=>hr(t,n,e)))}async function fr(t){const e=I(t),n=xr(e);let i=e.U_.length>0?e.U_[e.U_.length-1].batchId:Tt;for(;pr(e);)try{const t=await Vs(e.localStore,i);if(null===t){0===e.U_.length&&n.P_();break}i=t.batchId,mr(e,t)}catch(t){await hr(e,t)}gr(e)&&yr(e)}function pr(t){return cr(t)&&t.U_.length<10}function mr(t,e){t.U_.push(e);const n=xr(t);n.c_()&&n.S_&&n.b_(e.mutations)}function gr(t){return cr(t)&&!xr(t).u_()&&t.U_.length>0}function yr(t){xr(t).start()}async function vr(t){xr(t).C_()}async function wr(t){const e=xr(t);for(const n of t.U_)e.b_(n.mutations)}async function br(t,e,n){const i=t.U_.shift(),s=Ci.from(i,e,n);await dr(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await fr(t)}async function Tr(t,e){e&&xr(t).S_&&await async function(t,e){if(function(t){return _i(t)&&t!==O.ABORTED}(e.code)){const n=t.U_.shift();xr(t).h_(),await dr(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await fr(t)}}(t,e),gr(t)&&yr(t)}async function Er(t,e){const n=I(t);n.asyncQueue.verifyOperationInProgress(),C(or,"RemoteStore received new credentials");const i=cr(n);n.W_.add(3),await ur(n),i&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await lr(n)}async function Sr(t,e){const n=I(t);e?(n.W_.delete(2),await lr(n)):e||(n.W_.add(2),await ur(n),n.j_.set("Unknown"))}function xr(t){return t.Y_||(t.Y_=function(t,e,n){const i=I(t);return i.M_(),new nr(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:vr.bind(null,t),Lo:Tr.bind(null,t),D_:wr.bind(null,t),v_:br.bind(null,t)}),t.G_.push((async e=>{e?(t.Y_.h_(),await fr(t)):(await t.Y_.stop(),t.U_.length>0&&(C(or,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))}))),t.Y_}class Ar{constructor(t,e,n,i,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new N,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,s){const r=Date.now()+n,o=new Ar(t,e,r,i,s);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new M(O.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cr(t,e){if(P("AsyncQueue",`${e}: ${t}`),wt(t))return new M(O.UNAVAILABLE,`${e}: ${t}`);throw t}class Pr{constructor(){this.queries=Rr(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(t,e){const n=I(t),i=n.queries;n.queries=Rr(),i.forEach(((t,n)=>{for(const i of n.ta)i.onError(e)}))}(this,new M(O.ABORTED,"Firestore shutting down"))}}function Rr(){return new Mn((t=>Dn(t)),Rn)}function Dr(t){t.ia.forEach((t=>{t.next()}))}var _r,kr;(kr=_r||(_r={}))._a="default",kr.Cache="cache";const Ir="SyncEngine";class Or{constructor(t,e,n,i,s,r){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=r,this.La={},this.ka=new Mn((t=>Dn(t)),Rn),this.qa=new Map,this.Qa=new Set,this.$a=new ee(at.comparator),this.Ua=new Map,this.Ka=new ws,this.Wa={},this.Ga=new Map,this.za=rs.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}function Mr(t,e,n){const i=I(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ka.forEach(((n,i)=>{const s=i.view.sa(e);s.snapshot&&t.push(s.snapshot)})),function(t,e){const n=I(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const s of n.ta)s.sa(e)&&(i=!0)})),i&&Dr(n)}(i.eventManager,e),t.length&&i.La.p_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Nr(t,e){const n=I(t),i=e.batch.batchId;try{const t=await function(t,e){const n=I(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),s=n.ds.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const s=n.batch,r=s.keys();let o=yt.resolve();return r.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const r=n.docVersions.get(t);k(null!==r),e.version.compareTo(r)<0&&(s.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,s)))}(n,t,e,s).next((()=>s.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Kn();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(n.localStore,e);Fr(n,i,null),Vr(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ur(n,t)}catch(t){await gt(t)}}async function Lr(t,e,n){const i=I(t);try{const t=await function(t,e){const n=I(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(k(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);Fr(i,e,n),Vr(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ur(i,t)}catch(n){await gt(n)}}function Vr(t,e){(t.Ga.get(e)||[]).forEach((t=>{t.resolve()})),t.Ga.delete(e)}function Fr(t,e,n){const i=I(t);let s=i.Wa[i.currentUser.toKey()];if(s){const t=s.get(e);t&&(n?t.reject(n):t.resolve(),s=s.remove(e)),i.Wa[i.currentUser.toKey()]=s}}async function Ur(t,e,n){const i=I(t),s=[],r=[],o=[];i.ka.isEmpty()||(i.ka.forEach(((t,a)=>{o.push(i.Ha(a,e,n).then((t=>{var e;if((t||n)&&i.isPrimaryClient){const s=t?!t.fromCache:null===(e=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===e?void 0:e.current;i.sharedClientState.updateQueryState(a.targetId,s?"current":"not-current")}if(t){s.push(t);const e=Ds.Yi(a.targetId,t);r.push(e)}})))})),await Promise.all(o),i.La.p_(s),await async function(t,e){const n=I(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>yt.forEach(e,(e=>yt.forEach(e.Hi,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>yt.forEach(e.Ji,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!wt(t))throw t;C(Is,"Failed to update sequence numbers: "+t)}for(const i of e){const t=i.targetId;if(!i.fromCache){const e=n.Ts.get(t),i=e.snapshotVersion,s=e.withLastLimboFreeSnapshotVersion(i);n.Ts=n.Ts.insert(t,s)}}}(i.localStore,r))}async function jr(t,e){const n=I(t);if(!n.currentUser.isEqual(e)){C(Ir,"User change. New user:",e.toKey());const t=await Ns(n.localStore,e);n.currentUser=e,function(t,e){t.Ga.forEach((t=>{t.forEach((t=>{t.reject(new M(O.CANCELLED,e))}))})),t.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Ur(n,t.Rs)}}function Br(t){const e=I(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nr.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lr.bind(null,e),e}class $r{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Js(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,e){return null}nu(t,e){return null}eu(t){return Ms(this.persistence,new ks,t.initialUser,this.serializer)}Xa(t){return new As(Ps.ri,this.serializer)}Za(t){return new Us}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$r.provider={build:()=>new $r};class qr extends $r{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){k(this.persistence.referenceDelegate instanceof Rs);const n=this.persistence.referenceDelegate.garbageCollector;return new cs(n,t.asyncQueue,e)}Xa(t){const e=void 0!==this.cacheSizeBytes?ss.withCacheSize(this.cacheSizeBytes):ss.DEFAULT;return new As((t=>Rs.ri(t,e)),this.serializer)}}class zr{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Mr(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=jr.bind(null,this.syncEngine),await Sr(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Pr}createDatastore(t){const e=Js(t.databaseInfo.databaseId),n=function(t){return new Qs(t)}(t.databaseInfo);return function(t,e,n,i){return new sr(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,s){return new ar(t,e,n,i,s)}(this.localStore,this.datastore,t.asyncQueue,(t=>Mr(this.syncEngine,t,0)),$s.D()?new $s:new js)}createSyncEngine(t,e){return function(t,e,n,i,s,r,o){const a=new Or(t,e,n,i,s,r);return o&&(a.ja=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(t){const e=I(t);C(or,"RemoteStore shutting down."),e.W_.add(5),await ur(e),e.z_.shutdown(),e.j_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate(),null===(e=this.eventManager)||void 0===e||e.terminate()}}zr.provider={build:()=>new zr};const Kr="FirestoreClient";class Gr{constructor(t,e,n,i,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=E.UNAUTHENTICATED,this.clientId=G.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async t=>{C(Kr,"Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(C(Kr,"Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new N;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Cr(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Hr(t,e){t.asyncQueue.verifyOperationInProgress(),C(Kr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await Ns(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Wr(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Xr(t);C(Kr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>Er(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Er(e.remoteStore,n))),t._onlineComponents=e}async function Xr(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){C(Kr,"Using user provided OfflineComponentProvider");try{await Hr(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===O.FAILED_PRECONDITION||t.code===O.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;R("Error using user provided cache. Falling back to memory cache: "+n),await Hr(t,new $r)}}else C(Kr,"Using default OfflineComponentProvider"),await Hr(t,new qr(void 0));return t._offlineComponents}async function Qr(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(C(Kr,"Using user provided OnlineComponentProvider"),await Wr(t,t._uninitializedComponentsProvider._online)):(C(Kr,"Using default OnlineComponentProvider"),await Wr(t,new zr))),t._onlineComponents}function Yr(t){return Qr(t).then((t=>t.syncEngine))}function Jr(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Zr=new Map;function to(t,e,n){if(!n)throw new M(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eo(t){if(!at.isDocumentKey(t))throw new M(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function no(t){if(at.isDocumentKey(t))throw new M(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function io(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":_()}function so(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new M(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=io(t);throw new M(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}const ro="firestore.googleapis.com",oo=!0;class ao{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new M(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ro,this.ssl=oo}else this.host=t.host,this.ssl=null!==(e=t.ssl)&&void 0!==e?e:oo;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=is;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<as)throw new M(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new M(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Jr(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new M(O.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new M(O.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new M(O.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class lo{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ao({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new M(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new M(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ao(t),this._emulatorOptions=t.emulatorOptions||{},void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new V;switch(t.type){case"firstParty":return new B(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new M(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Zr.get(t);e&&(C("ComponentProvider","Removing Datastore"),Zr.delete(t),e.terminate())}(this),Promise.resolve()}}class uo{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new uo(this.firestore,t,this._query)}}class co{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new co(this.firestore,t,this._key)}}class ho extends uo{constructor(t,e,n){super(t,e,Tn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new co(this.firestore,null,new at(t))}withConverter(t){return new ho(this.firestore,t,this._path)}}function fo(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];if(t=(0,a.Ku)(t),to("collection","path",e),t instanceof lo){const n=st.fromString(e,...i);return no(n),new ho(t,null,n)}{if(!(t instanceof co||t instanceof ho))throw new M(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(st.fromString(e,...i));return no(n),new ho(t.firestore,null,n)}}const po="AsyncQueue";class mo{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Zs(this,"async_queue_retry"),this.Su=()=>{const t=Ys();t&&C(po,"Visibility state changed to "+t.visibilityState),this.a_.t_()},this.bu=t;const e=Ys();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const e=Ys();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise((()=>{}));const e=new N;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Vu.push(t),this.Cu())))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!wt(t))throw t;C(po,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(t){const e=this.bu.then((()=>(this.pu=!0,t().catch((t=>{this.gu=t,this.pu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw P("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.pu=!1,t))))));return this.bu=e,e}enqueueAfterDelay(t,e,n){this.Du(),this.wu.indexOf(t)>-1&&(e=0);const i=Ar.createAndSchedule(this,t,e,n,(t=>this.Fu(t)));return this.fu.push(i),i}Du(){this.gu&&_()}verifyOperationInProgress(){}async Mu(){let t;do{t=this.bu,await t}while(t!==this.bu)}xu(t){for(const e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then((()=>{this.fu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.fu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Mu()}))}Nu(t){this.wu.push(t)}Fu(t){const e=this.fu.indexOf(t);this.fu.splice(e,1)}}class go extends lo{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new mo,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new mo(t),this._firestoreClient=void 0,await t}}}function yo(t,e){const n="object"==typeof t?t:(0,s.Sx)(),i="string"==typeof t?t:e||Te,r=(0,s.j6)(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const t=(0,a.yU)("firestore");t&&function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const r=(t=so(t,lo))._getSettings(),o=Object.assign(Object.assign({},r),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;r.host!==ro&&r.host!==l&&R("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},r),{host:l,ssl:!1,emulatorOptions:i});if(!(0,a.bD)(u,o)&&(t._setSettings(u),i.mockUserToken)){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=E.MOCK_USER;else{e=(0,a.Fy)(i.mockUserToken,null===(s=t._app)||void 0===s?void 0:s.options.projectId);const r=i.mockUserToken.sub||i.mockUserToken.user_id;if(!r)throw new M(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new E(r)}t._authCredentials=new F(new L(e,n))}}(r,...t)}return r}function vo(t){if(t._terminated)throw new M(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wo(t),t._firestoreClient}function wo(t){var e,n,i;const s=t._freezeSettings(),r=function(t,e,n,i){return new be(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Jr(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=s.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new Gr(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(t){const e=null==t?void 0:t._online.build();return{_offline:null==t?void 0:t._offline.build(e),_online:e}}(t._componentsProvider))}class bo{constructor(t){this._byteString=t}static fromBase64String(t){try{return new bo(le.fromBase64String(t))}catch(t){throw new M(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new bo(le.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class To{constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let i=0;i<e.length;++i)if(0===e[i].length)throw new M(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Eo{constructor(t){this._methodName=t}}class So{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new M(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new M(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return H(this._lat,t._lat)||H(this._long,t._long)}}class xo{constructor(t){this._values=(t||[]).map((t=>t))}toArray(){return this._values.map((t=>t))}isEqual(t){return function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(this._values,t._values)}}const Ao=/^__.*__$/;class Co{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new wi(t,this.data,this.fieldMask,e,this.fieldTransforms):new vi(t,this.data,e,this.fieldTransforms)}}function Po(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _()}}class Ro{constructor(t,e,n,i,s,r){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===s&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=r||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new Ro(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.ku({path:n,Qu:!1});return i.$u(t),i}Uu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.ku({path:n,Qu:!1});return i.Bu(),i}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return Uo(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(0===t.length)throw this.Wu("Document fields must not be empty");if(Po(this.Lu)&&Ao.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class Do{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Js(t)}ju(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Ro({Lu:t,methodName:e,zu:n,path:ot.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _o(t){const e=t._freezeSettings(),n=Js(t._databaseId);return new Do(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ko(t,e,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=t.ju(r.merge||r.mergeFields?2:0,e,n,s);No("Data must be an object, but it was:",o,i);const a=Oo(i,o);let l,u;if(r.merge)l=new oe(o.fieldMask),u=o.fieldTransforms;else if(r.mergeFields){const t=[];for(const i of r.mergeFields){const s=Lo(e,i,n);if(!o.contains(s))throw new M(O.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);jo(t,s)||t.push(s)}l=new oe(t),u=o.fieldTransforms.filter((t=>l.covers(t.field)))}else l=null,u=o.fieldTransforms;return new Co(new qe(a),l,u)}function Io(t,e){if(Mo(t=(0,a.Ku)(t)))return No("Unsupported field value:",e,t),Oo(t,e);if(t instanceof Eo)return function(t,e){if(!Po(e.Lu))throw e.Wu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Wu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&4!==e.Lu)throw e.Wu("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const s of t){let t=Io(s,e.Ku(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,a.Ku)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Qn(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=tt.fromDate(t);return{timestampValue:Oi(e.serializer,n)}}if(t instanceof tt){const n=new tt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Oi(e.serializer,n)}}if(t instanceof So)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bo)return{bytesValue:Mi(e.serializer,t._byteString)};if(t instanceof co){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.Wu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Vi(t.firestore._databaseId||e.databaseId,t._key.path)}}if(t instanceof xo)return function(t,e){return{mapValue:{fields:{[Se]:{stringValue:Ce},[Pe]:{arrayValue:{values:t.toArray().map((t=>{if("number"!=typeof t)throw e.Wu("VectorValues must only contain numeric values.");return Wn(e.serializer,t)}))}}}}}}(t,e);throw e.Wu(`Unsupported field value: ${io(t)}`)}(t,e)}function Oo(t,e){const n={};return te(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zt(t,((t,i)=>{const s=Io(i,e.qu(t));null!=s&&(n[t]=s)})),{mapValue:{fields:n}}}function Mo(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof So||t instanceof bo||t instanceof co||t instanceof Eo||t instanceof xo)}function No(t,e,n){if(!Mo(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=io(n);throw"an object"===i?e.Wu(t+" a custom object"):e.Wu(t+" "+i)}}function Lo(t,e,n){if((e=(0,a.Ku)(e))instanceof To)return e._internalPath;if("string"==typeof e)return Fo(t,e);throw Uo("Field path arguments must be of type string or ",t,!1,void 0,n)}const Vo=new RegExp("[~\\*/\\[\\]]");function Fo(t,e,n){if(e.search(Vo)>=0)throw Uo(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new To(...e.split("."))._internalPath}catch(i){throw Uo(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Uo(t,e,n,i,s){const r=i&&!i.isEmpty(),o=void 0!==s;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new M(O.INVALID_ARGUMENT,a+t+l)}function jo(t,e){return t.some((t=>t.isEqual(e)))}function Bo(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}function $o(t,e){const n=so(t.firestore,go),i=function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];if(t=(0,a.Ku)(t),1===arguments.length&&(e=G.newId()),to("doc","path",e),t instanceof lo){const n=st.fromString(e,...i);return eo(n),new co(t,null,new at(n))}{if(!(t instanceof co||t instanceof ho))throw new M(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(st.fromString(e,...i));return eo(n),new co(t.firestore,t instanceof ho?t.converter:null,new at(n))}}(t),s=Bo(t.converter,e);return qo(n,[ko(_o(t.firestore),"addDoc",i._key,s,null!==t.converter,{}).toMutation(i._key,ci.exists(!1))]).then((()=>i))}function qo(t,e){return function(t,e){const n=new N;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=Br(t);try{const t=await function(t,e){const n=I(t),i=tt.now(),s=e.reduce(((t,e)=>t.add(e.key)),Kn());let r,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=Ln(),l=Kn();return n.ds.getEntries(t,s).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(l=l.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((s=>{r=s;const o=[];for(const t of e){const e=gi(t,r.get(t.key).overlayedDocument);null!=e&&o.push(new wi(t.key,e,ze(e.value.mapValue),ci.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(r,l);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:Un(r)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Wa[t.currentUser.toKey()];i||(i=new ee(H)),i=i.insert(e,n),t.Wa[t.currentUser.toKey()]=i}(i,t.batchId,n),await Ur(i,t.changes),await fr(i.remoteStore)}catch(t){const e=Cr(t,"Failed to persist write");n.reject(e)}}(await Yr(t),e,n))),n.promise}(vo(t),e)}new WeakMap;!function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t){S=t}(s.MF),(0,s.om)(new r.uA("firestore",((t,n)=>{let{instanceIdentifier:i,options:s}=n;const r=t.getProvider("app").getImmediate(),o=new go(new U(t.getProvider("auth-internal")),new q(r,t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new M(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ee(t.options.projectId,e)}(r,i),r);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o}),"PUBLIC").setMultipleInstances(!0)),(0,s.KO)(b,T,t),(0,s.KO)(b,T,"esm2017")}()},546:(t,e,n)=>{n.d(e,{N:()=>y});var i=n(579),s=n(43),r=n(190),o=n(930),a=n(293),l=n(674),u=n(51);class c extends s.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const t=e.offsetParent,n=t instanceof HTMLElement&&t.offsetWidth||0,i=this.props.sizeRef.current;i.height=e.offsetHeight||0,i.width=e.offsetWidth||0,i.top=e.offsetTop,i.left=e.offsetLeft,i.right=n-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h(t){let{children:e,isPresent:n,anchorX:r}=t;const o=(0,s.useId)(),a=(0,s.useRef)(null),l=(0,s.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=(0,s.useContext)(u.Q);return(0,s.useInsertionEffect)((()=>{const{width:t,height:e,top:i,left:s,right:u}=l.current;if(n||!a.current||!t||!e)return;const c="left"===r?`left: ${s}`:`right: ${u}`;a.current.dataset.motionPopId=o;const d=document.createElement("style");return h&&(d.nonce=h),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`\n          [data-motion-pop-id="${o}"] {\n            position: absolute !important;\n            width: ${t}px !important;\n            height: ${e}px !important;\n            ${c}px !important;\n            top: ${i}px !important;\n          }\n        `),()=>{document.head.removeChild(d)}}),[n]),(0,i.jsx)(c,{isPresent:n,childRef:a,sizeRef:l,children:s.cloneElement(e,{ref:a})})}const d=t=>{let{children:e,initial:n,isPresent:r,onExitComplete:a,custom:u,presenceAffectsLayout:c,mode:d,anchorX:p}=t;const m=(0,o.M)(f),g=(0,s.useId)(),y=(0,s.useCallback)((t=>{m.set(t,!0);for(const e of m.values())if(!e)return;a&&a()}),[m,a]),v=(0,s.useMemo)((()=>({id:g,initial:n,isPresent:r,custom:u,onExitComplete:y,register:t=>(m.set(t,!1),()=>m.delete(t))})),c?[Math.random(),y]:[r,y]);return(0,s.useMemo)((()=>{m.forEach(((t,e)=>m.set(e,!1)))}),[r]),s.useEffect((()=>{!r&&!m.size&&a&&a()}),[r]),"popLayout"===d&&(e=(0,i.jsx)(h,{isPresent:r,anchorX:p,children:e})),(0,i.jsx)(l.t.Provider,{value:v,children:e})};function f(){return new Map}var p=n(917);const m=t=>t.key||"";function g(t){const e=[];return s.Children.forEach(t,(t=>{(0,s.isValidElement)(t)&&e.push(t)})),e}const y=t=>{let{children:e,custom:n,initial:l=!0,onExitComplete:u,presenceAffectsLayout:c=!0,mode:h="sync",propagate:f=!1,anchorX:y="left"}=t;const[v,w]=(0,p.xQ)(f),b=(0,s.useMemo)((()=>g(e)),[e]),T=f&&!v?[]:b.map(m),E=(0,s.useRef)(!0),S=(0,s.useRef)(b),x=(0,o.M)((()=>new Map)),[A,C]=(0,s.useState)(b),[P,R]=(0,s.useState)(b);(0,a.E)((()=>{E.current=!1,S.current=b;for(let t=0;t<P.length;t++){const e=m(P[t]);T.includes(e)?x.delete(e):!0!==x.get(e)&&x.set(e,!1)}}),[P,T.length,T.join("-")]);const D=[];if(b!==A){let t=[...b];for(let e=0;e<P.length;e++){const n=P[e],i=m(n);T.includes(i)||(t.splice(e,0,n),D.push(n))}return"wait"===h&&D.length&&(t=D),R(g(t)),C(b),null}const{forceRender:_}=(0,s.useContext)(r.L);return(0,i.jsx)(i.Fragment,{children:P.map((t=>{const e=m(t),s=!(f&&!v)&&(b===P||T.includes(e));return(0,i.jsx)(d,{isPresent:s,initial:!(E.current&&!l)&&void 0,custom:n,presenceAffectsLayout:c,mode:h,onExitComplete:s?void 0:()=>{if(!x.has(e))return;x.set(e,!0);let t=!0;x.forEach((e=>{e||(t=!1)})),t&&(_?.(),R(S.current),f&&w?.(),u&&u())},anchorX:y,children:t},e)}))})}},674:(t,e,n)=>{n.d(e,{t:()=>i});const i=(0,n(43).createContext)(null)},735:(t,e,n)=>{n.d(e,{B:()=>i});const i="undefined"!==typeof window},806:(t,e,n)=>{function i(t,e){-1===t.indexOf(e)&&t.push(e)}function s(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}n.d(e,{P:()=>Yo});const r={skipAnimations:!1,useManualTiming:!1};function o(t){let e;return()=>(void 0===e&&(e=t()),e)}const a=t=>t,l=(t,e,n)=>{const i=e-t;return 0===i?1:(n-t)/i};class u{constructor(){this.subscriptions=[]}add(t){return i(this.subscriptions,t),()=>s(this.subscriptions,t)}notify(t,e,n){const i=this.subscriptions.length;if(i)if(1===i)this.subscriptions[0](t,e,n);else for(let s=0;s<i;s++){const i=this.subscriptions[s];i&&i(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const c=t=>1e3*t,h=t=>t/1e3;function d(t,e){return e?t*(1e3/e):0}new Set;function f(t){if("undefined"===typeof Proxy)return t;const e=new Map;return new Proxy((function(){return t(...arguments)}),{get:(n,i)=>"create"===i?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function p(t){return null!==t&&"object"===typeof t&&"function"===typeof t.start}function m(t){const e=[{},{}];return t?.values.forEach(((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()})),e}function g(t,e,n,i){if("function"===typeof e){const[s,r]=m(i);e=e(void 0!==n?n:t.custom,s,r)}if("string"===typeof e&&(e=t.variants&&t.variants[e]),"function"===typeof e){const[s,r]=m(i);e=e(void 0!==n?n:t.custom,s,r)}return e}function y(t,e,n){const i=t.getProps();return g(i,e,void 0!==n?n:i.custom,t)}const v=o((()=>void 0!==window.ScrollTimeline));class w{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map((t=>t.finished)))}getAll(t){return this.animations[0][t]}setAll(t,e){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=e}attachTimeline(t,e){const n=this.animations.map((n=>v()&&n.attachTimeline?n.attachTimeline(t):"function"===typeof e?e(n):void 0));return()=>{n.forEach(((t,e)=>{t&&t(),this.animations[e].stop()}))}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach((e=>e[t]()))}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class b extends w{then(t,e){return this.finished.finally(t).then((()=>{}))}}new Set(["borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderRadius","radius","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","width","maxWidth","height","maxHeight","top","right","bottom","left","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","backgroundPositionX","backgroundPositionY"]);const T={layout:0,mainThread:0,waapi:0},E={value:null,addProjectionMetrics:null},S=t=>Array.isArray(t)&&"number"===typeof t[0],x={};function A(t,e){const n=o(t);return()=>x[e]??n()}const C=A((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0}),"linearEasing"),P=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i="";const s=Math.max(Math.round(e/n),2);for(let r=0;r<s;r++)i+=t(r/(s-1))+", ";return`linear(${i.substring(0,i.length-2)})`},R=t=>{let[e,n,i,s]=t;return`cubic-bezier(${e}, ${n}, ${i}, ${s})`},D={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:R([0,.65,.55,1]),circOut:R([.55,0,1,.45]),backIn:R([.31,.01,.66,-.59]),backOut:R([.33,1.53,.69,.99])};function _(t,e){return t?"function"===typeof t&&C()?P(t,e):S(t)?R(t):Array.isArray(t)?t.map((t=>_(t,e)||D.easeOut)):D[t]:void 0}function k(t,e,n){let{delay:i=0,duration:s=300,repeat:r=0,repeatType:o="loop",ease:a="easeInOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const c={[e]:n};l&&(c.offset=l);const h=_(a,s);Array.isArray(h)&&(c.easing=h),E.value&&T.waapi++;const d=t.animate(c,{delay:i,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:r+1,direction:"reverse"===o?"alternate":"normal",pseudoElement:u});return E.value&&d.finished.finally((()=>{T.waapi--})),d}new WeakMap;function I(t,e){return t?.[e]??t?.default??t}const O=2e4;function M(t){let e=0;let n=t.next(e);for(;!n.done&&e<O;)e+=50,n=t.next(e);return e>=O?1/0:e}function N(t){return"function"===typeof t&&"applyToOptions"in t}function L(t){return Boolean("function"===typeof t&&C()||!t||"string"===typeof t&&(t in D||C())||S(t)||Array.isArray(t)&&t.every(L))}function V(t,e){t.timeline=e,t.onfinish=null}const F=["read","resolveKeyframes","update","preRender","render","postRender"];function U(t,e){let n=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=F.reduce(((t,n)=>(t[n]=function(t,e){let n=new Set,i=new Set,s=!1,r=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function u(e){o.has(e)&&(c.schedule(e),t()),l++,e(a)}const c={schedule:function(t){const e=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&s?n:i;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(t),e.has(t)||e.add(t),t},cancel:t=>{i.delete(t),o.delete(t)},process:t=>{a=t,s?r=!0:(s=!0,[n,i]=[i,n],n.forEach(u),e&&E.value&&E.value.frameloop[e].push(l),l=0,n.clear(),s=!1,r&&(r=!1,c.process(t)))}};return c}(o,e?n:void 0),t)),{}),{read:l,resolveKeyframes:u,update:c,preRender:h,render:d,postRender:f}=a,p=()=>{const o=r.useManualTiming?s.timestamp:performance.now();n=!1,r.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(o-s.timestamp,40),1)),s.timestamp=o,s.isProcessing=!0,l.process(s),u.process(s),c.process(s),h.process(s),d.process(s),f.process(s),s.isProcessing=!1,n&&e&&(i=!1,t(p))},m=F.reduce(((e,r)=>{const o=a[r];return e[r]=function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,i=!0,s.isProcessing||t(p)),o.schedule(e,r,a)},e}),{});return{schedule:m,cancel:t=>{for(let e=0;e<F.length;e++)a[F[e]].cancel(t)},state:s,steps:a}}const{schedule:j,cancel:B,state:$,steps:q}=U("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:a,!0),{schedule:z,cancel:K}=U(queueMicrotask,!1);let G;function H(){G=void 0}const W={now:()=>(void 0===G&&W.set($.isProcessing||r.useManualTiming?$.timestamp:performance.now()),G),set:t=>{G=t,queueMicrotask(H)}},X={x:!1,y:!1};function Q(){return X.x||X.y}function Y(t,e){const n=function(t,e,n){if(t instanceof EventTarget)return[t];if("string"===typeof t){let i=document;e&&(i=e.current);const s=n?.[t]??i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}(t),i=new AbortController;return[n,{passive:!0,...e,signal:i.signal},()=>i.abort()]}function J(t){return!("touch"===t.pointerType||Q())}const Z=(t,e)=>!!e&&(t===e||Z(t,e.parentElement)),tt=t=>"mouse"===t.pointerType?"number"!==typeof t.button||t.button<=0:!1!==t.isPrimary,et=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const nt=new WeakSet;function it(t){return e=>{"Enter"===e.key&&t(e)}}function st(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}function rt(t){return tt(t)&&!Q()}function ot(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[i,s,r]=Y(t,n),o=t=>{const i=t.currentTarget;if(!rt(t)||nt.has(i))return;nt.add(i);const r=e(i,t),o=(t,e)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),rt(t)&&nt.has(i)&&(nt.delete(i),"function"===typeof r&&r(t,{success:e}))},a=t=>{o(t,i===window||i===document||n.useGlobalTarget||Z(i,t.target))},l=t=>{o(t,!1)};window.addEventListener("pointerup",a,s),window.addEventListener("pointercancel",l,s)};return i.forEach((t=>{var e;(n.useGlobalTarget?window:t).addEventListener("pointerdown",o,s),t instanceof HTMLElement&&(t.addEventListener("focus",(t=>((t,e)=>{const n=t.currentTarget;if(!n)return;const i=it((()=>{if(nt.has(n))return;st(n,"down");const t=it((()=>{st(n,"up")}));n.addEventListener("keyup",t,e),n.addEventListener("blur",(()=>st(n,"cancel")),e)}));n.addEventListener("keydown",i,e),n.addEventListener("blur",(()=>n.removeEventListener("keydown",i)),e)})(t,s))),e=t,et.has(e.tagName)||-1!==e.tabIndex||t.hasAttribute("tabindex")||(t.tabIndex=0))})),r}const at={current:void 0};class lt{constructor(t){var e=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.version="12.6.5",this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=W.now();e.updatedAt!==i&&e.setPrevFrameValue(),e.prev=e.current,e.setCurrent(t),e.current!==e.prev&&e.events.change&&e.events.change.notify(e.current),n&&e.events.renderRequest&&e.events.renderRequest.notify(e.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){var e;this.current=t,this.updatedAt=W.now(),null===this.canTrackVelocity&&void 0!==t&&(this.canTrackVelocity=(e=this.current,!isNaN(parseFloat(e))))}setPrevFrameValue(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new u);const n=this.events[t].add(e);return"change"===t?()=>{n(),j.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return at.current&&at.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=W.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,30);return d(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise((e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ut(t,e){return new lt(t,e)}F.reduce(((t,e)=>(t[e]=t=>B(t),t)),{});const ct=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ht=new Set(ct),dt=new Set(["width","height","top","left","right","bottom",...ct]),ft=t=>Array.isArray(t);function pt(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ut(n))}const mt=t=>Boolean(t&&t.getVelocity);function gt(t,e){const n=t.getValue("willChange");if(i=n,Boolean(mt(i)&&i.add))return n.add(e);if(!n&&r.WillChange){const n=new r.WillChange("auto");t.addValue("willChange",n),n.add(e)}var i}const yt=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),vt="data-"+yt("framerAppearId");function wt(t){return t.props[vt]}const bt=!1,Tt=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t;function Et(t,e,n,i){if(t===e&&n===i)return a;const s=e=>function(t,e,n,i,s){let r,o,a=0;do{o=e+(n-e)/2,r=Tt(o,i,s)-t,r>0?n=o:e=o}while(Math.abs(r)>1e-7&&++a<12);return o}(e,0,1,t,n);return t=>0===t||1===t?t:Tt(s(t),e,i)}const St=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,xt=t=>e=>1-t(1-e),At=Et(.33,1.53,.69,.99),Ct=xt(At),Pt=St(Ct),Rt=t=>(t*=2)<1?.5*Ct(t):.5*(2-Math.pow(2,-10*(t-1))),Dt=t=>1-Math.sin(Math.acos(t)),_t=xt(Dt),kt=St(Dt),It=t=>/^0[^.\s]+$/u.test(t);const Ot=(t,e,n)=>n>e?e:n<t?t:n,Mt={test:t=>"number"===typeof t,parse:parseFloat,transform:t=>t},Nt={...Mt,transform:t=>Ot(0,1,t)},Lt={...Mt,default:1},Vt=t=>Math.round(1e5*t)/1e5,Ft=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const Ut=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,jt=(t,e)=>n=>Boolean("string"===typeof n&&Ut.test(n)&&n.startsWith(t)||e&&!function(t){return null==t}(n)&&Object.prototype.hasOwnProperty.call(n,e)),Bt=(t,e,n)=>i=>{if("string"!==typeof i)return i;const[s,r,o,a]=i.match(Ft);return{[t]:parseFloat(s),[e]:parseFloat(r),[n]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},$t={...Mt,transform:t=>Math.round((t=>Ot(0,255,t))(t))},qt={test:jt("rgb","red"),parse:Bt("red","green","blue"),transform:t=>{let{red:e,green:n,blue:i,alpha:s=1}=t;return"rgba("+$t.transform(e)+", "+$t.transform(n)+", "+$t.transform(i)+", "+Vt(Nt.transform(s))+")"}};const zt={test:jt("#"),parse:function(t){let e="",n="",i="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}},transform:qt.transform},Kt=t=>({test:e=>"string"===typeof e&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>`${e}${t}`}),Gt=Kt("deg"),Ht=Kt("%"),Wt=Kt("px"),Xt=Kt("vh"),Qt=Kt("vw"),Yt={...Ht,parse:t=>Ht.parse(t)/100,transform:t=>Ht.transform(100*t)},Jt={test:jt("hsl","hue"),parse:Bt("hue","saturation","lightness"),transform:t=>{let{hue:e,saturation:n,lightness:i,alpha:s=1}=t;return"hsla("+Math.round(e)+", "+Ht.transform(Vt(n))+", "+Ht.transform(Vt(i))+", "+Vt(Nt.transform(s))+")"}},Zt={test:t=>qt.test(t)||zt.test(t)||Jt.test(t),parse:t=>qt.test(t)?qt.parse(t):Jt.test(t)?Jt.parse(t):zt.parse(t),transform:t=>"string"===typeof t?t:t.hasOwnProperty("red")?qt.transform(t):Jt.transform(t)},te=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const ee="number",ne="color",ie=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function se(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},s=[];let r=0;const o=e.replace(ie,(t=>(Zt.test(t)?(i.color.push(r),s.push(ne),n.push(Zt.parse(t))):t.startsWith("var(")?(i.var.push(r),s.push("var"),n.push(t)):(i.number.push(r),s.push(ee),n.push(parseFloat(t))),++r,"${}"))).split("${}");return{values:n,split:o,indexes:i,types:s}}function re(t){return se(t).values}function oe(t){const{split:e,types:n}=se(t),i=e.length;return t=>{let s="";for(let r=0;r<i;r++)if(s+=e[r],void 0!==t[r]){const e=n[r];s+=e===ee?Vt(t[r]):e===ne?Zt.transform(t[r]):t[r]}return s}}const ae=t=>"number"===typeof t?0:t;const le={test:function(t){return isNaN(t)&&"string"===typeof t&&(t.match(Ft)?.length||0)+(t.match(te)?.length||0)>0},parse:re,createTransformer:oe,getAnimatableNone:function(t){const e=re(t);return oe(t)(e.map(ae))}},ue=new Set(["brightness","contrast","saturate","opacity"]);function ce(t){const[e,n]=t.slice(0,-1).split("(");if("drop-shadow"===e)return t;const[i]=n.match(Ft)||[];if(!i)return t;const s=n.replace(i,"");let r=ue.has(e)?1:0;return i!==n&&(r*=100),e+"("+r+s+")"}const he=/\b([a-z-]*)\(.*?\)/gu,de={...le,getAnimatableNone:t=>{const e=t.match(he);return e?e.map(ce).join(" "):t}},fe={borderWidth:Wt,borderTopWidth:Wt,borderRightWidth:Wt,borderBottomWidth:Wt,borderLeftWidth:Wt,borderRadius:Wt,radius:Wt,borderTopLeftRadius:Wt,borderTopRightRadius:Wt,borderBottomRightRadius:Wt,borderBottomLeftRadius:Wt,width:Wt,maxWidth:Wt,height:Wt,maxHeight:Wt,top:Wt,right:Wt,bottom:Wt,left:Wt,padding:Wt,paddingTop:Wt,paddingRight:Wt,paddingBottom:Wt,paddingLeft:Wt,margin:Wt,marginTop:Wt,marginRight:Wt,marginBottom:Wt,marginLeft:Wt,backgroundPositionX:Wt,backgroundPositionY:Wt},pe={rotate:Gt,rotateX:Gt,rotateY:Gt,rotateZ:Gt,scale:Lt,scaleX:Lt,scaleY:Lt,scaleZ:Lt,skew:Gt,skewX:Gt,skewY:Gt,distance:Wt,translateX:Wt,translateY:Wt,translateZ:Wt,x:Wt,y:Wt,z:Wt,perspective:Wt,transformPerspective:Wt,opacity:Nt,originX:Yt,originY:Yt,originZ:Wt},me={...Mt,transform:Math.round},ge={...fe,...pe,zIndex:me,size:Wt,fillOpacity:Nt,strokeOpacity:Nt,numOctaves:me},ye={...ge,color:Zt,backgroundColor:Zt,outlineColor:Zt,fill:Zt,stroke:Zt,borderColor:Zt,borderTopColor:Zt,borderRightColor:Zt,borderBottomColor:Zt,borderLeftColor:Zt,filter:de,WebkitFilter:de},ve=t=>ye[t];function we(t,e){let n=ve(t);return n!==de&&(n=le),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const be=new Set(["auto","none","0"]);const Te=t=>180*t/Math.PI,Ee=t=>{const e=Te(Math.atan2(t[1],t[0]));return xe(e)},Se={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ee,rotateZ:Ee,skewX:t=>Te(Math.atan(t[1])),skewY:t=>Te(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},xe=t=>((t%=360)<0&&(t+=360),t),Ae=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Ce=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Pe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ae,scaleY:Ce,scale:t=>(Ae(t)+Ce(t))/2,rotateX:t=>xe(Te(Math.atan2(t[6],t[5]))),rotateY:t=>xe(Te(Math.atan2(-t[2],t[0]))),rotateZ:Ee,rotate:Ee,skewX:t=>Te(Math.atan(t[4])),skewY:t=>Te(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Re(t){return t.includes("scale")?1:0}function De(t,e){if(!t||"none"===t)return Re(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(n)i=Pe,s=n;else{const e=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=Se,s=e}if(!s)return Re(e);const r=i[e],o=s[1].split(",").map(_e);return"function"===typeof r?r(o):o[r]}function _e(t){return parseFloat(t.trim())}const ke=t=>t===Mt||t===Wt,Ie=new Set(["x","y","z"]),Oe=ct.filter((t=>!Ie.has(t)));const Me={width:(t,e)=>{let{x:n}=t,{paddingLeft:i="0",paddingRight:s="0"}=e;return n.max-n.min-parseFloat(i)-parseFloat(s)},height:(t,e)=>{let{y:n}=t,{paddingTop:i="0",paddingBottom:s="0"}=e;return n.max-n.min-parseFloat(i)-parseFloat(s)},top:(t,e)=>{let{top:n}=e;return parseFloat(n)},left:(t,e)=>{let{left:n}=e;return parseFloat(n)},bottom:(t,e)=>{let{y:n}=t,{top:i}=e;return parseFloat(i)+(n.max-n.min)},right:(t,e)=>{let{x:n}=t,{left:i}=e;return parseFloat(i)+(n.max-n.min)},x:(t,e)=>{let{transform:n}=e;return De(n,"x")},y:(t,e)=>{let{transform:n}=e;return De(n,"y")}};Me.translateX=Me.x,Me.translateY=Me.y;const Ne=new Set;let Le=!1,Ve=!1;function Fe(){if(Ve){const t=Array.from(Ne).filter((t=>t.needsMeasurement)),e=new Set(t.map((t=>t.element))),n=new Map;e.forEach((t=>{const e=function(t){const e=[];return Oe.forEach((n=>{const i=t.getValue(n);void 0!==i&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))})),e}(t);e.length&&(n.set(t,e),t.render())})),t.forEach((t=>t.measureInitialState())),e.forEach((t=>{t.render();const e=n.get(t);e&&e.forEach((e=>{let[n,i]=e;t.getValue(n)?.set(i)}))})),t.forEach((t=>t.measureEndState())),t.forEach((t=>{void 0!==t.suspendedScrollY&&window.scrollTo(0,t.suspendedScrollY)}))}Ve=!1,Le=!1,Ne.forEach((t=>t.complete())),Ne.clear()}function Ue(){Ne.forEach((t=>{t.readKeyframes(),t.needsMeasurement&&(Ve=!0)}))}class je{constructor(t,e,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=i,this.element=s,this.isAsync=r}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ne.add(this),Le||(Le=!0,j.read(Ue),j.resolveKeyframes(Fe))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:i}=this;for(let s=0;s<t.length;s++)if(null===t[s])if(0===s){const s=i?.get(),r=t[t.length-1];if(void 0!==s)t[0]=s;else if(n&&e){const i=n.readValue(e,r);void 0!==i&&null!==i&&(t[0]=i)}void 0===t[0]&&(t[0]=r),i&&void 0===s&&i.set(t[0])}else t[s]=t[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ne.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ne.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Be=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),$e=t=>e=>"string"===typeof e&&e.startsWith(t),qe=$e("--"),ze=$e("var(--"),Ke=t=>!!ze(t)&&Ge.test(t.split("/*")[0].trim()),Ge=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,He=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function We(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const[i,s]=function(t){const e=He.exec(t);if(!e)return[,];const[,n,i,s]=e;return[`--${n??i}`,s]}(t);if(!i)return;const r=window.getComputedStyle(e).getPropertyValue(i);if(r){const t=r.trim();return Be(t)?parseFloat(t):t}return Ke(s)?We(s,e,n+1):s}const Xe=t=>e=>e.test(t),Qe=[Mt,Wt,Ht,Gt,Qt,Xt,{test:t=>"auto"===t,parse:t=>t}],Ye=t=>Qe.find(Xe(t));class Je extends je{constructor(t,e,n,i,s){super(t,e,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let a=0;a<t.length;a++){let n=t[a];if("string"===typeof n&&(n=n.trim(),Ke(n))){const i=We(n,e.current);void 0!==i&&(t[a]=i),a===t.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!dt.has(n)||2!==t.length)return;const[i,s]=t,r=Ye(i),o=Ye(s);if(r!==o)if(ke(r)&&ke(o))for(let a=0;a<t.length;a++){const e=t[a];"string"===typeof e&&(t[a]=parseFloat(e))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let s=0;s<t.length;s++)("number"===typeof(i=t[s])?0===i:null===i||"none"===i||"0"===i||It(i))&&n.push(s);var i;n.length&&function(t,e,n){let i,s=0;for(;s<t.length&&!i;){const e=t[s];"string"===typeof e&&!be.has(e)&&se(e).values.length&&(i=t[s]),s++}if(i&&n)for(const r of e)t[r]=we(n,i)}(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Me[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];void 0!==i&&t.getValue(n,i).jump(i,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const i=t.getValue(e);i&&i.jump(this.measuredOrigin,!1);const s=n.length-1,r=n[s];n[s]=Me[e](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==r&&void 0===this.finalKeyframe&&(this.finalKeyframe=r),this.removedTransforms?.length&&this.removedTransforms.forEach((e=>{let[n,i]=e;t.getValue(n).set(i)})),this.resolveNoneKeyframes()}}const Ze=(t,e)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!le.test(t)&&"0"!==t||t.startsWith("url(")));function tn(t,e,n,i){const s=t[0];if(null===s)return!1;if("display"===e||"visibility"===e)return!0;const r=t[t.length-1],o=Ze(s,e),a=Ze(r,e);return!(!o||!a)&&(function(t){const e=t[0];if(1===t.length)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}(t)||("spring"===n||N(n))&&i)}const en=t=>null!==t;function nn(t,e,n){let{repeat:i,repeatType:s="loop"}=e;const r=t.filter(en),o=i&&"loop"!==s&&i%2===1?0:r.length-1;return o&&void 0!==n?n:r[o]}class sn{constructor(t){let{autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:o="loop",...a}=t;this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=W.now(),this.options={autoplay:e,delay:n,type:i,repeat:s,repeatDelay:r,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(Ue(),Fe()),this._resolved}onKeyframesResolved(t,e){this.resolvedAt=W.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:s,delay:r,onComplete:o,onUpdate:a,isGenerator:l}=this.options;if(!l&&!tn(t,n,i,s)){if(bt||!r)return a&&a(nn(t,this.options,e)),o&&o(),void this.resolveFinishedPromise();this.options.duration=0}const u=this.initPlayback(t,e);!1!==u&&(this._resolved={keyframes:t,finalKeyframe:e,...u},this.onPostResolved())}onPostResolved(){}then(t,e){return this.currentFinishedPromise.then(t,e)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise((t=>{this.resolveFinishedPromise=t}))}}const rn=(t,e,n)=>t+(e-t)*n;function on(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function an(t,e){return n=>n>0?e:t}const ln=(t,e,n)=>{const i=t*t,s=n*(e*e-i)+i;return s<0?0:Math.sqrt(s)},un=[zt,qt,Jt];function cn(t){const e=(n=t,un.find((t=>t.test(n))));var n;if(Boolean(e),!Boolean(e))return!1;let i=e.parse(t);return e===Jt&&(i=function(t){let{hue:e,saturation:n,lightness:i,alpha:s}=t;e/=360,n/=100,i/=100;let r=0,o=0,a=0;if(n){const t=i<.5?i*(1+n):i+n-i*n,s=2*i-t;r=on(s,t,e+1/3),o=on(s,t,e),a=on(s,t,e-1/3)}else r=o=a=i;return{red:Math.round(255*r),green:Math.round(255*o),blue:Math.round(255*a),alpha:s}}(i)),i}const hn=(t,e)=>{const n=cn(t),i=cn(e);if(!n||!i)return an(t,e);const s={...n};return t=>(s.red=ln(n.red,i.red,t),s.green=ln(n.green,i.green,t),s.blue=ln(n.blue,i.blue,t),s.alpha=rn(n.alpha,i.alpha,t),qt.transform(s))},dn=(t,e)=>n=>e(t(n)),fn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(dn)},pn=new Set(["none","hidden"]);function mn(t,e){return n=>rn(t,e,n)}function gn(t){return"number"===typeof t?mn:"string"===typeof t?Ke(t)?an:Zt.test(t)?hn:wn:Array.isArray(t)?yn:"object"===typeof t?Zt.test(t)?hn:vn:an}function yn(t,e){const n=[...t],i=n.length,s=t.map(((t,n)=>gn(t)(t,e[n])));return t=>{for(let e=0;e<i;e++)n[e]=s[e](t);return n}}function vn(t,e){const n={...t,...e},i={};for(const s in n)void 0!==t[s]&&void 0!==e[s]&&(i[s]=gn(t[s])(t[s],e[s]));return t=>{for(const e in i)n[e]=i[e](t);return n}}const wn=(t,e)=>{const n=le.createTransformer(e),i=se(t),s=se(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?pn.has(t)&&!s.values.length||pn.has(e)&&!i.values.length?function(t,e){return pn.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}(t,e):fn(yn(function(t,e){const n=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const r=e.types[s],o=t.indexes[r][i[r]],a=t.values[o]??0;n[s]=a,i[r]++}return n}(i,s),s.values),n):an(t,e)};function bn(t,e,n){if("number"===typeof t&&"number"===typeof e&&"number"===typeof n)return rn(t,e,n);return gn(t)(t,e)}function Tn(t,e,n){const i=Math.max(e-5,0);return d(n-t(i),e-i)}const En={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Sn=.001;function xn(t){let e,n,{duration:i=En.duration,bounce:s=En.bounce,velocity:r=En.velocity,mass:o=En.mass}=t;c(En.maxDuration);let a=1-s;a=Ot(En.minDamping,En.maxDamping,a),i=Ot(En.minDuration,En.maxDuration,h(i)),a<1?(e=t=>{const e=t*a,n=e*i,s=e-r,o=Cn(t,a),l=Math.exp(-n);return Sn-s/o*l},n=t=>{const n=t*a*i,s=n*r+r,o=Math.pow(a,2)*Math.pow(t,2)*i,l=Math.exp(-n),u=Cn(Math.pow(t,2),a);return(-e(t)+Sn>0?-1:1)*((s-o)*l)/u}):(e=t=>Math.exp(-t*i)*((t-r)*i+1)-.001,n=t=>Math.exp(-t*i)*(i*i*(r-t)));const l=function(t,e,n){let i=n;for(let s=1;s<An;s++)i-=t(i)/e(i);return i}(e,n,5/i);if(i=c(i),isNaN(l))return{stiffness:En.stiffness,damping:En.damping,duration:i};{const t=Math.pow(l,2)*o;return{stiffness:t,damping:2*a*Math.sqrt(o*t),duration:i}}}const An=12;function Cn(t,e){return t*Math.sqrt(1-e*e)}const Pn=["duration","bounce"],Rn=["stiffness","damping","mass"];function Dn(t,e){return e.some((e=>void 0!==t[e]))}function _n(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En.visualDuration,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:En.bounce;const n="object"!==typeof t?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:s}=n;const r=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:r},{stiffness:l,damping:u,mass:d,duration:f,velocity:p,isResolvedFromDuration:m}=function(t){let e={velocity:En.velocity,stiffness:En.stiffness,damping:En.damping,mass:En.mass,isResolvedFromDuration:!1,...t};if(!Dn(t,Rn)&&Dn(t,Pn))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(1.2*n),s=i*i,r=2*Ot(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:En.mass,stiffness:s,damping:r}}else{const n=xn(t);e={...e,...n,mass:En.mass},e.isResolvedFromDuration=!0}return e}({...n,velocity:-h(n.velocity||0)}),g=p||0,y=u/(2*Math.sqrt(l*d)),v=o-r,w=h(Math.sqrt(l/d)),b=Math.abs(v)<5;let T;if(i||(i=b?En.restSpeed.granular:En.restSpeed.default),s||(s=b?En.restDelta.granular:En.restDelta.default),y<1){const t=Cn(w,y);T=e=>{const n=Math.exp(-y*w*e);return o-n*((g+y*w*v)/t*Math.sin(t*e)+v*Math.cos(t*e))}}else if(1===y)T=t=>o-Math.exp(-w*t)*(v+(g+w*v)*t);else{const t=w*Math.sqrt(y*y-1);T=e=>{const n=Math.exp(-y*w*e),i=Math.min(t*e,300);return o-n*((g+y*w*v)*Math.sinh(i)+t*v*Math.cosh(i))/t}}const E={calculatedDuration:m&&f||null,next:t=>{const e=T(t);if(m)a.done=t>=f;else{let n=0;y<1&&(n=0===t?c(g):Tn(T,t,e));const r=Math.abs(n)<=i,l=Math.abs(o-e)<=s;a.done=r&&l}return a.value=a.done?o:e,a},toString:()=>{const t=Math.min(M(E),O),e=P((e=>E.next(t*e).value),t,30);return t+"ms "+e},toTransition:()=>{}};return E}function kn(t){let{keyframes:e,velocity:n=0,power:i=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:u,restDelta:c=.5,restSpeed:h}=t;const d=e[0],f={done:!1,value:d},p=t=>void 0===l?u:void 0===u||Math.abs(l-t)<Math.abs(u-t)?l:u;let m=i*n;const g=d+m,y=void 0===a?g:a(g);y!==g&&(m=y-d);const v=t=>-m*Math.exp(-t/s),w=t=>y+v(t),b=t=>{const e=v(t),n=w(t);f.done=Math.abs(e)<=c,f.value=f.done?y:n};let T,E;const S=t=>{var e;(e=f.value,void 0!==l&&e<l||void 0!==u&&e>u)&&(T=t,E=_n({keyframes:[f.value,p(f.value)],velocity:Tn(w,t,f.value),damping:r,stiffness:o,restDelta:c,restSpeed:h}))};return S(0),{calculatedDuration:null,next:t=>{let e=!1;return E||void 0!==T||(e=!0,b(t),S(t)),void 0!==T&&t>=T?E.next(t-T):(!e&&b(t),f)}}}_n.applyToOptions=t=>{const e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=(arguments.length>2?arguments[2]:void 0)({...t,keyframes:[0,e]}),i=Math.min(M(n),O);return{type:"keyframes",ease:t=>n.next(i*t).value/e,duration:h(i)}}(t,100,_n);return t.ease=C()?e.ease:"easeOut",t.duration=c(e.duration),t.type="keyframes",t};const In=Et(.42,0,1,1),On=Et(0,0,.58,1),Mn=Et(.42,0,.58,1),Nn={linear:a,easeIn:In,easeInOut:Mn,easeOut:On,circIn:Dt,circInOut:kt,circOut:_t,backIn:Ct,backInOut:Pt,backOut:At,anticipate:Rt},Ln=t=>{if(S(t)){t.length;const[e,n,i,s]=t;return Et(e,n,i,s)}return"string"===typeof t?Nn[t]:t};function Vn(t,e){let{clamp:n=!0,ease:i,mixer:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=t.length;if(e.length,1===r)return()=>e[0];if(2===r&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=function(t,e,n){const i=[],s=n||bn,r=t.length-1;for(let o=0;o<r;o++){let n=s(t[o],t[o+1]);if(e){const t=Array.isArray(e)?e[o]||a:e;n=fn(t,n)}i.push(n)}return i}(e,i,s),c=u.length,h=n=>{if(o&&n<t[0])return e[0];let i=0;if(c>1)for(;i<t.length-2&&!(n<t[i+1]);i++);const s=l(t[i],t[i+1],n);return u[i](s)};return n?e=>h(Ot(t[0],t[r-1],e)):h}function Fn(t){const e=[0];return function(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const s=l(0,e,i);t.push(rn(n,1,s))}}(e,t.length-1),e}function Un(t){let{duration:e=300,keyframes:n,times:i,ease:s="easeInOut"}=t;const r=(t=>Array.isArray(t)&&"number"!==typeof t[0])(s)?s.map(Ln):Ln(s),o={done:!1,value:n[0]},a=function(t,e){return t.map((t=>t*e))}(i&&i.length===n.length?i:Fn(n),e),l=Vn(a,n,{ease:Array.isArray(r)?r:(u=n,c=r,u.map((()=>c||Mn)).splice(0,u.length-1))});var u,c;return{calculatedDuration:e,next:t=>(o.value=l(t),o.done=t>=e,o)}}const jn=t=>{const e=e=>{let{timestamp:n}=e;return t(n)};return{start:()=>j.update(e,!0),stop:()=>B(e),now:()=>$.isProcessing?$.timestamp:W.now()}},Bn={decay:kn,inertia:kn,tween:Un,keyframes:Un,spring:_n},$n=t=>t/100;class qn extends sn{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:t}=this.options;t&&t()};const{name:e,motionValue:n,element:i,keyframes:s}=this.options,r=i?.KeyframeResolver||je;this.resolver=new r(s,((t,e)=>this.onKeyframesResolved(t,e)),e,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:e="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:r=0}=this.options,o=N(e)?e:Bn[e]||Un;let a,l;o!==Un&&"number"!==typeof t[0]&&(a=fn($n,bn(t[0],t[1])),t=[0,100]);const u=o({...this.options,keyframes:t});"mirror"===s&&(l=o({...this.options,keyframes:[...t].reverse(),velocity:-r})),null===u.calculatedDuration&&(u.calculatedDuration=M(u));const{calculatedDuration:c}=u,h=c+i;return{generator:u,mirroredGenerator:l,mapPercentToKeyframes:a,calculatedDuration:c,resolvedDuration:h,totalDuration:h*(n+1)-i}}onPostResolved(){const{autoplay:t=!0}=this.options;T.mainThread++,this.play(),"paused"!==this.pendingPlayState&&t?this.state=this.pendingPlayState:this.pause()}tick(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{resolved:n}=this;if(!n){const{keyframes:t}=this.options;return{done:!0,value:t[t.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:r,mapPercentToKeyframes:o,keyframes:a,calculatedDuration:l,totalDuration:u,resolvedDuration:c}=n;if(null===this.startTime)return s.next(0);const{delay:h,repeat:d,repeatType:f,repeatDelay:p,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-u/this.speed,this.startTime)),e?this.currentTime=t:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const g=this.currentTime-h*(this.speed>=0?1:-1),y=this.speed>=0?g<0:g>u;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=u);let v=this.currentTime,w=s;if(d){const t=Math.min(this.currentTime,u)/c;let e=Math.floor(t),n=t%1;!n&&t>=1&&(n=1),1===n&&e--,e=Math.min(e,d+1);Boolean(e%2)&&("reverse"===f?(n=1-n,p&&(n-=p/c)):"mirror"===f&&(w=r)),v=Ot(0,1,n)*c}const b=y?{done:!1,value:a[0]}:w.next(v);o&&(b.value=o(b.value));let{done:T}=b;y||null===l||(T=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const E=null===this.holdTime&&("finished"===this.state||"running"===this.state&&T);return E&&void 0!==i&&(b.value=nn(a,this.options,i)),m&&m(b.value),E&&this.finish(),b}get duration(){const{resolved:t}=this;return t?h(t.calculatedDuration):0}get time(){return h(this.currentTime)}set time(t){t=c(t),this.currentTime=t,null!==this.holdTime||0===this.speed?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=h(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:t=jn,onPlay:e,startTime:n}=this.options;this.driver||(this.driver=t((t=>this.tick(t)))),e&&e();const i=this.driver.now();null!==this.holdTime?this.startTime=i-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=i):this.startTime=n??this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){this._resolved?(this.state="paused",this.holdTime=this.currentTime??0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel(),T.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}get finished(){return this.currentFinishedPromise}}const zn=new Set(["opacity","clipPath","filter","transform"]),Kn=o((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));const Gn={anticipate:Rt,backInOut:Pt,circInOut:kt};class Hn extends sn{constructor(t){super(t);const{name:e,motionValue:n,element:i,keyframes:s}=this.options;this.resolver=new Je(s,((t,e)=>this.onKeyframesResolved(t,e)),e,n,i),this.resolver.scheduleResolve()}initPlayback(t,e){let{duration:n=300,times:i,ease:s,type:r,motionValue:o,name:a,startTime:l}=this.options;if(!o.owner||!o.owner.current)return!1;var u;if("string"===typeof s&&C()&&s in Gn&&(s=Gn[s]),N((u=this.options).type)||"spring"===u.type||!L(u.ease)){const{onComplete:e,onUpdate:o,motionValue:a,element:l,...u}=this.options,c=function(t,e){const n=new qn({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const s=[];let r=0;for(;!i.done&&r<2e4;)i=n.sample(r),s.push(i.value),r+=10;return{times:void 0,keyframes:s,duration:r-10,ease:"linear"}}(t,u);1===(t=c.keyframes).length&&(t[1]=t[0]),n=c.duration,i=c.times,s=c.ease,r="keyframes"}const c=k(o.owner.current,a,t,{...this.options,duration:n,times:i,ease:s});return c.startTime=l??this.calcStartTime(),this.pendingTimeline?(V(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:n}=this.options;o.set(nn(t,this.options,e)),n&&n(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:n,times:i,type:r,ease:s,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:e}=t;return h(e)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:e}=t;return h(e.currentTime||0)}set time(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.currentTime=c(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:e}=t;return e.playbackRate}get finished(){return this.resolved.animation.finished}set speed(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:e}=t;return e.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:e}=t;return e.startTime}attachTimeline(t){if(this._resolved){const{resolved:e}=this;if(!e)return a;const{animation:n}=e;V(n,t)}else this.pendingTimeline=t;return a}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:e}=t;"finished"===e.playState&&this.updateFinishedPromise(),e.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:e,keyframes:n,duration:i,type:s,ease:r,times:o}=t;if("idle"===e.playState||"finished"===e.playState)return;if(this.time){const{motionValue:t,onUpdate:e,onComplete:a,element:l,...u}=this.options,h=new qn({...u,keyframes:n,duration:i,type:s,ease:r,times:o,isGenerator:!0}),d=c(this.time);t.setWithVelocity(h.sample(d-10).value,h.sample(d).value,10)}const{onStop:a}=this.options;a&&a(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:s,damping:r,type:o}=t;if(!e||!e.owner||!(e.owner.current instanceof HTMLElement))return!1;const{onUpdate:a,transformTemplate:l}=e.owner.getProps();return Kn()&&n&&zn.has(n)&&("transform"!==n||!l)&&!a&&!i&&"mirror"!==s&&0!==r&&"inertia"!==o}}const Wn={type:"spring",stiffness:500,damping:25,restSpeed:10},Xn={type:"keyframes",duration:.8},Qn={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Yn=(t,e)=>{let{keyframes:n}=e;return n.length>2?Xn:ht.has(t)?t.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:Wn:Qn};const Jn=function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return a=>{const l=I(i,t)||{},u=l.delay||i.delay||0;let{elapsed:h=0}=i;h-=c(u);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-h,onUpdate:t=>{e.set(t),l.onUpdate&&l.onUpdate(t)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:o?void 0:s};(function(t){let{when:e,delay:n,delayChildren:i,staggerChildren:s,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:l,from:u,elapsed:c,...h}=t;return!!Object.keys(h).length})(l)||(d={...d,...Yn(t,d)}),d.duration&&(d.duration=c(d.duration)),d.repeatDelay&&(d.repeatDelay=c(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let f=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(d.duration=0,0===d.delay&&(f=!0)),(bt||r.skipAnimations)&&(f=!0,d.duration=0,d.delay=0),d.allowFlatten=!l.type&&!l.ease,f&&!o&&void 0!==e.get()){const t=nn(d.keyframes,l);if(void 0!==t)return j.update((()=>{d.onUpdate(t),d.onComplete()})),new b([])}return!o&&Hn.supports(d)?new Hn(d):new qn(d)}};function Zn(t,e){let{protectedKeys:n,needsAnimating:i}=t;const s=n.hasOwnProperty(e)&&!0!==i[e];return i[e]=!1,s}function ti(t,e){let{delay:n=0,transitionOverride:i,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:r=t.getDefaultTransition(),transitionEnd:o,...a}=e;i&&(r=i);const l=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const c in a){const e=t.getValue(c,t.latestValues[c]??null),i=a[c];if(void 0===i||u&&Zn(u,c))continue;const s={delay:n,...I(r||{},c)};let o=!1;if(window.MotionHandoffAnimation){const e=wt(t);if(e){const t=window.MotionHandoffAnimation(e,c,j);null!==t&&(s.startTime=t,o=!0)}}gt(t,c),e.start(Jn(c,e,i,t.shouldReduceMotion&&dt.has(c)?{type:!1}:s,t,o));const h=e.animation;h&&l.push(h)}return o&&Promise.all(l).then((()=>{j.update((()=>{o&&function(t,e){const n=y(t,e);let{transitionEnd:i={},transition:s={},...r}=n||{};r={...r,...i};for(const a in r)pt(t,a,(o=r[a],ft(o)?o[o.length-1]||0:o));var o}(t,o)}))})),l}function ei(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=y(t,e,"exit"===n.type?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const r=i?()=>Promise.all(ti(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:r=0,staggerChildren:o,staggerDirection:a}=s;return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5?arguments[5]:void 0;const o=[],a=(t.variantChildren.size-1)*i,l=1===s?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*i}:function(){return a-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*i};return Array.from(t.variantChildren).sort(ni).forEach(((t,i)=>{t.notify("AnimationStart",e),o.push(ei(t,e,{...r,delay:n+l(i)}).then((()=>t.notify("AnimationComplete",e))))})),Promise.all(o)}(t,e,r+i,o,a,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[t,e]="beforeChildren"===a?[r,o]:[o,r];return t().then((()=>e()))}return Promise.all([r(),o(n.delay)])}function ni(t,e){return t.sortNodePosition(e)}function ii(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function si(t){return"string"===typeof t||Array.isArray(t)}const ri=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],oi=["initial",...ri],ai=oi.length;function li(t){if(!t)return;if(!t.isControllingVariants){const e=t.parent&&li(t.parent)||{};return void 0!==t.props.initial&&(e.initial=t.props.initial),e}const e={};for(let n=0;n<ai;n++){const i=oi[n],s=t.props[i];(si(s)||!1===s)&&(e[i]=s)}return e}const ui=[...ri].reverse(),ci=ri.length;function hi(t){return e=>Promise.all(e.map((e=>{let{animation:n,options:i}=e;return function(t,e){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t.notify("AnimationStart",e),Array.isArray(e)){const s=e.map((e=>ei(t,e,i)));n=Promise.all(s)}else if("string"===typeof e)n=ei(t,e,i);else{const s="function"===typeof e?y(t,e,i.custom):e;n=Promise.all(ti(t,s,i))}return n.then((()=>{t.notify("AnimationComplete",e)}))}(t,n,i)})))}function di(t){let e=hi(t),n=mi(),i=!0;const s=e=>(n,i)=>{const s=y(t,i,"exit"===e?t.presenceContext?.custom:void 0);if(s){const{transition:t,transitionEnd:e,...i}=s;n={...n,...i,...e}}return n};function r(r){const{props:o}=t,a=li(t.parent)||{},l=[],u=new Set;let c={},h=1/0;for(let e=0;e<ci;e++){const d=ui[e],f=n[d],m=void 0!==o[d]?o[d]:a[d],g=si(m),y=d===r?f.isActive:null;!1===y&&(h=e);let v=m===a[d]&&m!==o[d]&&g;if(v&&i&&t.manuallyAnimateOnMount&&(v=!1),f.protectedKeys={...c},!f.isActive&&null===y||!m&&!f.prevProp||p(m)||"boolean"===typeof m)continue;const w=fi(f.prevProp,m);let b=w||d===r&&f.isActive&&!v&&g||e>h&&g,T=!1;const E=Array.isArray(m)?m:[m];let S=E.reduce(s(d),{});!1===y&&(S={});const{prevResolvedValues:x={}}=f,A={...x,...S},C=e=>{b=!0,u.has(e)&&(T=!0,u.delete(e)),f.needsAnimating[e]=!0;const n=t.getValue(e);n&&(n.liveStyle=!1)};for(const t in A){const e=S[t],n=x[t];if(c.hasOwnProperty(t))continue;let i=!1;i=ft(e)&&ft(n)?!ii(e,n):e!==n,i?void 0!==e&&null!==e?C(t):u.add(t):void 0!==e&&u.has(t)?C(t):f.protectedKeys[t]=!0}f.prevProp=m,f.prevResolvedValues=S,f.isActive&&(c={...c,...S}),i&&t.blockInitialAnimation&&(b=!1);b&&(!(v&&w)||T)&&l.push(...E.map((t=>({animation:t,options:{type:d}}))))}if(u.size){const e={};if("boolean"!==typeof o.initial){const n=y(t,Array.isArray(o.initial)?o.initial[0]:o.initial);n&&n.transition&&(e.transition=n.transition)}u.forEach((n=>{const i=t.getBaseTarget(n),s=t.getValue(n);s&&(s.liveStyle=!0),e[n]=i??null})),l.push({animation:e})}let d=Boolean(l.length);return!i||!1!==o.initial&&o.initial!==o.animate||t.manuallyAnimateOnMount||(d=!1),i=!1,d?e(l):Promise.resolve()}return{animateChanges:r,setActive:function(e,i){if(n[e].isActive===i)return Promise.resolve();t.variantChildren?.forEach((t=>t.animationState?.setActive(e,i))),n[e].isActive=i;const s=r(e);for(const t in n)n[t].protectedKeys={};return s},setAnimateFunction:function(n){e=n(t)},getState:()=>n,reset:()=>{n=mi(),i=!0}}}function fi(t,e){return"string"===typeof e?e!==t:!!Array.isArray(e)&&!ii(e,t)}function pi(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function mi(){return{animate:pi(!0),whileInView:pi(),whileHover:pi(),whileTap:pi(),whileDrag:pi(),whileFocus:pi(),exit:pi()}}class gi{constructor(t){this.isMounted=!1,this.node=t}update(){}}let yi=0;const vi={animation:{Feature:class extends gi{constructor(t){super(t),t.animationState||(t.animationState=di(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();p(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends gi{constructor(){super(...arguments),this.id=yi++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t);e&&!t&&i.then((()=>{e(this.id)}))}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}}};function wi(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function bi(t){return{point:{x:t.pageX,y:t.pageY}}}function Ti(t,e,n,i){return wi(t,e,(t=>e=>tt(e)&&t(e,bi(e)))(n),i)}function Ei(t){let{top:e,left:n,right:i,bottom:s}=t;return{x:{min:n,max:i},y:{min:e,max:s}}}function Si(t){return t.max-t.min}function xi(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;t.origin=i,t.originPoint=rn(e.min,e.max,t.origin),t.scale=Si(n)/Si(e),t.translate=rn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=.9999&&t.scale<=1.0001||isNaN(t.scale))&&(t.scale=1),(t.translate>=-.01&&t.translate<=.01||isNaN(t.translate))&&(t.translate=0)}function Ai(t,e,n,i){xi(t.x,e.x,n.x,i?i.originX:void 0),xi(t.y,e.y,n.y,i?i.originY:void 0)}function Ci(t,e,n){t.min=n.min+e.min,t.max=t.min+Si(e)}function Pi(t,e,n){t.min=e.min-n.min,t.max=t.min+Si(e)}function Ri(t,e,n){Pi(t.x,e.x,n.x),Pi(t.y,e.y,n.y)}const Di=()=>({x:{min:0,max:0},y:{min:0,max:0}});function _i(t){return[t("x"),t("y")]}function ki(t){return void 0===t||1===t}function Ii(t){let{scale:e,scaleX:n,scaleY:i}=t;return!ki(e)||!ki(n)||!ki(i)}function Oi(t){return Ii(t)||Mi(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Mi(t){return Ni(t.x)||Ni(t.y)}function Ni(t){return t&&"0%"!==t}function Li(t,e,n){return n+e*(t-n)}function Vi(t,e,n,i,s){return void 0!==s&&(t=Li(t,s,i)),Li(t,n,i)+e}function Fi(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;t.min=Vi(t.min,e,n,i,s),t.max=Vi(t.max,e,n,i,s)}function Ui(t,e){let{x:n,y:i}=e;Fi(t.x,n.translate,n.scale,n.originPoint),Fi(t.y,i.translate,i.scale,i.originPoint)}const ji=.999999999999,Bi=1.0000000000001;function $i(t,e){t.min=t.min+e,t.max=t.max+e}function qi(t,e,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;Fi(t,e,n,rn(t.min,t.max,s),i)}function zi(t,e){qi(t.x,e.x,e.scaleX,e.scale,e.originX),qi(t.y,e.y,e.scaleY,e.scale,e.originY)}function Ki(t,e){return Ei(function(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}(t.getBoundingClientRect(),e))}const Gi=t=>{let{current:e}=t;return e?e.ownerDocument.defaultView:null};function Hi(t){return t&&"object"===typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}const Wi=(t,e)=>Math.abs(t-e);class Xi{constructor(t,e){let{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const t=Ji(this.lastMoveEventInfo,this.history),e=null!==this.startEvent,n=function(t,e){const n=Wi(t.x,e.x),i=Wi(t.y,e.y);return Math.sqrt(n**2+i**2)}(t.offset,{x:0,y:0})>=3;if(!e&&!n)return;const{point:i}=t,{timestamp:s}=$;this.history.push({...i,timestamp:s});const{onStart:r,onMove:o}=this.handlers;e||(r&&r(this.lastMoveEvent,t),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,t)},this.handlePointerMove=(t,e)=>{this.lastMoveEvent=t,this.lastMoveEventInfo=Qi(e,this.transformPagePoint),j.update(this.updatePoint,!0)},this.handlePointerUp=(t,e)=>{this.end();const{onEnd:n,onSessionEnd:i,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const r=Ji("pointercancel"===t.type?this.lastMoveEventInfo:Qi(e,this.transformPagePoint),this.history);this.startEvent&&n&&n(t,r),i&&i(t,r)},!tt(t))return;this.dragSnapToOrigin=s,this.handlers=e,this.transformPagePoint=n,this.contextWindow=i||window;const r=Qi(bi(t),this.transformPagePoint),{point:o}=r,{timestamp:a}=$;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=e;l&&l(t,Ji(r,this.history)),this.removeListeners=fn(Ti(this.contextWindow,"pointermove",this.handlePointerMove),Ti(this.contextWindow,"pointerup",this.handlePointerUp),Ti(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),B(this.updatePoint)}}function Qi(t,e){return e?{point:e(t.point)}:t}function Yi(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ji(t,e){let{point:n}=t;return{point:n,delta:Yi(n,ts(e)),offset:Yi(n,Zi(e)),velocity:es(e,.1)}}function Zi(t){return t[0]}function ts(t){return t[t.length-1]}function es(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const s=ts(t);for(;n>=0&&(i=t[n],!(s.timestamp-i.timestamp>c(e)));)n--;if(!i)return{x:0,y:0};const r=h(s.timestamp-i.timestamp);if(0===r)return{x:0,y:0};const o={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ns(t,e,n){return{min:void 0!==e?t.min+e:void 0,max:void 0!==n?t.max+n-(t.max-t.min):void 0}}function is(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}const ss=.35;function rs(t,e,n){return{min:os(t,e),max:os(t,n)}}function os(t,e){return"number"===typeof t?t:t[e]||0}const as=new WeakMap;class ls{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=t}start(t){let{snapToCursor:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:i}=this.getProps();this.panSession=new Xi(t,{onSessionStart:t=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(bi(t).point)},onStart:(t,e)=>{const{drag:n,dragPropagation:i,onDragStart:s}=this.getProps();if(n&&!i&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(r=n)||"y"===r?X[r]?null:(X[r]=!0,()=>{X[r]=!1}):X.x||X.y?null:(X.x=X.y=!0,()=>{X.x=X.y=!1}),!this.openDragLock))return;var r;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_i((t=>{let e=this.getAxisMotionValue(t).get()||0;if(Ht.test(e)){const{projection:n}=this.visualElement;if(n&&n.layout){const i=n.layout.layoutBox[t];if(i){e=Si(i)*(parseFloat(e)/100)}}}this.originPoint[t]=e})),s&&j.postRender((()=>s(t,e))),gt(this.visualElement,"transform");const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(t,e)=>{const{dragPropagation:n,dragDirectionLock:i,onDirectionLock:s,onDrag:r}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:o}=e;if(i&&null===this.currentDirection)return this.currentDirection=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x");return n}(o),void(null!==this.currentDirection&&s&&s(this.currentDirection));this.updateAxis("x",e.point,o),this.updateAxis("y",e.point,o),this.visualElement.render(),r&&r(t,e)},onSessionEnd:(t,e)=>this.stop(t,e),resumeAnimation:()=>_i((t=>"paused"===this.getAnimationState(t)&&this.getAxisMotionValue(t).animation?.play()))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,contextWindow:Gi(this.visualElement)})}stop(t,e){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=e;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&j.postRender((()=>s(t,e)))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:i}=this.getProps();if(!n||!us(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let r=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(r=function(t,e,n){let{min:i,max:s}=e;return void 0!==i&&t<i?t=n?rn(i,t,n.min):Math.max(t,i):void 0!==s&&t>s&&(t=n?rn(s,t,n.max):Math.min(t,s)),t}(r,this.constraints[t],this.elastic[t])),s.set(r)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&Hi(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!n)&&function(t,e){let{top:n,left:i,bottom:s,right:r}=e;return{x:ns(t.x,i,r),y:ns(t.y,n,s)}}(n.layoutBox,t),this.elastic=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss;return!1===t?t=0:!0===t&&(t=ss),{x:rs(t,"left","right"),y:rs(t,"top","bottom")}}(e),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&_i((t=>{!1!==this.constraints&&this.getAxisMotionValue(t)&&(this.constraints[t]=function(t,e){const n={};return void 0!==e.min&&(n.min=e.min-t.min),void 0!==e.max&&(n.max=e.max-t.min),n}(n.layoutBox[t],this.constraints[t]))}))}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Hi(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=function(t,e,n){const i=Ki(t,n),{scroll:s}=e;return s&&($i(i.x,s.offset.x),$i(i.y,s.offset.y)),i}(n,i.root,this.visualElement.getTransformPagePoint());let r=function(t,e){return{x:is(t.x,e.x),y:is(t.y,e.y)}}(i.layout.layoutBox,s);if(e){const t=e(function(t){let{x:e,y:n}=t;return{top:n.min,right:e.max,bottom:n.max,left:e.min}}(r));this.hasMutatedConstraints=!!t,t&&(r=Ei(t))}return r}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:r,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{},l=_i((o=>{if(!us(o,e,this.currentDirection))return;let l=a&&a[o]||{};r&&(l={min:0,max:0});const u=i?200:1e6,c=i?40:1e7,h={type:"inertia",velocity:n?t[o]:0,bounceStiffness:u,bounceDamping:c,timeConstant:750,restDelta:1,restSpeed:10,...s,...l};return this.startAxisValueAnimation(o,h)}));return Promise.all(l).then(o)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return gt(this.visualElement,t),n.start(Jn(t,n,0,e,this.visualElement,!1))}stopAnimation(){_i((t=>this.getAxisMotionValue(t).stop()))}pauseAnimation(){_i((t=>this.getAxisMotionValue(t).animation?.pause()))}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),i=n[e];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){_i((e=>{const{drag:n}=this.getProps();if(!us(e,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(e);if(i&&i.layout){const{min:n,max:r}=i.layout.layoutBox[e];s.set(t[e]-rn(n,r,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Hi(e)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};_i((t=>{const e=this.getAxisMotionValue(t);if(e&&!1!==this.constraints){const n=e.get();i[t]=function(t,e){let n=.5;const i=Si(t),s=Si(e);return s>i?n=l(e.min,e.max-i,t.min):i>s&&(n=l(t.min,t.max-s,e.min)),Ot(0,1,n)}({min:n,max:n},this.constraints[t])}}));const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),_i((e=>{if(!us(e,t,null))return;const n=this.getAxisMotionValue(e),{min:s,max:r}=this.constraints[e];n.set(rn(s,r,i[e]))}))}addListeners(){if(!this.visualElement.current)return;as.set(this.visualElement,this);const t=Ti(this.visualElement.current,"pointerdown",(t=>{const{drag:e,dragListener:n=!0}=this.getProps();e&&n&&this.start(t)})),e=()=>{const{dragConstraints:t}=this.getProps();Hi(t)&&t.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",e);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),j.read(e);const s=wi(window,"resize",(()=>this.scalePositionWithinConstraints())),r=n.addEventListener("didUpdate",(t=>{let{delta:e,hasLayoutChanged:n}=t;this.isDragging&&n&&(_i((t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))})),this.visualElement.render())}));return()=>{s(),t(),i(),r&&r()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:r=ss,dragMomentum:o=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:r,dragMomentum:o}}}function us(t,e,n){return(!0===e||e===t)&&(null===n||n===t)}const cs=t=>(e,n)=>{t&&j.postRender((()=>t(e,n)))};var hs=n(579),ds=n(43),fs=n(917),ps=n(190);const ms=(0,ds.createContext)({}),gs={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ys(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const vs={correct:(t,e)=>{if(!e.target)return t;if("string"===typeof t){if(!Wt.test(t))return t;t=parseFloat(t)}return`${ys(t,e.target.x)}% ${ys(t,e.target.y)}%`}},ws={correct:(t,e)=>{let{treeScale:n,projectionDelta:i}=e;const s=t,r=le.parse(t);if(r.length>5)return s;const o=le.createTransformer(t),a="number"!==typeof r[0]?1:0,l=i.x.scale*n.x,u=i.y.scale*n.y;r[0+a]/=l,r[1+a]/=u;const c=rn(l,u,.5);return"number"===typeof r[2+a]&&(r[2+a]/=c),"number"===typeof r[3+a]&&(r[3+a]/=c),o(r)}},bs={};class Ts extends ds.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=t;!function(t){for(const e in t)bs[e]=t[e],qe(e)&&(bs[e].isCSSVariable=!0)}(Ss),s&&(e.group&&e.group.add(s),n&&n.register&&i&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",(()=>{this.safeToRemove()})),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),gs.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:i,isPresent:s}=this.props,r=n.projection;return r?(r.isPresent=s,i||t.layoutDependency!==e||void 0===e||t.isPresent!==s?r.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?r.promote():r.relegate()||j.postRender((()=>{const t=r.getStack();t&&t.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),z.postRender((()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Es(t){const[e,n]=(0,fs.xQ)(),i=(0,ds.useContext)(ps.L);return(0,hs.jsx)(Ts,{...t,layoutGroup:i,switchLayoutGroup:(0,ds.useContext)(ms),isPresent:e,safeToRemove:n})}const Ss={borderRadius:{...vs,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:vs,borderTopRightRadius:vs,borderBottomLeftRadius:vs,borderBottomRightRadius:vs,boxShadow:ws};const xs=(t,e)=>t.depth-e.depth;class As{constructor(){this.children=[],this.isDirty=!1}add(t){i(this.children,t),this.isDirty=!0}remove(t){s(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(xs),this.isDirty=!1,this.children.forEach(t)}}function Cs(t,e){const n=W.now(),i=s=>{let{timestamp:r}=s;const o=r-n;o>=e&&(B(i),t(o-e))};return j.read(i,!0),()=>B(i)}function Ps(t){const e=mt(t)?t.get():t;return n=e,Boolean(n&&"object"===typeof n&&n.mix&&n.toValue)?e.toValue():e;var n}const Rs=["TopLeft","TopRight","BottomLeft","BottomRight"],Ds=Rs.length,_s=t=>"string"===typeof t?parseFloat(t):t,ks=t=>"number"===typeof t||Wt.test(t);function Is(t,e){return void 0!==t[e]?t[e]:t.borderRadius}const Os=Ns(0,.5,_t),Ms=Ns(.5,.95,a);function Ns(t,e,n){return i=>i<t?0:i>e?1:n(l(t,e,i))}function Ls(t,e){t.min=e.min,t.max=e.max}function Vs(t,e){Ls(t.x,e.x),Ls(t.y,e.y)}function Fs(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Us(t,e,n,i,s){return t=Li(t-=e,1/n,i),void 0!==s&&(t=Li(t,1/s,i)),t}function js(t,e,n,i,s){let[r,o,a]=n;!function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:t;Ht.test(e)&&(e=parseFloat(e),e=rn(o.min,o.max,e/100)-o.min);if("number"!==typeof e)return;let a=rn(r.min,r.max,i);t===r&&(a-=e),t.min=Us(t.min,e,n,a,s),t.max=Us(t.max,e,n,a,s)}(t,e[r],e[o],e[a],e.scale,i,s)}const Bs=["x","scaleX","originX"],$s=["y","scaleY","originY"];function qs(t,e,n,i){js(t.x,e,Bs,n?n.x:void 0,i?i.x:void 0),js(t.y,e,$s,n?n.y:void 0,i?i.y:void 0)}function zs(t){return 0===t.translate&&1===t.scale}function Ks(t){return zs(t.x)&&zs(t.y)}function Gs(t,e){return t.min===e.min&&t.max===e.max}function Hs(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Ws(t,e){return Hs(t.x,e.x)&&Hs(t.y,e.y)}function Xs(t){return Si(t.x)/Si(t.y)}function Qs(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Ys{constructor(){this.members=[]}add(t){i(this.members,t),t.scheduleRender()}remove(t){if(s(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(t){const e=this.members.findIndex((e=>t===e));if(0===e)return!1;let n;for(let i=e;i>=0;i--){const t=this.members[i];if(!1!==t.isPresent){n=t;break}}return!!n&&(this.promote(n),!0)}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;!1===i&&n.hide()}}exitAnimationComplete(){this.members.forEach((t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((t=>{t.instance&&t.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Js={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},Zs=["","X","Y","Z"],tr={visibility:"hidden"};let er=0;function nr(t,e,n,i){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),i&&(i[t]=0))}function ir(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=wt(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:e,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",j,!(e||i))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&ir(i)}function sr(t){let{attachResizeListener:e,defaultParent:n,measureScroll:i,checkIsScrollRoot:s,resetTransform:r}=t;return class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n?.();this.id=er++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,E.value&&(Js.nodes=Js.calculatedTargetDeltas=Js.calculatedProjections=0),this.nodes.forEach(ar),this.nodes.forEach(pr),this.nodes.forEach(mr),this.nodes.forEach(lr),E.addProjectionMetrics&&E.addProjectionMetrics(Js)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=t,this.root=e?e.root||e:this,this.path=e?[...e.path,e]:[],this.parent=e,this.depth=e?e.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new As)}addEventListener(t,e){return this.eventHandlers.has(t)||this.eventHandlers.set(t,new u),this.eventHandlers.get(t).add(e)}notifyListeners(t){const e=this.eventHandlers.get(t);for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];e&&e.notify(...i)}hasListeners(t){return this.eventHandlers.has(t)}mount(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var i;this.isSVG=(i=t)instanceof SVGElement&&"svg"!==i.tagName,this.instance=t;const{layoutId:s,layout:r,visualElement:o}=this.options;if(o&&!o.current&&o.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(r||s)&&(this.isLayoutDirty=!0),e){let n;const i=()=>this.root.updateBlockedByResize=!1;e(t,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=Cs(i,250),gs.hasAnimatedSinceResize&&(gs.hasAnimatedSinceResize=!1,this.nodes.forEach(fr))}))}s&&this.root.registerSharedNode(s,this),!1!==this.options.animate&&o&&(s||r)&&this.addEventListener("didUpdate",(t=>{let{delta:e,hasLayoutChanged:n,hasRelativeLayoutChanged:i,layout:s}=t;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const r=this.options.transition||o.getDefaultTransition()||Tr,{onLayoutAnimationStart:a,onLayoutAnimationComplete:l}=o.getProps(),u=!this.targetLayout||!Ws(this.targetLayout,s),c=!n&&i;if(this.options.layoutRoot||this.resumeFrom||c||n&&(u||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,c);const t={...I(r,"layout"),onPlay:a,onComplete:l};(o.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else n||fr(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=s}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const t=this.getStack();t&&t.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,B(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(gr),this.animationId++)}getTransformTemplate(){const{visualElement:t}=this.options;return t&&t.getProps().transformTemplate}willUpdate(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ir(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const t=this.path[s];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}const{layoutId:e,layout:n}=this.options;if(void 0===e&&!n)return;const i=this.getTransformTemplate();this.prevTransformTemplateValue=i?i(this.latestValues,""):void 0,this.updateSnapshot(),t&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(cr);this.isUpdating||this.nodes.forEach(hr),this.isUpdating=!1,this.nodes.forEach(dr),this.nodes.forEach(rr),this.nodes.forEach(or),this.clearAllSnapshots();const t=W.now();$.delta=Ot(0,1e3/60,t-$.timestamp),$.timestamp=t,$.isProcessing=!0,q.update.process($),q.preRender.process($),q.render.process($),$.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,z.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ur),this.sharedNodes.forEach(yr)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,j.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){j.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||Si(this.snapshot.measuredBox.x)||Si(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const t=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:e}=this.options;e&&e.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}updateScroll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",e=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===t&&(e=!1),e){const e=s(this.instance);this.scroll={animationId:this.root.animationId,phase:t,isRoot:e,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:e}}}resetTransform(){if(!r)return;const t=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,e=this.projectionDelta&&!Ks(this.projectionDelta),n=this.getTransformTemplate(),i=n?n(this.latestValues,""):void 0,s=i!==this.prevTransformTemplateValue;t&&(e||Oi(this.latestValues)||s)&&(r(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this.measurePageBox();let n=this.removeElementScroll(e);var i;return t&&(n=this.removeTransform(n)),xr((i=n).x),xr(i.y),{animationId:this.root.animationId,measuredBox:e,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const e=t.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Cr))){const{scroll:t}=this.root;t&&($i(e.x,t.offset.x),$i(e.y,t.offset.y))}return e}removeElementScroll(t){const e={x:{min:0,max:0},y:{min:0,max:0}};if(Vs(e,t),this.scroll?.wasRoot)return e;for(let n=0;n<this.path.length;n++){const i=this.path[n],{scroll:s,options:r}=i;i!==this.root&&s&&r.layoutScroll&&(s.wasRoot&&Vs(e,t),$i(e.x,s.offset.x),$i(e.y,s.offset.y))}return e}applyTransform(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};Vs(n,t);for(let i=0;i<this.path.length;i++){const t=this.path[i];!e&&t.options.layoutScroll&&t.scroll&&t!==t.root&&zi(n,{x:-t.scroll.offset.x,y:-t.scroll.offset.y}),Oi(t.latestValues)&&zi(n,t.latestValues)}return Oi(this.latestValues)&&zi(n,this.latestValues),n}removeTransform(t){const e={x:{min:0,max:0},y:{min:0,max:0}};Vs(e,t);for(let n=0;n<this.path.length;n++){const t=this.path[n];if(!t.instance)continue;if(!Oi(t.latestValues))continue;Ii(t.latestValues)&&t.updateSnapshot();const i={x:{min:0,max:0},y:{min:0,max:0}};Vs(i,t.measurePageBox()),qs(e,t.latestValues,t.snapshot?t.snapshot.layoutBox:void 0,i)}return Oi(this.latestValues)&&qs(e,this.latestValues),e}setTargetDelta(t){this.targetDelta=t,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(t){this.options={...this.options,...t,crossfade:void 0===t.crossfade||t.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=e.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=e.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=e.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==e;if(!(t||n&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:i,layoutId:s}=this.options;if(this.layout&&(i||s)){if(this.resolvedRelativeTargetAt=$.timestamp,!this.targetDelta&&!this.relativeTarget){const t=this.getClosestProjectingParent();t&&t.layout&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Ri(this.relativeTargetOrigin,this.layout.layoutBox,t.layout.layoutBox),Vs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var r,o,a;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),r=this.target,o=this.relativeTarget,a=this.relativeParent.target,Ci(r.x,o.x,a.x),Ci(r.y,o.y,a.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Vs(this.target,this.layout.layoutBox),Ui(this.target,this.targetDelta)):Vs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const t=this.getClosestProjectingParent();t&&Boolean(t.resumingFrom)===Boolean(this.resumingFrom)&&!t.options.layoutScroll&&t.target&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Ri(this.relativeTargetOrigin,this.target,t.target),Vs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}E.value&&Js.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Ii(this.parent.latestValues)&&!Mi(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const t=this.getLead(),e=Boolean(this.resumingFrom)||this!==t;let n=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(n=!1),e&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===$.timestamp&&(n=!1),n)return;const{layout:i,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!s)return;Vs(this.layoutCorrected,this.layout.layoutBox);const r=this.treeScale.x,o=this.treeScale.y;!function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=n.length;if(!s)return;let r,o;e.x=e.y=1;for(let a=0;a<s;a++){r=n[a],o=r.projectionDelta;const{visualElement:s}=r.options;s&&s.props.style&&"contents"===s.props.style.display||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&zi(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Ui(t,o)),i&&Oi(r.latestValues)&&zi(t,r.latestValues))}e.x<Bi&&e.x>ji&&(e.x=1),e.y<Bi&&e.y>ji&&(e.y=1)}(this.layoutCorrected,this.treeScale,this.path,e),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:a}=t;a?(this.projectionDelta&&this.prevProjectionDelta?(Fs(this.prevProjectionDelta.x,this.projectionDelta.x),Fs(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Ai(this.projectionDelta,this.layoutCorrected,a,this.latestValues),this.treeScale.x===r&&this.treeScale.y===o&&Qs(this.projectionDelta.x,this.prevProjectionDelta.x)&&Qs(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",a)),E.value&&Js.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.visualElement?.scheduleRender(),t){const t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,i=n?n.latestValues:{},s={...this.latestValues},r={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!e;const o={x:{min:0,max:0},y:{min:0,max:0}},a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),u=!l||l.members.length<=1,c=Boolean(a&&!u&&!0===this.options.crossfade&&!this.path.some(br));let h;this.animationProgress=0,this.mixTargetDelta=e=>{const n=e/1e3;var l,d,f,p,m,g;vr(r.x,t.x,n),vr(r.y,t.y,n),this.setTargetDelta(r),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ri(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),f=this.relativeTarget,p=this.relativeTargetOrigin,m=o,g=n,wr(f.x,p.x,m.x,g),wr(f.y,p.y,m.y,g),h&&(l=this.relativeTarget,d=h,Gs(l.x,d.x)&&Gs(l.y,d.y))&&(this.isProjectionDirty=!1),h||(h={x:{min:0,max:0},y:{min:0,max:0}}),Vs(h,this.relativeTarget)),a&&(this.animationValues=s,function(t,e,n,i,s,r){s?(t.opacity=rn(0,void 0!==n.opacity?n.opacity:1,Os(i)),t.opacityExit=rn(void 0!==e.opacity?e.opacity:1,0,Ms(i))):r&&(t.opacity=rn(void 0!==e.opacity?e.opacity:1,void 0!==n.opacity?n.opacity:1,i));for(let o=0;o<Ds;o++){const s=`border${Rs[o]}Radius`;let r=Is(e,s),a=Is(n,s);void 0===r&&void 0===a||(r||(r=0),a||(a=0),0===r||0===a||ks(r)===ks(a)?(t[s]=Math.max(rn(_s(r),_s(a),i),0),(Ht.test(a)||Ht.test(r))&&(t[s]+="%")):t[s]=a)}(e.rotate||n.rotate)&&(t.rotate=rn(e.rotate||0,n.rotate||0,i))}(s,i,this.latestValues,n,c,u)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(t){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(B(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=j.update((()=>{gs.hasAnimatedSinceResize=!0,T.layout++,this.currentAnimation=function(t,e,n){const i=mt(t)?t:ut(t);return i.start(Jn("",i,e,n)),i.animation}(0,1e3,{...t,onUpdate:e=>{this.mixTargetDelta(e),t.onUpdate&&t.onUpdate(e)},onStop:()=>{T.layout--},onComplete:()=>{T.layout--,t.onComplete&&t.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const t=this.getStack();t&&t.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const t=this.getLead();let{targetWithTransforms:e,target:n,layout:i,latestValues:s}=t;if(e&&n&&i){if(this!==t&&this.layout&&i&&Ar(this.options.animationType,this.layout.layoutBox,i.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const e=Si(this.layout.layoutBox.x);n.x.min=t.target.x.min,n.x.max=n.x.min+e;const i=Si(this.layout.layoutBox.y);n.y.min=t.target.y.min,n.y.max=n.y.min+i}Vs(e,n),zi(e,s),Ai(this.projectionDeltaWithTransform,this.layoutCorrected,e,s)}}registerSharedNode(t,e){this.sharedNodes.has(t)||this.sharedNodes.set(t,new Ys);this.sharedNodes.get(t).add(e);const n=e.options.initialPromotionConfig;e.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(e):void 0})}isLead(){const t=this.getStack();return!t||t.lead===this}getLead(){const{layoutId:t}=this.options;return t&&this.getStack()?.lead||this}getPrevLead(){const{layoutId:t}=this.options;return t?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:t}=this.options;if(t)return this.root.sharedNodes.get(t)}promote(){let{needsReset:t,transition:e,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this.getStack();i&&i.promote(this,n),t&&(this.projectionDelta=void 0,this.needsReset=!0),e&&this.setOptions({transition:e})}relegate(){const t=this.getStack();return!!t&&t.relegate(this)}resetSkewAndRotation(){const{visualElement:t}=this.options;if(!t)return;let e=!1;const{latestValues:n}=t;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(e=!0),!e)return;const i={};n.z&&nr("z",t,i,this.animationValues);for(let s=0;s<Zs.length;s++)nr(`rotate${Zs[s]}`,t,i,this.animationValues),nr(`skew${Zs[s]}`,t,i,this.animationValues);t.render();for(const s in i)t.setStaticValue(s,i[s]),this.animationValues&&(this.animationValues[s]=i[s]);t.scheduleRender()}getProjectionStyles(t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return tr;const e={visibility:""},n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.opacity="",e.pointerEvents=Ps(t?.pointerEvents)||"",e.transform=n?n(this.latestValues,""):"none",e;const i=this.getLead();if(!this.projectionDelta||!this.layout||!i.target){const e={};return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=Ps(t?.pointerEvents)||""),this.hasProjected&&!Oi(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1),e}const s=i.animationValues||i.latestValues;this.applyTransformsToTarget(),e.transform=function(t,e,n){let i="";const s=t.x.translate/e.x,r=t.y.translate/e.y,o=n?.z||0;if((s||r||o)&&(i=`translate3d(${s}px, ${r}px, ${o}px) `),1===e.x&&1===e.y||(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:t,rotate:e,rotateX:s,rotateY:r,skewX:o,skewY:a}=n;t&&(i=`perspective(${t}px) ${i}`),e&&(i+=`rotate(${e}deg) `),s&&(i+=`rotateX(${s}deg) `),r&&(i+=`rotateY(${r}deg) `),o&&(i+=`skewX(${o}deg) `),a&&(i+=`skewY(${a}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return 1===a&&1===l||(i+=`scale(${a}, ${l})`),i||"none"}(this.projectionDeltaWithTransform,this.treeScale,s),n&&(e.transform=n(s,e.transform));const{x:r,y:o}=this.projectionDelta;e.transformOrigin=`${100*r.origin}% ${100*o.origin}% 0`,i.animationValues?e.opacity=i===this?s.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:e.opacity=i===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const a in bs){if(void 0===s[a])continue;const{correct:t,applyTo:n,isCSSVariable:r}=bs[a],o="none"===e.transform?s[a]:t(s[a],i);if(n){const t=n.length;for(let i=0;i<t;i++)e[n[i]]=o}else r?this.options.visualElement.renderState.vars[a]=o:e[a]=o}return this.options.layoutId&&(e.pointerEvents=i===this?Ps(t?.pointerEvents)||"":"none"),e}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((t=>t.currentAnimation?.stop())),this.root.nodes.forEach(cr),this.root.sharedNodes.clear()}}}function rr(t){t.updateLayout()}function or(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:s}=t.options,r=e.source!==t.layout.source;"size"===s?_i((t=>{const i=r?e.measuredBox[t]:e.layoutBox[t],s=Si(i);i.min=n[t].min,i.max=i.min+s})):Ar(s,e.layoutBox,n)&&_i((i=>{const s=r?e.measuredBox[i]:e.layoutBox[i],o=Si(n[i]);s.max=s.min+o,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[i].max=t.relativeTarget[i].min+o)}));const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Ai(o,n,e.layoutBox);const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};r?Ai(a,t.applyTransform(i,!0),e.measuredBox):Ai(a,n,e.layoutBox);const l=!Ks(o);let u=!1;if(!t.resumeFrom){const i=t.getClosestProjectingParent();if(i&&!i.resumeFrom){const{snapshot:s,layout:r}=i;if(s&&r){const o={x:{min:0,max:0},y:{min:0,max:0}};Ri(o,e.layoutBox,s.layoutBox);const a={x:{min:0,max:0},y:{min:0,max:0}};Ri(a,n,r.layoutBox),Ws(o,a)||(u=!0),i.options.layoutRoot&&(t.relativeTarget=a,t.relativeTargetOrigin=o,t.relativeParent=i)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:e}=t.options;e&&e()}t.options.transition=void 0}function ar(t){E.value&&Js.nodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=Boolean(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function lr(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function ur(t){t.clearSnapshot()}function cr(t){t.clearMeasurements()}function hr(t){t.isLayoutDirty=!1}function dr(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function fr(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function pr(t){t.resolveTargetDelta()}function mr(t){t.calcProjection()}function gr(t){t.resetSkewAndRotation()}function yr(t){t.removeLeadSnapshot()}function vr(t,e,n){t.translate=rn(e.translate,0,n),t.scale=rn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function wr(t,e,n,i){t.min=rn(e.min,n.min,i),t.max=rn(e.max,n.max,i)}function br(t){return t.animationValues&&void 0!==t.animationValues.opacityExit}const Tr={duration:.45,ease:[.4,0,.1,1]},Er=t=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Sr=Er("applewebkit/")&&!Er("chrome/")?Math.round:a;function xr(t){t.min=Sr(t.min),t.max=Sr(t.max)}function Ar(t,e,n){return"position"===t||"preserve-aspect"===t&&(i=Xs(e),s=Xs(n),r=.2,!(Math.abs(i-s)<=r));var i,s,r}function Cr(t){return t!==t.root&&t.scroll?.wasRoot}const Pr=sr({attachResizeListener:(t,e)=>wi(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Rr={current:void 0},Dr=sr({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Rr.current){const t=new Pr({});t.mount(window),t.setOptions({layoutScroll:!0}),Rr.current=t}return Rr.current},resetTransform:(t,e)=>{t.style.transform=void 0!==e?e:"none"},checkIsScrollRoot:t=>Boolean("fixed"===window.getComputedStyle(t).position)}),_r={pan:{Feature:class extends gi{constructor(){super(...arguments),this.removePointerDownListener=a}onPointerDown(t){this.session=new Xi(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Gi(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:cs(t),onStart:cs(e),onMove:n,onEnd:(t,e)=>{delete this.session,i&&j.postRender((()=>i(t,e)))}}}mount(){this.removePointerDownListener=Ti(this.node.current,"pointerdown",(t=>this.onPointerDown(t)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends gi{constructor(t){super(t),this.removeGroupControls=a,this.removeListeners=a,this.controls=new ls(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||a}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Dr,MeasureLayout:Es}};function kr(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover","Start"===n);const s=i["onHover"+n];s&&j.postRender((()=>s(e,bi(e))))}function Ir(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap","Start"===n);const s=i["onTap"+("End"===n?"":n)];s&&j.postRender((()=>s(e,bi(e))))}const Or=new WeakMap,Mr=new WeakMap,Nr=t=>{const e=Or.get(t.target);e&&e(t)},Lr=t=>{t.forEach(Nr)};function Vr(t,e,n){const i=function(t){let{root:e,...n}=t;const i=e||document;Mr.has(i)||Mr.set(i,{});const s=Mr.get(i),r=JSON.stringify(n);return s[r]||(s[r]=new IntersectionObserver(Lr,{root:e,...n})),s[r]}(e);return Or.set(t,n),i.observe(t),()=>{Or.delete(t),i.unobserve(t)}}const Fr={some:0,all:1};const Ur={inView:{Feature:class extends gi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:i="some",once:s}=t,r={root:e?e.current:void 0,rootMargin:n,threshold:"number"===typeof i?i:Fr[i]};return Vr(this.node.current,r,(t=>{const{isIntersecting:e}=t;if(this.isInView===e)return;if(this.isInView=e,s&&!e&&this.hasEnteredView)return;e&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",e);const{onViewportEnter:n,onViewportLeave:i}=this.node.getProps(),r=e?n:i;r&&r(t)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:t,prevProps:e}=this.node,n=["amount","margin","root"].some(function(t){let{viewport:e={}}=t,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=>e[t]!==n[t]}(t,e));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends gi{mount(){const{current:t}=this.node;t&&(this.unmount=ot(t,((t,e)=>(Ir(this.node,e,"Start"),(t,e)=>{let{success:n}=e;return Ir(this.node,t,n?"End":"Cancel")})),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends gi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch(e){t=!0}t&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=fn(wi(this.node.current,"focus",(()=>this.onFocus())),wi(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends gi{mount(){const{current:t}=this.node;t&&(this.unmount=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[i,s,r]=Y(t,n),o=t=>{if(!J(t))return;const{target:n}=t,i=e(n,t);if("function"!==typeof i||!n)return;const r=t=>{J(t)&&(i(t),n.removeEventListener("pointerleave",r))};n.addEventListener("pointerleave",r,s)};return i.forEach((t=>{t.addEventListener("pointerenter",o,s)})),r}(t,((t,e)=>(kr(this.node,e,"Start"),t=>kr(this.node,t,"End")))))}unmount(){}}}},jr={layout:{ProjectionNode:Dr,MeasureLayout:Es}},Br=(0,ds.createContext)({strict:!1});var $r=n(51);const qr=(0,ds.createContext)({});function zr(t){return p(t.animate)||oi.some((e=>si(t[e])))}function Kr(t){return Boolean(zr(t)||t.variants)}function Gr(t){const{initial:e,animate:n}=function(t,e){if(zr(t)){const{initial:e,animate:n}=t;return{initial:!1===e||si(e)?e:void 0,animate:si(n)?n:void 0}}return!1!==t.inherit?e:{}}(t,(0,ds.useContext)(qr));return(0,ds.useMemo)((()=>({initial:e,animate:n})),[Hr(e),Hr(n)])}function Hr(t){return Array.isArray(t)?t.join(" "):t}var Wr=n(735);const Xr={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Qr={};for(const Jo in Xr)Qr[Jo]={isEnabled:t=>Xr[Jo].some((e=>!!t[e]))};const Yr=Symbol.for("motionComponentSymbol");function Jr(t,e,n){return(0,ds.useCallback)((i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&("function"===typeof n?n(i):Hi(n)&&(n.current=i))}),[e])}var Zr=n(674),to=n(293);function eo(t,e,n,i,s){const{visualElement:r}=(0,ds.useContext)(qr),o=(0,ds.useContext)(Br),a=(0,ds.useContext)(Zr.t),l=(0,ds.useContext)($r.Q).reducedMotion,u=(0,ds.useRef)(null);i=i||o.renderer,!u.current&&i&&(u.current=i(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:!!a&&!1===a.initial,reducedMotionConfig:l}));const c=u.current,h=(0,ds.useContext)(ms);!c||c.projection||!s||"html"!==c.type&&"svg"!==c.type||function(t,e,n,i){const{layoutId:s,layout:r,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:no(t.parent)),t.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:Boolean(o)||a&&Hi(a),visualElement:t,animationType:"string"===typeof r?r:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:u})}(u.current,n,s,h);const d=(0,ds.useRef)(!1);(0,ds.useInsertionEffect)((()=>{c&&d.current&&c.update(n,a)}));const f=n[vt],p=(0,ds.useRef)(Boolean(f)&&!window.MotionHandoffIsComplete?.(f)&&window.MotionHasOptimisedAnimation?.(f));return(0,to.E)((()=>{c&&(d.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),z.render(c.render),p.current&&c.animationState&&c.animationState.animateChanges())})),(0,ds.useEffect)((()=>{c&&(!p.current&&c.animationState&&c.animationState.animateChanges(),p.current&&(queueMicrotask((()=>{window.MotionHandoffMarkAsComplete?.(f)})),p.current=!1))})),c}function no(t){if(t)return!1!==t.options.allowProjection?t.projection:no(t.parent)}function io(t){let{preloadedFeatures:e,createVisualElement:n,useRender:i,useVisualState:s,Component:r}=t;function o(t,e){let o;const a={...(0,ds.useContext)($r.Q),...t,layoutId:so(t)},{isStatic:l}=a,u=Gr(t),c=s(t,l);if(!l&&Wr.B){!function(){(0,ds.useContext)(Br).strict;0}();const t=function(t){const{drag:e,layout:n}=Qr;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}(a);o=t.MeasureLayout,u.visualElement=eo(r,c,a,n,t.ProjectionNode)}return(0,hs.jsxs)(qr.Provider,{value:u,children:[o&&u.visualElement?(0,hs.jsx)(o,{visualElement:u.visualElement,...a}):null,i(r,t,Jr(c,u.visualElement,e),c,l,u.visualElement)]})}e&&function(t){for(const e in t)Qr[e]={...Qr[e],...t[e]}}(e),o.displayName=`motion.${"string"===typeof r?r:`create(${r.displayName??r.name??""})`}`;const a=(0,ds.forwardRef)(o);return a[Yr]=r,a}function so(t){let{layoutId:e}=t;const n=(0,ds.useContext)(ps.L).id;return n&&void 0!==e?n+"-"+e:e}function ro(t,e){let{layout:n,layoutId:i}=e;return ht.has(t)||t.startsWith("origin")||(n||void 0!==i)&&(!!bs[t]||"opacity"===t)}const oo=(t,e)=>e&&"number"===typeof t?e.transform(t):t,ao={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lo=ct.length;function uo(t,e,n){const{style:i,vars:s,transformOrigin:r}=t;let o=!1,a=!1;for(const l in e){const t=e[l];if(ht.has(l))o=!0;else if(qe(l))s[l]=t;else{const e=oo(t,ge[l]);l.startsWith("origin")?(a=!0,r[l]=e):i[l]=e}}if(e.transform||(o||n?i.transform=function(t,e,n){let i="",s=!0;for(let r=0;r<lo;r++){const o=ct[r],a=t[o];if(void 0===a)continue;let l=!0;if(l="number"===typeof a?a===(o.startsWith("scale")?1:0):0===parseFloat(a),!l||n){const t=oo(a,ge[o]);l||(s=!1,i+=`${ao[o]||o}(${t}) `),n&&(e[o]=t)}}return i=i.trim(),n?i=n(e,s?"":i):s&&(i="none"),i}(e,t.transform,n):i.transform&&(i.transform="none")),a){const{originX:t="50%",originY:e="50%",originZ:n=0}=r;i.transformOrigin=`${t} ${e} ${n}`}}const co=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ho(t,e,n){for(const i in e)mt(e[i])||ro(i,n)||(t[i]=e[i])}function fo(t,e){const n={};return ho(n,t.style||{},t),Object.assign(n,function(t,e){let{transformTemplate:n}=t;return(0,ds.useMemo)((()=>{const t={style:{},transform:{},transformOrigin:{},vars:{}};return uo(t,e,n),Object.assign({},t.vars,t.style)}),[e])}(t,e)),n}function po(t,e){const n={},i=fo(t,e);return t.drag&&!1!==t.dragListener&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),void 0===t.tabIndex&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const mo=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function go(t){return t.startsWith("while")||t.startsWith("drag")&&"draggable"!==t||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||mo.has(t)}let yo=t=>!go(t);try{(vo=require("@emotion/is-prop-valid").default)&&(yo=t=>t.startsWith("on")?!go(t):vo(t))}catch{}var vo;const wo=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bo(t){return"string"===typeof t&&!t.includes("-")&&!!(wo.indexOf(t)>-1||/[A-Z]/u.test(t))}const To={offset:"stroke-dashoffset",array:"stroke-dasharray"},Eo={offset:"strokeDashoffset",array:"strokeDasharray"};function So(t,e,n){return"string"===typeof t?t:Wt.transform(e+n*t)}function xo(t,e,n,i){let{attrX:s,attrY:r,attrScale:o,originX:a,originY:l,pathLength:u,pathSpacing:c=1,pathOffset:h=0,...d}=e;if(uo(t,d,i),n)return void(t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox));t.attrs=t.style,t.style={};const{attrs:f,style:p,dimensions:m}=t;f.transform&&(m&&(p.transform=f.transform),delete f.transform),m&&(void 0!==a||void 0!==l||p.transform)&&(p.transformOrigin=function(t,e,n){return`${So(e,t.x,t.width)} ${So(n,t.y,t.height)}`}(m,void 0!==a?a:.5,void 0!==l?l:.5)),void 0!==s&&(f.x=s),void 0!==r&&(f.y=r),void 0!==o&&(f.scale=o),void 0!==u&&function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];t.pathLength=1;const r=s?To:Eo;t[r.offset]=Wt.transform(-i);const o=Wt.transform(e),a=Wt.transform(n);t[r.array]=`${o} ${a}`}(f,u,c,h,!1)}const Ao=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),Co=t=>"string"===typeof t&&"svg"===t.toLowerCase();function Po(t,e,n,i){const s=(0,ds.useMemo)((()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return xo(n,e,Co(i),t.transformTemplate),{...n.attrs,style:{...n.style}}}),[e]);if(t.style){const e={};ho(e,t.style,t),s.style={...e,...s.style}}return s}function Ro(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(e,n,i,s,r)=>{let{latestValues:o}=s;const a=(bo(e)?Po:po)(n,o,r,e),l=function(t,e,n){const i={};for(const s in t)"values"===s&&"object"===typeof t.values||(yo(s)||!0===n&&go(s)||!e&&!go(s)||t.draggable&&s.startsWith("onDrag"))&&(i[s]=t[s]);return i}(n,"string"===typeof e,t),u=e!==ds.Fragment?{...l,...a,ref:i}:{},{children:c}=n,h=(0,ds.useMemo)((()=>mt(c)?c.get():c),[c]);return(0,ds.createElement)(e,{...u,children:h})}}var Do=n(930);const _o=t=>(e,n)=>{const i=(0,ds.useContext)(qr),s=(0,ds.useContext)(Zr.t),r=()=>function(t,e,n,i){let{scrapeMotionValuesFromProps:s,createRenderState:r,onUpdate:o}=t;const a={latestValues:ko(e,n,i,s),renderState:r()};return o&&(a.onMount=t=>o({props:e,current:t,...a}),a.onUpdate=t=>o(t)),a}(t,e,i,s);return n?r():(0,Do.M)(r)};function ko(t,e,n,i){const s={},r=i(t,{});for(const d in r)s[d]=Ps(r[d]);let{initial:o,animate:a}=t;const l=zr(t),u=Kr(t);e&&u&&!l&&!1!==t.inherit&&(void 0===o&&(o=e.initial),void 0===a&&(a=e.animate));let c=!!n&&!1===n.initial;c=c||!1===o;const h=c?a:o;if(h&&"boolean"!==typeof h&&!p(h)){const e=Array.isArray(h)?h:[h];for(let n=0;n<e.length;n++){const i=g(t,e[n]);if(i){const{transitionEnd:t,transition:e,...n}=i;for(const i in n){let t=n[i];if(Array.isArray(t)){t=t[c?t.length-1:0]}null!==t&&(s[i]=t)}for(const i in t)s[i]=t[i]}}}return s}function Io(t,e,n){const{style:i}=t,s={};for(const r in i)(mt(i[r])||e.style&&mt(e.style[r])||ro(r,t)||void 0!==n?.getValue(r)?.liveStyle)&&(s[r]=i[r]);return s}const Oo={useVisualState:_o({scrapeMotionValuesFromProps:Io,createRenderState:co})};function Mo(t,e){try{e.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(n){e.dimensions={x:0,y:0,width:0,height:0}}}function No(t,e,n,i){let{style:s,vars:r}=e;Object.assign(t.style,s,i&&i.getProjectionStyles(n));for(const o in r)t.style.setProperty(o,r[o])}const Lo=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Vo(t,e,n,i){No(t,e,void 0,i);for(const s in e.attrs)t.setAttribute(Lo.has(s)?s:yt(s),e.attrs[s])}function Fo(t,e,n){const i=Io(t,e,n);for(const s in t)if(mt(t[s])||mt(e[s])){i[-1!==ct.indexOf(s)?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s]=t[s]}return i}const Uo=["x","y","width","height","cx","cy","r"],jo={useVisualState:_o({scrapeMotionValuesFromProps:Fo,createRenderState:Ao,onUpdate:t=>{let{props:e,prevProps:n,current:i,renderState:s,latestValues:r}=t;if(!i)return;let o=!!e.drag;if(!o)for(const l in r)if(ht.has(l)){o=!0;break}if(!o)return;let a=!n;if(n)for(let l=0;l<Uo.length;l++){const t=Uo[l];e[t]!==n[t]&&(a=!0)}a&&j.read((()=>{Mo(i,s),j.render((()=>{xo(s,r,Co(i.tagName),e.transformTemplate),Vo(i,s)}))}))}})};function Bo(t,e){return function(n){let{forwardMotionProps:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forwardMotionProps:!1};return io({...bo(n)?jo:Oo,preloadedFeatures:t,useRender:Ro(i),createVisualElement:e,Component:n})}}const $o={current:null},qo={current:!1};const zo=[...Qe,Zt,le],Ko=new WeakMap;const Go=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Ho{scrapeMotionValuesFromProps(t,e,n){return{}}constructor(t){let{parent:e,props:n,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:o}=t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=je,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const t=W.now();this.renderScheduledAt<t&&(this.renderScheduledAt=t,j.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:c}=o;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=Boolean(r),this.isControllingVariants=zr(n),this.isVariantNode=Kr(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const t=d[f];void 0!==l[f]&&mt(t)&&t.set(l[f],!1)}}mount(t){this.current=t,Ko.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((t,e)=>this.bindToMotionValue(e,t))),qo.current||function(){if(qo.current=!0,Wr.B)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>$o.current=t.matches;t.addListener(e),e()}else $o.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||$o.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),B(this.notifyUpdate),B(this.render),this.valueSubscriptions.forEach((t=>t())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=ht.has(t);n&&this.onBindTransform&&this.onBindTransform();const i=e.on("change",(e=>{this.latestValues[t]=e,this.props.onUpdate&&j.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)})),s=e.on("renderRequest",this.scheduleRender);let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,(()=>{i(),s(),r&&r(),e.owner&&e.stop()}))}sortNodePosition(t){return this.current&&this.sortInstanceNodePosition&&this.type===t.type?this.sortInstanceNodePosition(this.current,t.current):0}updateFeatures(){let t="animation";for(t in Qr){const e=Qr[t];if(!e)continue;const{isEnabled:n,Feature:i}=e;if(!this.features[t]&&i&&n(this.props)&&(this.features[t]=new i(this)),this.features[t]){const e=this.features[t];e.isMounted?e.update():(e.mount(),e.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<Go.length;n++){const e=Go[n];this.propEventSubscriptions[e]&&(this.propEventSubscriptions[e](),delete this.propEventSubscriptions[e]);const i=t["on"+e];i&&(this.propEventSubscriptions[e]=this.on(e,i))}this.prevMotionValues=function(t,e,n){for(const i in e){const s=e[i],r=n[i];if(mt(s))t.addValue(i,s);else if(mt(r))t.addValue(i,ut(s,{owner:t}));else if(r!==s)if(t.hasValue(i)){const e=t.getValue(i);!0===e.liveStyle?e.jump(s):e.hasAnimated||e.set(s)}else{const e=t.getStaticValue(i);t.addValue(i,ut(void 0!==e?e:s,{owner:t}))}}for(const i in n)void 0===e[i]&&t.removeValue(i);return e}(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return void 0===n&&void 0!==e&&(n=ut(null===e?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=void 0===this.latestValues[t]&&this.current?this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options):this.latestValues[t];var i;return void 0!==n&&null!==n&&("string"===typeof n&&(Be(n)||It(n))?n=parseFloat(n):(i=n,!zo.find(Xe(i))&&le.test(e)&&(n=we(t,e))),this.setBaseTarget(t,mt(n)?n.get():n)),mt(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let n;if("string"===typeof e||"object"===typeof e){const i=g(this.props,e,this.presenceContext?.custom);i&&(n=i[t])}if(e&&void 0!==n)return n;const i=this.getBaseTargetFromProps(this.props,t);return void 0===i||mt(i)?void 0!==this.initialValues[t]&&void 0===n?void 0:this.baseTarget[t]:i}on(t,e){return this.events[t]||(this.events[t]=new u),this.events[t].add(e)}notify(t){if(this.events[t]){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.events[t].notify(...n)}}}class Wo extends Ho{constructor(){super(...arguments),this.KeyframeResolver=Je}sortInstanceNodePosition(t,e){return 2&t.compareDocumentPosition(e)?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,e){let{vars:n,style:i}=e;delete n[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;mt(t)&&(this.childSubscription=t.on("change",(t=>{this.current&&(this.current.textContent=`${t}`)})))}}class Xo extends Wo{constructor(){super(...arguments),this.type="html",this.renderInstance=No}readValueFromInstance(t,e){if(ht.has(e))return((t,e)=>{const{transform:n="none"}=getComputedStyle(t);return De(n,e)})(t,e);{const i=(n=t,window.getComputedStyle(n)),s=(qe(e)?i.getPropertyValue(e):i[e])||0;return"string"===typeof s?s.trim():s}var n}measureInstanceViewportBox(t,e){let{transformPagePoint:n}=e;return Ki(t,n)}build(t,e,n){uo(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return Io(t,e,n)}}class Qo extends Wo{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Di,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&Mo(this.current,this.renderState)}}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(ht.has(e)){const t=ve(e);return t&&t.default||0}return e=Lo.has(e)?e:yt(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return Fo(t,e,n)}onBindTransform(){this.current&&!this.renderState.dimensions&&j.postRender(this.updateDimensions)}build(t,e,n){xo(t,e,this.isSVGTag,n.transformTemplate)}renderInstance(t,e,n,i){Vo(t,e,0,i)}mount(t){this.isSVGTag=Co(t.tagName),super.mount(t)}}const Yo=f(Bo({...vi,...Ur,..._r,...jr},((t,e)=>bo(t)?new Qo(e):new Xo(e,{allowProjection:t!==ds.Fragment}))))},917:(t,e,n)=>{n.d(e,{xQ:()=>r});var i=n(43),s=n(674);function r(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=(0,i.useContext)(s.t);if(null===e)return[!0,null];const{isPresent:n,onExitComplete:r,register:o}=e,a=(0,i.useId)();(0,i.useEffect)((()=>{if(t)return o(a)}),[t]);const l=(0,i.useCallback)((()=>t&&r&&r(a)),[a,r,t]);return!n&&r?[!1,l]:[!0]}},930:(t,e,n)=>{n.d(e,{M:()=>s});var i=n(43);function s(t){const e=(0,i.useRef)(null);return null===e.current&&(e.current=t()),e.current}}}]);
//# sourceMappingURL=496.eac48da5.chunk.js.map