"use strict";(self.webpackChunkmeditation_app=self.webpackChunkmeditation_app||[]).push([[407],{835:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var s=n(43),a=n(579);const o=e=>{let{onDurationChange:t,onSaveSession:n}=e;const[o,r]=(0,s.useState)(5),[i,c]=(0,s.useState)(60*o),[l,u]=(0,s.useState)(!1);(0,s.useEffect)((()=>{t(o),c(60*o)}),[o]),(0,s.useEffect)((()=>{let e=null;return l&&i>0?e=setInterval((()=>{c((e=>e-1))}),1e3):clearInterval(e),()=>clearInterval(e)}),[l,i]);return(0,a.jsxs)("div",{className:"timer",children:[(0,a.jsxs)("p",{children:["Selected Duration: ",o," Minutes"]}),(0,a.jsxs)("p",{children:["Time Remaining: ",Math.floor(i/60),":",(i%60).toString().padStart(2,"0")]}),(0,a.jsxs)("div",{className:"buttons",children:[(0,a.jsx)("button",{onClick:()=>r((e=>Math.max(1,e-1))),children:"-"}),(0,a.jsx)("button",{onClick:()=>r((e=>e+1)),children:"+"})]}),(0,a.jsxs)("div",{className:"controls",children:[(0,a.jsx)("button",{onClick:()=>u(!0),children:"Start"}),(0,a.jsx)("button",{onClick:()=>u(!1),children:"Pausa"}),(0,a.jsx)("button",{onClick:()=>{u(!1),c(60*o)},children:"Reset"}),(0,a.jsx)("button",{onClick:n,children:"Save Session"})]})]})};var r=n(546),i=n(806),c=n(213);const l=e=>{let{onQuoteChange:t}=e;const[n,o]=(0,s.useState)("Caricamento frase..."),[l,u]=(0,s.useState)(0),d=()=>{c.A.get("https://api.allorigins.win/get?url="+encodeURIComponent("https://zenquotes.io/api/random")).then((e=>{const n=JSON.parse(e.data.contents),s=`${n[0].q} \u2014 ${n[0].a}`;o(s),u((e=>e+1)),t&&t(s)})).catch((()=>{const e="Non riesco a caricare la frase. Respira comunque.";o(e),t&&t(e)}))};return(0,s.useEffect)((()=>{d();const e=setInterval(d,3e4);return()=>clearInterval(e)}),[]),(0,a.jsxs)("div",{className:"quote-box",children:[(0,a.jsx)(r.N,{mode:"wait",children:(0,a.jsx)(i.P.p,{className:"quote",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:1},children:n},l)}),(0,a.jsxs)("p",{className:"quote-source",children:["Inspirational quotes provided by"," ",(0,a.jsx)("a",{href:"https://zenquotes.io/",target:"_blank",rel:"noopener noreferrer",children:"ZenQuotes API"})]})]})},u=(e,t)=>{const n=(0,s.useRef)(new Audio(e));return(0,s.useEffect)((()=>{const e=n.current;return e.loop=!0,t?e.play():e.pause(),()=>e.pause()}),[t,e]),n.current},d=n.p+"static/media/forest.305c6546f835f297dbe7.mp3";var h=n(482),p=n(472),m=n(416);n(448);const x=()=>{const[e,t]=(0,s.useState)(!1),[n,r]=(0,s.useState)(""),[i,c]=(0,s.useState)(5),x=(0,p.aU)(h.A),S=(0,m.xI)(h.A);u(d,e);return(0,a.jsxs)("div",{className:"page-meditation",children:[(0,a.jsx)("h1",{children:"Meditation Space"}),!e&&(0,a.jsx)("button",{onClick:()=>t(!0),className:"zen-button",children:"Start Music"}),(0,a.jsx)(l,{onQuoteChange:e=>{r(e)}}),(0,a.jsx)(o,{onDurationChange:c,onSaveSession:async()=>{const e=S.currentUser;if(e)try{await(0,p.gS)((0,p.rJ)(x,"meditationSessions"),{date:new Date,durationInMinutes:i,meditationType:"forestSound",motivationalQuote:n,userId:e.uid}),alert("Sessione salvata con successo!")}catch(t){console.error("Errore durante il salvataggio:",t)}else alert("Devi essere loggato per salvare una sessione.")}})]})}}}]);
//# sourceMappingURL=407.f6cdf17c.chunk.js.map